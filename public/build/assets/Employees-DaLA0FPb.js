import{r as y,j as e,H as w,a as x}from"./app-CqYo-92z.js";import{A as M}from"./AdminLayout-P5w8j_D8.js";import{F as i}from"./index-DaOO_5iM.js";import{C as P,T as A,B as j,S as a}from"./Logo-pMTbWeYE.js";import{R as N}from"./PlusOutlined-p3TthVOg.js";import{F as z}from"./Table-9UY9zLr4.js";import{M as B}from"./index-DTLtFOjG.js";import{R as D,C as g}from"./row-Dfw-mlxx.js";import{I as f}from"./index-C9Txx89L.js";import{S as h}from"./index-CG51l83V.js";import{S as O}from"./index-B60uOj5t.js";import{s as o}from"./index-BcGTn8CZ.js";import{R as V}from"./UserOutlined-CKL0tGZH.js";import{R as q}from"./MailOutlined-s23cIV-9.js";import{R as G}from"./PhoneOutlined-BC052uu2.js";import{T as p}from"./index-DEQl7SLw.js";import{R as H}from"./CheckCircleOutlined-D6Z0_JYP.js";import{R as J}from"./CloseCircleOutlined-BrZ26Ykv.js";import{R as K}from"./EditOutlined-BT11tkKE.js";import{P as L}from"./index-BrMeWKBs.js";import{R as Q}from"./DeleteOutlined-DTX3RTcs.js";/* empty css            */import"./FireOutlined-B1JFdZXh.js";import"./index-C-hzZnml.js";import"./move-C8LSlEq6.js";import"./DollarOutlined-BaCaRyFl.js";import"./ClockCircleOutlined-RgM7uVa5.js";import"./FileTextOutlined-BbzbzJpZ.js";import"./useForm-BDyu4SJx.js";import"./QuestionCircleOutlined-CkfPyHQh.js";import"./CheckCircleFilled-DkQIjyv5.js";import"./InfoCircleFilled-Bq1WM-3L.js";import"./addEventListener-C1IMU38P.js";import"./DownOutlined-CIlxRIT-.js";import"./index-CeOGyxOa.js";import"./Pagination-CaRhxtC5.js";import"./index-DMTREKJq.js";import"./extendsObject-78o_rR5W.js";import"./index-f3k4wLKy.js";import"./Input-bwUpPmQG.js";import"./useClosable-BZS11_vL.js";import"./EyeOutlined-6jIcXCQA.js";import"./EyeOutlined-Bmd706kk.js";const{Title:U,Text:d}=A,{Option:c}=h;function De({auth:v,employees:_,services:b,scheduleSettings:E}){const S=s=>{if(s<60)return`${s} min`;{const r=Math.floor(s/60),t=s%60;return t>0?`${r}h ${t}m`:`${r}h`}},[I,n]=y.useState(!1),[m,u]=y.useState(null),[l]=i.useForm(),C=()=>{u(null),l.resetFields(),l.setFieldsValue({is_active:!0}),n(!0)},k=s=>{u(s),l.setFieldsValue({name:s.name,email:s.email,phone_number:s.phone_number,gender:s.gender,is_active:s.is_active,services:s.services?.map(r=>r.id)||[],schedule_settings:s.schedule_settings?.map(r=>r.id)||[]}),n(!0)},R=s=>{x.post(route("admin.employees.delete",s.id),{},{onSuccess:()=>{o.success("Employee deleted successfully!")},onError:r=>{o.error(r.error||"Failed to delete employee")}})},F=()=>{l.validateFields().then(s=>{const r={name:s.name,email:s.email,phone_number:s.phone_number,gender:s.gender,is_active:s.is_active,services:s.services||[],schedule_settings:s.schedule_settings||[]};m?x.put(route("admin.employees.update",m.id),r,{onSuccess:()=>{o.success("Employee updated successfully!"),n(!1)},onError:t=>{o.error("Failed to update employee")}}):x.post(route("admin.employees.store"),r,{onSuccess:()=>{o.success("Employee created successfully!"),n(!1)},onError:t=>{o.error("Failed to create employee")}})})},$=()=>{n(!1),u(null),l.resetFields()},T=[{title:"Name",dataIndex:"name",key:"name",render:(s,r)=>e.jsxs(a,{children:[e.jsx(V,{}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:s}),e.jsx("div",{style:{fontSize:"12px",color:"#666"},children:r.email})]})]})},{title:"Contact",key:"contact",render:(s,r)=>e.jsxs(a,{direction:"vertical",size:"small",children:[e.jsxs(a,{children:[e.jsx(q,{}),e.jsx(d,{copyable:!0,children:r.email})]}),e.jsxs(a,{children:[e.jsx(G,{}),e.jsx(d,{copyable:!0,children:r.phone_number})]})]})},{title:"Gender",dataIndex:"gender",key:"gender",render:s=>{if(!s)return e.jsx(d,{type:"secondary",children:"Not specified"});const t={male:{color:"blue",text:"Male"},female:{color:"pink",text:"Female"},other:{color:"purple",text:"Other"}}[s]||{color:"default",text:s};return e.jsx(p,{color:t.color,children:t.text})}},{title:"Services",key:"services",render:(s,r)=>e.jsx("div",{children:r.services&&r.services.length>0?r.services.map(t=>e.jsx(p,{color:"blue",style:{marginBottom:4},children:t.name},t.id)):e.jsx(d,{type:"secondary",children:"No services assigned"})})},{title:"Schedules",key:"schedules",render:(s,r)=>e.jsx("div",{children:r.schedule_settings&&r.schedule_settings.length>0?r.schedule_settings.map(t=>e.jsx(p,{color:"green",style:{marginBottom:4},children:t.name},t.id)):e.jsx(d,{type:"secondary",children:"No schedules assigned"})})},{title:"Status",dataIndex:"is_active",key:"is_active",render:s=>e.jsx(p,{icon:s?e.jsx(H,{}):e.jsx(J,{}),color:s?"success":"error",children:s?"Active":"Inactive"})},{title:"Actions",key:"actions",render:(s,r)=>e.jsxs(a,{children:[e.jsx(j,{type:"primary",icon:e.jsx(K,{}),size:"small",onClick:()=>k(r),children:"Edit"}),e.jsx(L,{title:"Delete Employee",description:"Are you sure you want to delete this employee? This action cannot be undone.",onConfirm:()=>R(r),okText:"Yes",cancelText:"No",children:e.jsx(j,{type:"primary",danger:!0,icon:e.jsx(Q,{}),size:"small",children:"Delete"})})]})}];return e.jsxs(M,{auth:v,children:[e.jsx(w,{title:"Employee Management"}),e.jsxs("div",{style:{padding:"24px"},children:[e.jsxs(P,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[e.jsx(U,{level:2,style:{margin:0},children:"Employee Management"}),e.jsx(j,{type:"primary",icon:e.jsx(N,{}),onClick:C,children:"Add Employee"})]}),e.jsx(z,{columns:T,dataSource:_,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(s,r)=>`${r[0]}-${r[1]} of ${s} employees`}})]}),e.jsx(B,{title:m?"Edit Employee":"Add Employee",open:I,onOk:F,onCancel:$,width:600,okText:m?"Update":"Create",cancelText:"Cancel",children:e.jsxs(i,{form:l,layout:"vertical",initialValues:{is_active:!0},children:[e.jsxs(D,{gutter:16,children:[e.jsx(g,{span:12,children:e.jsx(i.Item,{name:"name",label:"Full Name",rules:[{required:!0,message:"Please enter employee name"}],children:e.jsx(f,{placeholder:"Enter full name"})})}),e.jsx(g,{span:12,children:e.jsx(i.Item,{name:"email",label:"Email Address",rules:[{required:!0,message:"Please enter email address"},{type:"email",message:"Please enter a valid email address"}],children:e.jsx(f,{placeholder:"Enter email address"})})})]}),e.jsx(i.Item,{name:"phone_number",label:"Phone Number",rules:[{required:!0,message:"Please enter phone number"}],children:e.jsx(f,{placeholder:"Enter phone number"})}),e.jsx(i.Item,{name:"gender",label:"Gender",children:e.jsxs(h,{placeholder:"Select gender (optional)",children:[e.jsx(c,{value:"male",children:"Male"}),e.jsx(c,{value:"female",children:"Female"}),e.jsx(c,{value:"other",children:"Other"})]})}),e.jsx(i.Item,{name:"services",label:"Assigned Services",rules:[{required:!0,message:"Please select at least one service"}],children:e.jsx(h,{mode:"multiple",placeholder:"Select services this employee can provide",optionFilterProp:"children",children:b.map(s=>e.jsxs(c,{value:s.id,children:[s.name," (",s.duration_label||S(s.duration),")"]},s.id))})}),e.jsx(i.Item,{name:"schedule_settings",label:"Assigned Schedules (Coming Soon)",disabled:"true",children:e.jsx(h,{mode:"multiple",placeholder:"Select schedules this employee follows (optional)",optionFilterProp:"children",disabled:!0,children:E.map(s=>e.jsxs(c,{value:s.id,children:[s.name," (",s.working_days_text,")"]},s.id))})}),e.jsx(i.Item,{name:"is_active",label:"Status",valuePropName:"checked",children:e.jsx(O,{checkedChildren:"Active",unCheckedChildren:"Inactive"})})]})})]})]})}export{De as default};
