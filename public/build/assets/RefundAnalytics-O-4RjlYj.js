import{r as p,j as e,H as I}from"./app-CtEd8btx.js";import{A as P}from"./AdminLayout-BEvcnGED.js";import{d as T}from"./dayjs.min-BZN-Vsnu.js";import{I as k,C as l,T as B,S as f,B as D}from"./Logo-CDnTpOJ2.js";import{D as F}from"./index-B8S3B9XJ.js";import{S as R}from"./index-5b81ZYwK.js";import{R as x,C as i}from"./row-CVSIS8QX.js";import{S as c}from"./index-CPJrveHo.js";import{R as O}from"./DollarOutlined-DUfht7U5.js";import{R as g}from"./ClockCircleOutlined-2gudfEud.js";import{R as $}from"./CheckCircleOutlined-jaEvBVAN.js";import{P as v}from"./progress-a71eiBSe.js";import{F as S}from"./Table-Cm5CCh6T.js";import{B as M}from"./index-DwFUB8lp.js";/* empty css            */import"./index-Bh9DPq6e.js";import"./FireOutlined-NKiv-rEg.js";import"./index-nxhcDVax.js";import"./move-BiJmt5SU.js";import"./CalendarOutlined-BdCkm89t.js";import"./UserOutlined-C3KekljF.js";import"./PlusOutlined-CeknAaeW.js";import"./FileTextOutlined-BLQwQrUj.js";import"./GiftOutlined-Ce7eZHfK.js";import"./index-B-YKnWi6.js";import"./DownOutlined-CIB-8ZZZ.js";import"./Input-C2tQw5js.js";import"./CheckCircleFilled-Ccn4KK4E.js";import"./addEventListener-B7LN8YTG.js";import"./index-CbhzR6cM.js";import"./Pagination-LG675jey.js";import"./useForm-BBAlVzQt.js";import"./index-CpGRbCUp.js";import"./extendsObject-78o_rR5W.js";var V={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"};function h(){return h=Object.assign?Object.assign.bind():function(a){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&(a[d]=o[d])}return a},h.apply(this,arguments)}const E=(a,n)=>p.createElement(k,h({},a,{ref:n,icon:V})),_=p.forwardRef(E),{Title:Y,Text:s}=B,{RangePicker:H}=F,{Option:m}=R;function Re({auth:a,analytics:n,refunds:o,charts:d}){const[z,j]=p.useState(null),[C,y]=p.useState("all"),u=r=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(r),w=r=>T(r).format("MMM DD, YYYY"),b=r=>{switch(r){case"pending":return"warning";case"processed":return"success";case"failed":return"error";case"not_applicable":return"default";default:return"default"}},A=[{title:"Customer",key:"customer",render:(r,t)=>e.jsxs(f,{direction:"vertical",size:"small",children:[e.jsx(s,{strong:!0,children:t.customer.name}),e.jsx(s,{type:"secondary",style:{fontSize:"12px"},children:t.customer.email})]})},{title:"Service",key:"service",render:(r,t)=>e.jsx(s,{children:t.service.name})},{title:"Amount",key:"amount",render:(r,t)=>e.jsxs(f,{direction:"vertical",size:"small",children:[e.jsxs(s,{type:"secondary",style:{fontSize:"12px"},children:["Original: ",u(t.total_amount)]}),e.jsxs(s,{strong:!0,style:{color:"#52c41a"},children:["Refund: ",u(t.refund_amount)]}),t.cancellation_fee_charged>0&&e.jsxs(s,{type:"secondary",style:{fontSize:"12px",color:"#ff4d4f"},children:["Fee:"," ",u(t.cancellation_fee_charged)]})]})},{title:"Status",key:"status",render:(r,t)=>e.jsx(M,{status:b(t.refund_status),text:t.refund_status_text||t.refund_status})},{title:"Date",key:"date",render:(r,t)=>e.jsx(s,{type:"secondary",style:{fontSize:"12px"},children:w(t.cancelled_at)})}];return e.jsxs(P,{auth:a,children:[e.jsx(I,{title:"Refund Analytics"}),e.jsx("div",{style:{padding:"24px"},children:e.jsxs(l,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[e.jsxs(Y,{level:2,style:{margin:0},children:[e.jsx(_,{style:{marginRight:8}}),"Refund Analytics"]}),e.jsxs(f,{children:[e.jsx(H,{value:z,onChange:j,placeholder:["Start Date","End Date"]}),e.jsxs(R,{placeholder:"Filter by Status",value:C,onChange:y,style:{width:150},children:[e.jsx(m,{value:"all",children:"All Status"}),e.jsx(m,{value:"pending",children:"Pending"}),e.jsx(m,{value:"processed",children:"Processed"}),e.jsx(m,{value:"failed",children:"Failed"})]}),e.jsx(D,{type:"primary",icon:e.jsx(_,{}),onClick:()=>{j(null),y("all")},children:"Reset Filters"})]})]}),e.jsxs(x,{gutter:16,style:{marginBottom:24},children:[e.jsx(i,{span:6,children:e.jsxs(l,{size:"small",children:[e.jsx(c,{title:"Total Refunds",value:n.total_refunds,prefix:e.jsx(O,{}),valueStyle:{color:"#1890ff"}}),e.jsx(s,{type:"secondary",style:{fontSize:"12px"},children:"All time refunds"})]})}),e.jsx(i,{span:6,children:e.jsxs(l,{size:"small",children:[e.jsx(c,{title:"Pending Refunds",value:n.pending_refunds,prefix:e.jsx(g,{}),valueStyle:{color:"#faad14"}}),e.jsx(s,{type:"secondary",style:{fontSize:"12px"},children:"Awaiting processing"})]})}),e.jsx(i,{span:6,children:e.jsxs(l,{size:"small",children:[e.jsx(c,{title:"Processed Refunds",value:n.processed_refunds,prefix:e.jsx($,{}),valueStyle:{color:"#52c41a"}}),e.jsx(s,{type:"secondary",style:{fontSize:"12px"},children:"Successfully processed"})]})}),e.jsx(i,{span:6,children:e.jsxs(l,{size:"small",children:[e.jsx(c,{title:"Total Refund Amount",value:n.total_refund_amount,prefix:"â‚¹",valueStyle:{color:"#52c41a"}}),e.jsx(s,{type:"secondary",style:{fontSize:"12px"},children:"Total amount refunded"})]})})]}),e.jsxs(x,{gutter:16,style:{marginBottom:24},children:[e.jsx(i,{span:12,children:e.jsxs(l,{size:"small",title:"Refund Processing Rate",children:[e.jsx(v,{percent:n.processing_rate,status:"active",strokeColor:{"0%":"#108ee9","100%":"#87d068"}}),e.jsxs(s,{type:"secondary",style:{fontSize:"12px"},children:[n.processed_refunds," of"," ",n.total_refunds," refunds processed"]})]})}),e.jsx(i,{span:12,children:e.jsxs(l,{size:"small",title:"Average Processing Time",children:[e.jsx(c,{title:"Days",value:n.avg_processing_days||0,prefix:e.jsx(g,{}),valueStyle:{color:"#1890ff"}}),e.jsx(s,{type:"secondary",style:{fontSize:"12px"},children:"Average time to process refunds"})]})})]}),e.jsxs(x,{gutter:16,style:{marginBottom:24},children:[e.jsx(i,{span:12,children:e.jsx(l,{size:"small",title:"Monthly Refund Trends",children:e.jsx("div",{style:{height:200,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(s,{type:"secondary",children:"Chart will be implemented here"})})})}),e.jsx(i,{span:12,children:e.jsx(l,{size:"small",title:"Refund Status Distribution",children:e.jsx("div",{style:{height:200,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(s,{type:"secondary",children:"Pie chart will be implemented here"})})})})]}),e.jsx(l,{size:"small",title:"Top Services by Refund Amount",style:{marginBottom:24},children:e.jsx(S,{columns:[{title:"Service",key:"service",render:(r,t)=>e.jsx(s,{strong:!0,children:t.service_name})},{title:"Refund Count",key:"count",render:(r,t)=>e.jsx(s,{children:t.refund_count})},{title:"Total Refund Amount",key:"amount",render:(r,t)=>e.jsx(s,{strong:!0,style:{color:"#52c41a"},children:u(t.total_refund_amount)})},{title:"Percentage",key:"percentage",render:(r,t)=>e.jsx(v,{percent:t.percentage,size:"small",showInfo:!1})}],dataSource:n.top_services||[],pagination:!1,size:"small"})}),e.jsx(l,{size:"small",title:"Recent Refunds",children:e.jsx(S,{columns:A,dataSource:o,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(r,t)=>`${t[0]}-${t[1]} of ${r} refunds`},size:"small"})})]})})]})}export{Re as default};
