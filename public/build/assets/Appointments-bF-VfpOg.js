import{r as _,g as K,j as e,H as J}from"./app-DTC4ZZNb.js";import{A as Q}from"./AdminLayout-BuryYaOs.js";import{d as R}from"./dayjs.min-BU8nU1s4.js";import{I as q,C as k,T as W,B as Y}from"./Logo-DquL4p3I.js";import{S,R as X}from"./CalendarOutlined-CctC6Pcs.js";import{R as ee,C as H}from"./row-lAuwD3g0.js";import{I as te}from"./index-Q8YJAckQ.js";import{R as se}from"./SearchOutlined-DhKWlRV3.js";import{S as G}from"./index-B3fyp_jn.js";import{D as ne}from"./index-8zwikG6u.js";import{F as ie}from"./Table-BZy7mqzN.js";import{M as re}from"./index-DKRzoHiN.js";import{D as j}from"./index-DcotTGri.js";import{D as A}from"./index-DhanCFNt.js";import{B as O}from"./index-B6ybqUVa.js";import{R as oe}from"./CheckCircleOutlined-BlZ6g7Sg.js";import{R as ae}from"./PrinterOutlined-Bc1EopPd.js";import{R as le}from"./UserOutlined-Ci4Uh1xx.js";import{R as ce}from"./MailOutlined-MtZlrJ1k.js";import{R as ue}from"./PhoneOutlined-D_TPZbiS.js";import{R as me}from"./ClockCircleOutlined-GAxWqCxV.js";import{T as de}from"./index-BJYsJc6u.js";import{R as fe}from"./EyeOutlined-C7QEZ7sQ.js";import{D as he}from"./DownloadOutlined-DTidZHln.js";/* empty css            */import"./index-CTF0bDUX.js";import"./PurePanel-CX8wjOmG.js";import"./move-aU7l8_oZ.js";import"./LogoutOutlined-COY5kKcC.js";import"./FileTextOutlined-D7jb8ijU.js";import"./GiftOutlined-DiG3dZeg.js";import"./SettingOutlined-B74LNavU.js";import"./Input-CYUQtUxK.js";import"./pickAttrs-BptzpJpD.js";import"./EyeOutlined-18zZBNre.js";import"./index-BSEZ5EwX.js";import"./addEventListener-Bkx1ib1E.js";import"./index-D4Uhjdph.js";import"./index-iXuJUYyp.js";import"./useForm-DWMJ1im3.js";import"./index-7KB04Oid.js";import"./useClosable-BPoA1z8W.js";import"./CheckCircleFilled-DjYrG16o.js";import"./InfoCircleFilled-BjTCDjnz.js";var pe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM514.1 580.1l-61.8-102.4c-2.2-3.6-6.1-5.8-10.3-5.8h-38.4c-2.3 0-4.5.6-6.4 1.9-5.6 3.5-7.3 10.9-3.7 16.6l82.3 130.4-83.4 132.8a12.04 12.04 0 0010.2 18.4h34.5c4.2 0 8-2.2 10.2-5.7L510 664.8l62.3 101.4c2.2 3.6 6.1 5.7 10.2 5.7H620c2.3 0 4.5-.7 6.5-1.9 5.6-3.6 7.2-11 3.6-16.6l-84-130.4 85.3-132.5a12.04 12.04 0 00-10.1-18.5h-35.7c-4.2 0-8.1 2.2-10.3 5.8l-61.2 102.3z"}}]},name:"file-excel",theme:"outlined"};function N(){return N=Object.assign?Object.assign.bind():function(g){for(var y=1;y<arguments.length;y++){var i=arguments[y];for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&(g[d]=i[d])}return g},N.apply(this,arguments)}const xe=(g,y)=>_.createElement(q,N({},g,{ref:y,icon:he})),je=_.forwardRef(xe);function P(){return P=Object.assign?Object.assign.bind():function(g){for(var y=1;y<arguments.length;y++){var i=arguments[y];for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&(g[d]=i[d])}return g},P.apply(this,arguments)}const ve=(g,y)=>_.createElement(q,P({},g,{ref:y,icon:pe})),ge=_.forwardRef(ve);var B={exports:{}},ye=B.exports,V;function $e(){return V||(V=1,function(g,y){(function(i,d){g.exports=d()})(ye,function(){var i="minute",d=/[+-]\d\d(?::?\d\d)?/g,L=/([+-]|\d\d)/g;return function(M,c,C){var a=c.prototype;C.utc=function(t){var r={date:t,utc:!0,args:arguments};return new c(r)},a.utc=function(t){var r=C(this.toDate(),{locale:this.$L,utc:!0});return t?r.add(this.utcOffset(),i):r},a.local=function(){return C(this.toDate(),{locale:this.$L,utc:!1})};var b=a.parse;a.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),b.call(this,t)};var D=a.init;a.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else D.call(this)};var I=a.utcOffset;a.utcOffset=function(t,r){var h=this.$utils().u;if(h(t))return this.$u?0:h(this.$offset)?I.call(this):this.$offset;if(typeof t=="string"&&(t=function(v){v===void 0&&(v="");var w=v.match(d);if(!w)return null;var z=(""+w[0]).match(L)||["-",0,0],s=z[0],n=60*+z[1]+ +z[2];return n===0?0:s==="+"?n:-n}(t),t===null))return this;var p=Math.abs(t)<=16?60*t:t,u=this;if(r)return u.$offset=p,u.$u=t===0,u;if(t!==0){var $=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(u=this.local().add(p+$,i)).$offset=p,u.$x.$localOffset=$}else u=this.utc();return u};var l=a.format;a.format=function(t){var r=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,r)},a.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var f=a.toDate;a.toDate=function(t){return t==="s"&&this.$offset?C(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():f.call(this)};var o=a.diff;a.diff=function(t,r,h){if(t&&this.$u===t.$u)return o.call(this,t,r,h);var p=this.local(),u=C(t).local();return o.call(p,u,r,h)}}})}(B)),B.exports}var Se=$e();const ze=K(Se);var U={exports:{}},Ce=U.exports,Z;function De(){return Z||(Z=1,function(g,y){(function(i,d){g.exports=d()})(Ce,function(){var i={year:0,month:1,day:2,hour:3,minute:4,second:5},d={};return function(L,M,c){var C,a=function(l,f,o){o===void 0&&(o={});var t=new Date(l),r=function(h,p){p===void 0&&(p={});var u=p.timeZoneName||"short",$=h+"|"+u,v=d[$];return v||(v=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:h,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:u}),d[$]=v),v}(f,o);return r.formatToParts(t)},b=function(l,f){for(var o=a(l,f),t=[],r=0;r<o.length;r+=1){var h=o[r],p=h.type,u=h.value,$=i[p];$>=0&&(t[$]=parseInt(u,10))}var v=t[3],w=v===24?0:v,z=t[0]+"-"+t[1]+"-"+t[2]+" "+w+":"+t[4]+":"+t[5]+":000",s=+l;return(c.utc(z).valueOf()-(s-=s%1e3))/6e4},D=M.prototype;D.tz=function(l,f){l===void 0&&(l=C);var o,t=this.utcOffset(),r=this.toDate(),h=r.toLocaleString("en-US",{timeZone:l}),p=Math.round((r-new Date(h))/1e3/60),u=15*-Math.round(r.getTimezoneOffset()/15)-p;if(!Number(u))o=this.utcOffset(0,f);else if(o=c(h,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(u,!0),f){var $=o.utcOffset();o=o.add(t-$,"minute")}return o.$x.$timezone=l,o},D.offsetName=function(l){var f=this.$x.$timezone||c.tz.guess(),o=a(this.valueOf(),f,{timeZoneName:l}).find(function(t){return t.type.toLowerCase()==="timezonename"});return o&&o.value};var I=D.startOf;D.startOf=function(l,f){if(!this.$x||!this.$x.$timezone)return I.call(this,l,f);var o=c(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return I.call(o,l,f).tz(this.$x.$timezone,!0)},c.tz=function(l,f,o){var t=o&&f,r=o||f||C,h=b(+c(),r);if(typeof l!="string")return c(l).tz(r);var p=function(w,z,s){var n=w-60*z*1e3,x=b(n,s);if(z===x)return[n,z];var F=b(n-=60*(x-z)*1e3,s);return x===F?[n,x]:[w-60*Math.min(x,F)*1e3,Math.max(x,F)]}(c.utc(l,t).valueOf(),h,r),u=p[0],$=p[1],v=c(u).utcOffset($);return v.$x.$timezone=r,v},c.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},c.tz.setDefault=function(l){C=l}}})}(U)),U.exports}var we=De();const _e=K(we);R.extend(ze);R.extend(_e);const{Title:E,Text:m}=W,{Option:T}=G,{Search:be}=te;function gt({auth:g,bookings:y}){const[i,d]=_.useState(null),[L,M]=_.useState(!1),[c,C]=_.useState(""),[a,b]=_.useState("all"),[D,I]=_.useState(null),l=s=>{d(s),M(!0)},f=()=>{M(!1),d(null)},o=s=>{window.open(`/admin/appointments/${s}/pdf`,"_blank")},t=()=>{window.open("/admin/appointments/export-excel","_blank")},r=s=>{switch(s){case"confirmed":return"success";case"pending":return"warning";case"completed":return"processing";case"cancelled":return"error";case"no_show":return"default";default:return"default"}},h=s=>{switch(s){case"paid":return"success";case"pending":return"warning";case"failed":return"error";case"refunded":return"default";default:return"default"}},p=s=>R(s).tz("Asia/Kolkata").format("h:mm A"),u=s=>R(s).tz("Asia/Kolkata").format("MMM DD, YYYY"),$=s=>R(s).tz("Asia/Kolkata").format("MMM DD, YYYY h:mm A"),v=s=>{const n=s.form_field;if(!n)return e.jsxs("div",{style:{marginBottom:8},children:[e.jsxs(m,{strong:!0,style:{fontSize:"12px",color:"#666"},children:["Unknown Field (ID: ",s.form_field_id,"):"]}),e.jsx("br",{}),e.jsx(m,{children:s.response_value||"Not provided"})]},s.id);const x=s.formatted_value||s.response_value;return e.jsxs("div",{style:{marginBottom:8},children:[e.jsxs(m,{strong:!0,style:{fontSize:"12px",color:"#666"},children:[n.label,":"]}),e.jsx("br",{}),e.jsx(m,{children:x||"Not provided"})]},s.id)},w=y.filter(s=>{const n=c===""||s.customer.name.toLowerCase().includes(c.toLowerCase())||s.customer.email.toLowerCase().includes(c.toLowerCase())||s.service.name.toLowerCase().includes(c.toLowerCase())||s.employee.name.toLowerCase().includes(c.toLowerCase()),x=a==="all"||s.status===a,F=!D||R(s.appointment_time).tz("Asia/Kolkata").isSame(D,"day");return n&&x&&F}),z=[{title:"Customer",key:"customer",render:(s,n)=>e.jsxs(S,{direction:"vertical",size:"small",children:[e.jsxs(S,{children:[e.jsx(le,{}),e.jsx(m,{strong:!0,children:n.customer.name})]}),e.jsxs(S,{children:[e.jsx(ce,{}),e.jsx(m,{copyable:!0,style:{fontSize:"12px"},children:n.customer.email})]}),e.jsxs(S,{children:[e.jsx(ue,{}),e.jsx(m,{copyable:!0,style:{fontSize:"12px"},children:n.customer.phone_number})]})]})},{title:"Service & Employee",key:"service",render:(s,n)=>e.jsxs(S,{direction:"vertical",size:"small",children:[e.jsxs("div",{children:[e.jsx(m,{strong:!0,children:n.service.name}),e.jsx("br",{}),e.jsxs(m,{type:"secondary",style:{fontSize:"12px"},children:[n.service.duration," min • ₹",n.service.price]})]}),e.jsx("div",{children:e.jsxs(m,{type:"secondary",style:{fontSize:"12px"},children:["Assigned to: ",n.employee.name,e.jsx(O,{status:n.employee.is_active?"success":"error",text:n.employee.is_active?"Active":"Inactive",style:{marginLeft:4,fontSize:"10px"}})]})})]})},{title:"Appointment",key:"appointment",render:(s,n)=>e.jsxs(S,{direction:"vertical",size:"small",children:[e.jsxs(S,{children:[e.jsx(X,{}),e.jsx(m,{children:u(n.appointment_time)})]}),e.jsxs(S,{children:[e.jsx(me,{}),e.jsx(m,{children:p(n.appointment_time)})]}),e.jsxs(m,{type:"secondary",style:{fontSize:"12px"},children:["Duration: ",n.duration," min"]})]})},{title:"Extras",key:"extras",render:(s,n)=>e.jsx("div",{children:n.extras&&n.extras.length>0?n.extras.map(x=>e.jsxs(de,{color:"blue",style:{marginBottom:4},children:[x.name," (₹",x.pivot.price,")"]},x.id)):e.jsx(m,{type:"secondary",style:{fontSize:"12px"},children:"No extras"})})},{title:"Total & Status",key:"total",render:(s,n)=>e.jsxs(S,{direction:"vertical",size:"small",children:[e.jsxs(S,{children:[e.jsx(m,{strong:!0,style:{color:"#1890ff"},children:"₹"}),e.jsxs(m,{strong:!0,children:["₹",n.total_amount]})]}),e.jsx(S,{children:e.jsx(O,{status:r(n.status),text:n.status_text||n.status})}),e.jsx(S,{children:e.jsx(O,{status:h(n.payment_status),text:n.payment_status_text||n.payment_status})})]})},{title:"Actions",key:"actions",render:(s,n)=>e.jsxs(S,{direction:"vertical",size:"small",children:[e.jsx(Y,{type:"primary",icon:e.jsx(fe,{}),size:"small",onClick:()=>l(n),style:{width:"100%"},children:"View Details"}),e.jsx(Y,{type:"default",icon:e.jsx(je,{}),size:"small",onClick:()=>o(n.id),style:{width:"100%"},children:"Download PDF"})]})}];return e.jsxs(Q,{auth:g,children:[e.jsx(J,{title:"Appointments"}),e.jsxs("div",{style:{padding:"24px"},children:[e.jsxs(k,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[e.jsx(E,{level:2,style:{margin:0},children:"Appointments"}),e.jsxs(S,{children:[e.jsx(Y,{type:"primary",icon:e.jsx(ge,{}),onClick:t,style:{marginRight:8},children:"Export to Excel"}),e.jsxs(m,{type:"secondary",children:["Total: ",w.length," bookings"]})]})]}),e.jsx("div",{style:{marginBottom:16},children:e.jsxs(ee,{gutter:16,children:[e.jsx(H,{span:8,children:e.jsx(be,{placeholder:"Search by customer, service, or employee",allowClear:!0,value:c,onChange:s=>C(s.target.value),prefix:e.jsx(se,{})})}),e.jsx(H,{span:4,children:e.jsxs(G,{placeholder:"Status",value:a,onChange:b,style:{width:"100%"},children:[e.jsx(T,{value:"all",children:"All Status"}),e.jsx(T,{value:"pending",children:"Pending"}),e.jsx(T,{value:"confirmed",children:"Confirmed"}),e.jsx(T,{value:"completed",children:"Completed"}),e.jsx(T,{value:"cancelled",children:"Cancelled"}),e.jsx(T,{value:"no_show",children:"No Show"})]})}),e.jsx(H,{span:4,children:e.jsx(ne,{placeholder:"Filter by date",value:D,onChange:I,style:{width:"100%"},allowClear:!0})})]})}),e.jsx(ie,{columns:z,dataSource:w,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(s,n)=>`${n[0]}-${n[1]} of ${s} appointments`}})]}),e.jsx(re,{title:"Booking Details",open:L,onCancel:f,footer:[e.jsx(Y,{icon:e.jsx(ae,{}),onClick:()=>o(i.id),children:"Print PDF"},"print"),e.jsx(Y,{onClick:f,children:"Close"},"close")],width:800,children:i&&e.jsxs("div",{children:[e.jsxs(j,{title:"Customer Information",bordered:!0,size:"small",children:[e.jsx(j.Item,{label:"Name",span:2,children:i.customer.name}),e.jsx(j.Item,{label:"Email",span:2,children:i.customer.email}),e.jsx(j.Item,{label:"Phone",span:2,children:i.customer.phone_number})]}),e.jsx(A,{}),e.jsxs(j,{title:"Booking Information",bordered:!0,size:"small",children:[e.jsx(j.Item,{label:"Service",children:i.service.name}),e.jsxs(j.Item,{label:"Employee",children:[i.employee.name,e.jsx(O,{status:i.employee.is_active?"success":"error",text:i.employee.is_active?"Active":"Inactive",style:{marginLeft:8}})]}),e.jsx(j.Item,{label:"Date & Time",children:$(i.appointment_time)}),e.jsxs(j.Item,{label:"Duration",children:[i.duration," minutes"]}),e.jsx(j.Item,{label:"Status",children:e.jsx(O,{status:r(i.status),text:i.status_text||i.status})}),e.jsx(j.Item,{label:"Payment Status",children:e.jsx(O,{status:h(i.payment_status),text:i.payment_status_text||i.payment_status})}),e.jsx(j.Item,{label:"Total Amount",span:2,children:e.jsxs(m,{strong:!0,style:{fontSize:"16px"},children:["₹",i.total_amount]})})]}),e.jsx(A,{}),i.extras&&i.extras.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(j,{title:"Selected Extras",bordered:!0,size:"small",children:i.extras.map(s=>e.jsxs(j.Item,{label:s.name,children:["₹",s.pivot.price]},s.id))}),e.jsx(A,{})]}),(()=>{const s=i.form_responses;if(s&&s.length>0){const n=s.filter(x=>x.form_field&&!x.form_field.is_primary);return n.length>0?e.jsxs("div",{children:[e.jsx(E,{level:4,children:"Custom Field Responses"}),e.jsx(k,{size:"small",children:n.map(v)})]}):e.jsxs("div",{children:[e.jsx(E,{level:4,children:"Custom Field Responses"}),e.jsx(k,{size:"small",children:e.jsx(m,{type:"secondary",children:"No custom field responses found."})})]})}else return e.jsxs("div",{children:[e.jsx(E,{level:4,children:"Custom Field Responses"}),e.jsx(k,{size:"small",children:e.jsx(m,{type:"secondary",children:"No form responses found."})})]})})(),i.consent_given&&e.jsxs(e.Fragment,{children:[e.jsx(A,{}),e.jsxs(j,{title:"Consent Information",bordered:!0,size:"small",children:[e.jsxs(j.Item,{label:"Consent Given",children:[e.jsx(oe,{style:{color:"green"}})," ","Yes"]}),e.jsx(j.Item,{label:"Consent Date",children:i.consent_given_at?$(i.consent_given_at):"Not recorded"})]})]})]})})]})]})}export{gt as default};
