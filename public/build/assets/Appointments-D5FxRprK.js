import{r as w,g as G,j as e,H as Q}from"./app-E_GzTHcR.js";import{A as W}from"./AdminLayout-B4HydZB4.js";import{d as R}from"./dayjs.min-BzUltZyp.js";import{I as Z,C as L,T as X,B as H,R as ee}from"./Logo-BbcbfkWA.js";import{S as z}from"./index-CWpG7BDC.js";import{R as te,C as P}from"./row-4H0Py2rk.js";import{I as se}from"./index-BOIEjZHi.js";import{R as ne}from"./SearchOutlined-CjWcO1oq.js";import{S as J}from"./index-DqxIH3jR.js";import{D as re}from"./index-C8OsBGy2.js";import{F as ie}from"./Table-Cf1KPsvz.js";import{M as oe}from"./index-BSWAiRqP.js";import{D as g}from"./index-DeP3pwg8.js";import{D as E}from"./index-3ErC97rj.js";import{B as I}from"./index-DjomRsrE.js";import{R as ae}from"./CheckCircleOutlined-BK_reQDx.js";import{R as le}from"./MailOutlined-DxmpITil.js";import{R as ce}from"./PhoneOutlined-BJX0PCy4.js";import{R as ue}from"./CalendarOutlined-hgDl-fOt.js";import{R as me}from"./ClockCircleOutlined-D2Mtn5GK.js";import{T as de}from"./index-8N9xm0_b.js";import{R as fe}from"./EyeOutlined-DZkyu-L6.js";import{D as he}from"./DownloadOutlined-DTidZHln.js";/* empty css            */import"./index-CLOEon8J.js";import"./PurePanel-NJYruu6J.js";import"./move-DpafgnZ7.js";import"./useBreakpoint-DjHX8iz2.js";import"./PlusOutlined-BmvMwvsV.js";import"./FileTextOutlined-DTdyI3lP.js";import"./GiftOutlined-KXFvqSdY.js";import"./Input-BX_YMmel.js";import"./pickAttrs-CqSWOBdG.js";import"./EyeOutlined-CpIDIVme.js";import"./index-DA4OSIrD.js";import"./addEventListener-alwkT2hk.js";import"./index-BAWbmzvS.js";import"./index-WKCeMEIL.js";import"./useForm-B_gBvqKQ.js";import"./index-BYBA1TCE.js";import"./CheckCircleFilled-EwXFzcgk.js";import"./ExclamationCircleFilled-DCutK3mT.js";import"./InfoCircleFilled-BTOv_ZvZ.js";var pe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM514.1 580.1l-61.8-102.4c-2.2-3.6-6.1-5.8-10.3-5.8h-38.4c-2.3 0-4.5.6-6.4 1.9-5.6 3.5-7.3 10.9-3.7 16.6l82.3 130.4-83.4 132.8a12.04 12.04 0 0010.2 18.4h34.5c4.2 0 8-2.2 10.2-5.7L510 664.8l62.3 101.4c2.2 3.6 6.1 5.7 10.2 5.7H620c2.3 0 4.5-.7 6.5-1.9 5.6-3.6 7.2-11 3.6-16.6l-84-130.4 85.3-132.5a12.04 12.04 0 00-10.1-18.5h-35.7c-4.2 0-8.1 2.2-10.3 5.8l-61.2 102.3z"}}]},name:"file-excel",theme:"outlined"},xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M820 436h-40c-4.4 0-8 3.6-8 8v40c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-40c0-4.4-3.6-8-8-8zm32-104H732V120c0-4.4-3.6-8-8-8H300c-4.4 0-8 3.6-8 8v212H172c-44.2 0-80 35.8-80 80v328c0 17.7 14.3 32 32 32h168v132c0 4.4 3.6 8 8 8h424c4.4 0 8-3.6 8-8V772h168c17.7 0 32-14.3 32-32V412c0-44.2-35.8-80-80-80zM360 180h304v152H360V180zm304 664H360V568h304v276zm200-140H732V500H292v204H160V412c0-6.6 5.4-12 12-12h680c6.6 0 12 5.4 12 12v292z"}}]},name:"printer",theme:"outlined"};function U(){return U=Object.assign?Object.assign.bind():function(f){for(var u=1;u<arguments.length;u++){var r=arguments[u];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(f[c]=r[c])}return f},U.apply(this,arguments)}const ve=(f,u)=>w.createElement(Z,U({},f,{ref:u,icon:he})),je=w.forwardRef(ve);function V(){return V=Object.assign?Object.assign.bind():function(f){for(var u=1;u<arguments.length;u++){var r=arguments[u];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(f[c]=r[c])}return f},V.apply(this,arguments)}const ge=(f,u)=>w.createElement(Z,V({},f,{ref:u,icon:pe})),ye=w.forwardRef(ge);function N(){return N=Object.assign?Object.assign.bind():function(f){for(var u=1;u<arguments.length;u++){var r=arguments[u];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(f[c]=r[c])}return f},N.apply(this,arguments)}const $e=(f,u)=>w.createElement(Z,N({},f,{ref:u,icon:xe})),ze=w.forwardRef($e);var B={exports:{}},Se=B.exports,K;function Ce(){return K||(K=1,function(f,u){(function(r,c){f.exports=c()})(Se,function(){var r="minute",c=/[+-]\d\d(?::?\d\d)?/g,Y=/([+-]|\d\d)/g;return function(M,m,C){var a=m.prototype;C.utc=function(t){var i={date:t,utc:!0,args:arguments};return new m(i)},a.utc=function(t){var i=C(this.toDate(),{locale:this.$L,utc:!0});return t?i.add(this.utcOffset(),r):i},a.local=function(){return C(this.toDate(),{locale:this.$L,utc:!1})};var b=a.parse;a.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),b.call(this,t)};var D=a.init;a.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else D.call(this)};var O=a.utcOffset;a.utcOffset=function(t,i){var x=this.$utils().u;if(x(t))return this.$u?0:x(this.$offset)?O.call(this):this.$offset;if(typeof t=="string"&&(t=function(y){y===void 0&&(y="");var _=y.match(c);if(!_)return null;var S=(""+_[0]).match(Y)||["-",0,0],s=S[0],n=60*+S[1]+ +S[2];return n===0?0:s==="+"?n:-n}(t),t===null))return this;var v=Math.abs(t)<=16?60*t:t,d=this;if(i)return d.$offset=v,d.$u=t===0,d;if(t!==0){var $=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(d=this.local().add(v+$,r)).$offset=v,d.$x.$localOffset=$}else d=this.utc();return d};var l=a.format;a.format=function(t){var i=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,i)},a.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var p=a.toDate;a.toDate=function(t){return t==="s"&&this.$offset?C(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():p.call(this)};var o=a.diff;a.diff=function(t,i,x){if(t&&this.$u===t.$u)return o.call(this,t,i,x);var v=this.local(),d=C(t).local();return o.call(v,d,i,x)}}})}(B)),B.exports}var we=Ce();const De=G(we);var k={exports:{}},_e=k.exports,q;function be(){return q||(q=1,function(f,u){(function(r,c){f.exports=c()})(_e,function(){var r={year:0,month:1,day:2,hour:3,minute:4,second:5},c={};return function(Y,M,m){var C,a=function(l,p,o){o===void 0&&(o={});var t=new Date(l),i=function(x,v){v===void 0&&(v={});var d=v.timeZoneName||"short",$=x+"|"+d,y=c[$];return y||(y=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:x,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:d}),c[$]=y),y}(p,o);return i.formatToParts(t)},b=function(l,p){for(var o=a(l,p),t=[],i=0;i<o.length;i+=1){var x=o[i],v=x.type,d=x.value,$=r[v];$>=0&&(t[$]=parseInt(d,10))}var y=t[3],_=y===24?0:y,S=t[0]+"-"+t[1]+"-"+t[2]+" "+_+":"+t[4]+":"+t[5]+":000",s=+l;return(m.utc(S).valueOf()-(s-=s%1e3))/6e4},D=M.prototype;D.tz=function(l,p){l===void 0&&(l=C);var o,t=this.utcOffset(),i=this.toDate(),x=i.toLocaleString("en-US",{timeZone:l}),v=Math.round((i-new Date(x))/1e3/60),d=15*-Math.round(i.getTimezoneOffset()/15)-v;if(!Number(d))o=this.utcOffset(0,p);else if(o=m(x,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(d,!0),p){var $=o.utcOffset();o=o.add(t-$,"minute")}return o.$x.$timezone=l,o},D.offsetName=function(l){var p=this.$x.$timezone||m.tz.guess(),o=a(this.valueOf(),p,{timeZoneName:l}).find(function(t){return t.type.toLowerCase()==="timezonename"});return o&&o.value};var O=D.startOf;D.startOf=function(l,p){if(!this.$x||!this.$x.$timezone)return O.call(this,l,p);var o=m(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return O.call(o,l,p).tz(this.$x.$timezone,!0)},m.tz=function(l,p,o){var t=o&&p,i=o||p||C,x=b(+m(),i);if(typeof l!="string")return m(l).tz(i);var v=function(_,S,s){var n=_-60*S*1e3,j=b(n,s);if(S===j)return[n,S];var F=b(n-=60*(j-S)*1e3,s);return j===F?[n,j]:[_-60*Math.min(j,F)*1e3,Math.max(j,F)]}(m.utc(l,t).valueOf(),x,i),d=v[0],$=v[1],y=m(d).utcOffset($);return y.$x.$timezone=i,y},m.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},m.tz.setDefault=function(l){C=l}}})}(k)),k.exports}var Oe=be();const Ie=G(Oe);R.extend(De);R.extend(Ie);const{Title:A,Text:h}=X,{Option:T}=J,{Search:Te}=se;function $t({auth:f,bookings:u}){const[r,c]=w.useState(null),[Y,M]=w.useState(!1),[m,C]=w.useState(""),[a,b]=w.useState("all"),[D,O]=w.useState(null),l=s=>{c(s),M(!0)},p=()=>{M(!1),c(null)},o=s=>{window.open(`/admin/appointments/${s}/pdf`,"_blank")},t=()=>{window.open("/admin/appointments/export-excel","_blank")},i=s=>{switch(s){case"confirmed":return"success";case"pending":return"warning";case"completed":return"processing";case"cancelled":return"error";case"no_show":return"default";default:return"default"}},x=s=>{switch(s){case"paid":return"success";case"pending":return"warning";case"failed":return"error";case"refunded":return"default";default:return"default"}},v=s=>R(s).tz("Asia/Kolkata").format("h:mm A"),d=s=>R(s).tz("Asia/Kolkata").format("MMM DD, YYYY"),$=s=>R(s).tz("Asia/Kolkata").format("MMM DD, YYYY h:mm A"),y=s=>{const n=s.form_field;if(!n)return e.jsxs("div",{style:{marginBottom:8},children:[e.jsxs(h,{strong:!0,style:{fontSize:"12px",color:"#666"},children:["Unknown Field (ID: ",s.form_field_id,"):"]}),e.jsx("br",{}),e.jsx(h,{children:s.response_value||"Not provided"})]},s.id);const j=s.formatted_value||s.response_value;return e.jsxs("div",{style:{marginBottom:8},children:[e.jsxs(h,{strong:!0,style:{fontSize:"12px",color:"#666"},children:[n.label,":"]}),e.jsx("br",{}),e.jsx(h,{children:j||"Not provided"})]},s.id)},_=u.filter(s=>{const n=m===""||s.customer.name.toLowerCase().includes(m.toLowerCase())||s.customer.email.toLowerCase().includes(m.toLowerCase())||s.service.name.toLowerCase().includes(m.toLowerCase())||s.employee.name.toLowerCase().includes(m.toLowerCase()),j=a==="all"||s.status===a,F=!D||R(s.appointment_time).tz("Asia/Kolkata").isSame(D,"day");return n&&j&&F}),S=[{title:"Customer",key:"customer",render:(s,n)=>e.jsxs(z,{direction:"vertical",size:"small",children:[e.jsxs(z,{children:[e.jsx(ee,{}),e.jsx(h,{strong:!0,children:n.customer.name})]}),e.jsxs(z,{children:[e.jsx(le,{}),e.jsx(h,{copyable:!0,style:{fontSize:"12px"},children:n.customer.email})]}),e.jsxs(z,{children:[e.jsx(ce,{}),e.jsx(h,{copyable:!0,style:{fontSize:"12px"},children:n.customer.phone_number})]})]})},{title:"Service & Employee",key:"service",render:(s,n)=>e.jsxs(z,{direction:"vertical",size:"small",children:[e.jsxs("div",{children:[e.jsx(h,{strong:!0,children:n.service.name}),e.jsx("br",{}),e.jsxs(h,{type:"secondary",style:{fontSize:"12px"},children:[n.service.duration," min • ₹",n.service.price]})]}),e.jsx("div",{children:e.jsxs(h,{type:"secondary",style:{fontSize:"12px"},children:["Assigned to: ",n.employee.name,e.jsx(I,{status:n.employee.is_active?"success":"error",text:n.employee.is_active?"Active":"Inactive",style:{marginLeft:4,fontSize:"10px"}})]})})]})},{title:"Appointment",key:"appointment",render:(s,n)=>e.jsxs(z,{direction:"vertical",size:"small",children:[e.jsxs(z,{children:[e.jsx(ue,{}),e.jsx(h,{children:d(n.appointment_time)})]}),e.jsxs(z,{children:[e.jsx(me,{}),e.jsx(h,{children:v(n.appointment_time)})]}),e.jsxs(h,{type:"secondary",style:{fontSize:"12px"},children:["Duration: ",n.duration," min"]})]})},{title:"Extras",key:"extras",render:(s,n)=>e.jsx("div",{children:n.extras&&n.extras.length>0?n.extras.map(j=>e.jsxs(de,{color:"blue",style:{marginBottom:4},children:[j.name," (₹",j.pivot.price,")"]},j.id)):e.jsx(h,{type:"secondary",style:{fontSize:"12px"},children:"No extras"})})},{title:"Total & Status",key:"total",render:(s,n)=>e.jsxs(z,{direction:"vertical",size:"small",children:[e.jsxs(z,{children:[e.jsx(h,{strong:!0,style:{color:"#1890ff"},children:"₹"}),e.jsxs(h,{strong:!0,children:["₹",n.total_amount]})]}),e.jsx(z,{children:e.jsx(I,{status:i(n.status),text:n.status_text||n.status})}),e.jsx(z,{children:e.jsx(I,{status:x(n.payment_status),text:n.payment_status_text||n.payment_status})})]})},{title:"Actions",key:"actions",render:(s,n)=>e.jsxs(z,{direction:"vertical",size:"small",children:[e.jsx(H,{type:"primary",icon:e.jsx(fe,{}),size:"small",onClick:()=>l(n),style:{width:"100%"},children:"View Details"}),e.jsx(H,{type:"default",icon:e.jsx(je,{}),size:"small",onClick:()=>o(n.id),style:{width:"100%"},children:"Download PDF"})]})}];return e.jsxs(W,{auth:f,children:[e.jsx(Q,{title:"Appointments"}),e.jsxs("div",{style:{padding:"24px"},children:[e.jsxs(L,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[e.jsx(A,{level:2,style:{margin:0},children:"Appointments"}),e.jsxs(z,{children:[e.jsx(H,{type:"primary",icon:e.jsx(ye,{}),onClick:t,style:{marginRight:8},children:"Export to Excel"}),e.jsxs(h,{type:"secondary",children:["Total: ",_.length," bookings"]})]})]}),e.jsx("div",{style:{marginBottom:16},children:e.jsxs(te,{gutter:16,children:[e.jsx(P,{span:8,children:e.jsx(Te,{placeholder:"Search by customer, service, or employee",allowClear:!0,value:m,onChange:s=>C(s.target.value),prefix:e.jsx(ne,{})})}),e.jsx(P,{span:4,children:e.jsxs(J,{placeholder:"Status",value:a,onChange:b,style:{width:"100%"},children:[e.jsx(T,{value:"all",children:"All Status"}),e.jsx(T,{value:"pending",children:"Pending"}),e.jsx(T,{value:"confirmed",children:"Confirmed"}),e.jsx(T,{value:"completed",children:"Completed"}),e.jsx(T,{value:"cancelled",children:"Cancelled"}),e.jsx(T,{value:"no_show",children:"No Show"})]})}),e.jsx(P,{span:4,children:e.jsx(re,{placeholder:"Filter by date",value:D,onChange:O,style:{width:"100%"},allowClear:!0})})]})}),e.jsx(ie,{columns:S,dataSource:_,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(s,n)=>`${n[0]}-${n[1]} of ${s} appointments`}})]}),e.jsx(oe,{title:"Booking Details",open:Y,onCancel:p,footer:[e.jsx(H,{icon:e.jsx(ze,{}),onClick:()=>o(r.id),children:"Print PDF"},"print"),e.jsx(H,{onClick:p,children:"Close"},"close")],width:800,children:r&&e.jsxs("div",{children:[e.jsxs(g,{title:"Customer Information",bordered:!0,size:"small",children:[e.jsx(g.Item,{label:"Name",span:2,children:r.customer.name}),e.jsx(g.Item,{label:"Email",span:2,children:r.customer.email}),e.jsx(g.Item,{label:"Phone",span:2,children:r.customer.phone_number})]}),e.jsx(E,{}),e.jsxs(g,{title:"Booking Information",bordered:!0,size:"small",children:[e.jsx(g.Item,{label:"Service",children:r.service.name}),e.jsxs(g.Item,{label:"Employee",children:[r.employee.name,e.jsx(I,{status:r.employee.is_active?"success":"error",text:r.employee.is_active?"Active":"Inactive",style:{marginLeft:8}})]}),e.jsx(g.Item,{label:"Date & Time",children:$(r.appointment_time)}),e.jsxs(g.Item,{label:"Duration",children:[r.duration," minutes"]}),e.jsx(g.Item,{label:"Status",children:e.jsx(I,{status:i(r.status),text:r.status_text||r.status})}),e.jsx(g.Item,{label:"Payment Status",children:e.jsx(I,{status:x(r.payment_status),text:r.payment_status_text||r.payment_status})}),e.jsx(g.Item,{label:"Total Amount",span:2,children:e.jsxs(h,{strong:!0,style:{fontSize:"16px"},children:["₹",r.total_amount]})})]}),e.jsx(E,{}),r.extras&&r.extras.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(g,{title:"Selected Extras",bordered:!0,size:"small",children:r.extras.map(s=>e.jsxs(g.Item,{label:s.name,children:["₹",s.pivot.price]},s.id))}),e.jsx(E,{})]}),(()=>{const s=r.form_responses;if(s&&s.length>0){const n=s.filter(j=>j.form_field&&!j.form_field.is_primary);return n.length>0?e.jsxs("div",{children:[e.jsx(A,{level:4,children:"Custom Field Responses"}),e.jsx(L,{size:"small",children:n.map(y)})]}):e.jsxs("div",{children:[e.jsx(A,{level:4,children:"Custom Field Responses"}),e.jsx(L,{size:"small",children:e.jsx(h,{type:"secondary",children:"No custom field responses found."})})]})}else return e.jsxs("div",{children:[e.jsx(A,{level:4,children:"Custom Field Responses"}),e.jsx(L,{size:"small",children:e.jsx(h,{type:"secondary",children:"No form responses found."})})]})})(),r.consent_given&&e.jsxs(e.Fragment,{children:[e.jsx(E,{}),e.jsxs(g,{title:"Consent Information",bordered:!0,size:"small",children:[e.jsxs(g.Item,{label:"Consent Given",children:[e.jsx(ae,{style:{color:"green"}})," ","Yes"]}),e.jsx(g.Item,{label:"Consent Date",children:r.consent_given_at?$(r.consent_given_at):"Not recorded"})]})]})]})})]})]})}export{$t as default};
