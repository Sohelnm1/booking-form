import{r as y,j as e,a as n,H as S}from"./app-CyO9hQBl.js";import{B as A}from"./BookingHeader-CXxrOP8R.js";import{C as I}from"./CancelModal-B6h7RN-S.js";import{d as T}from"./dayjs.min-CknKAdni.js";import{T as z,B as i,C as j,S as f}from"./Logo-vDE4cu1D.js";import{R as D}from"./ArrowLeftOutlined-CoqvkC79.js";import{F}from"./Table-BSnvX2nY.js";import{T as a}from"./index-BvBnV10I.js";import{E as M}from"./index-BR3zVGOi.js";import{s as $}from"./index-B_EhpOEw.js";/* empty css            */import"./index-2Wx4bPSm.js";import"./CheckCircleFilled-DrP6onLE.js";import"./InfoCircleFilled-C2Q65B8L.js";import"./useClosable-KyV13deG.js";import"./extendsObject-78o_rR5W.js";import"./PhoneOutlined-CqqsDgvf.js";import"./index-DhKUUB0b.js";import"./Input-DLMvYe2p.js";import"./EyeOutlined-BExS6pSI.js";import"./EyeOutlined-Bmd706kk.js";import"./index-CLZMktRm.js";import"./index-CzaIFbdi.js";import"./useForm-CCwiYDhv.js";import"./row-DwQxoJlO.js";import"./index-Ceui-BeB.js";import"./index-CEc0dHYI.js";import"./ExclamationCircleOutlined-B4XK2Hg6.js";import"./index-BbtOOlVx.js";import"./addEventListener-B9GT9aWJ.js";import"./index-CDx9irFd.js";import"./move-YbuDiLDb.js";import"./DownOutlined-DitUQ9vw.js";import"./index-Czlp5Mlf.js";import"./index-DpJfNRO_.js";import"./Pagination-1ml-3kzj.js";const{Title:g,Text:r}=z;function je({auth:l,bookings:o}){const[v,c]=y.useState(!1),[C,d]=y.useState(null);if(!l||!l.user)return e.jsxs("div",{style:{padding:"24px",textAlign:"center"},children:[e.jsx(g,{level:2,children:"Access Denied"}),e.jsx(r,{children:"Please log in to view your bookings."}),e.jsx("br",{}),e.jsx(i,{type:"primary",onClick:()=>n.visit(route("welcome")),style:{marginTop:16},children:"Go to Home"})]});const m=t=>{switch(t){case"confirmed":return"success";case"pending":return"warning";case"completed":return"processing";case"cancelled":return"error";case"no_show":return"default";default:return"default"}},p=t=>{switch(t){case"paid":return"success";case"pending":return"warning";case"failed":return"error";case"refunded":return"default";default:return"default"}},u=t=>T(t).format("MMM DD, YYYY h:mm A"),x=t=>{if(t<60)return`${t} min`;{const s=Math.floor(t/60),h=t%60;return h>0?`${s}h ${h}m`:`${s}h`}},w=t=>{d(t),c(!0)},_=t=>{c(!1),d(null),$.success("Booking cancelled successfully"),window.location.reload()},B=()=>{c(!1),d(null)},k=[{title:"Service",dataIndex:"service",key:"service",render:t=>t?.name||"N/A",responsive:["md"]},{title:"Employee",dataIndex:"employee",key:"employee",render:t=>t?.name||"Auto-assigned",responsive:["lg"]},{title:"Date & Time",dataIndex:"appointment_time",key:"appointment_time",render:t=>u(t)},{title:"Duration",dataIndex:"duration",key:"duration",render:t=>x(t),responsive:["md"]},{title:"Status",dataIndex:"status",key:"status",render:t=>e.jsx(a,{color:m(t),children:t.charAt(0).toUpperCase()+t.slice(1)})},{title:"Payment",dataIndex:"payment_status",key:"payment_status",render:t=>e.jsx(a,{color:p(t),children:t.charAt(0).toUpperCase()+t.slice(1)}),responsive:["md"]},{title:"Amount",dataIndex:"total_amount",key:"total_amount",render:t=>`₹${parseFloat(t).toFixed(2)}`,responsive:["sm"]},{title:"Reschedule",key:"reschedule",render:(t,s)=>e.jsx("div",{children:s.reschedule_attempts>0?e.jsxs(f,{direction:"vertical",size:"small",children:[e.jsxs(r,{type:"secondary",style:{fontSize:"12px"},children:[s.reschedule_attempts," time(s)"]}),s.reschedule_payment_amount>0&&e.jsxs(r,{type:"secondary",style:{fontSize:"12px",color:"#52c41a"},children:["Fee: ₹",s.reschedule_payment_amount]})]}):e.jsx(r,{type:"secondary",style:{fontSize:"12px"},children:"Never"})}),responsive:["md"]},{title:"Actions",key:"actions",render:(t,s)=>e.jsxs(f,{children:[e.jsx(i,{size:"small",onClick:()=>n.visit(route("customer.bookings.show",s.id)),children:"View"}),(s.status==="pending"||s.status==="confirmed")&&e.jsx(i,{size:"small",danger:!0,onClick:()=>w(s),children:"Cancel"})]})}];return e.jsxs("div",{children:[e.jsx(S,{title:"Your Bookings - HospiPal"}),e.jsx(A,{auth:l}),e.jsxs("div",{style:{maxWidth:1200,margin:"0 auto",padding:"24px"},children:[e.jsx("div",{className:"mobile-top-spacing"}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsx(i,{icon:e.jsx(D,{}),onClick:()=>n.visit(route("welcome")),style:{marginBottom:16},children:"Back to Home"}),e.jsx(g,{level:2,style:{marginBottom:8},children:"Your Bookings"}),e.jsx(r,{type:"secondary",children:"View and manage all your appointments"})]}),e.jsx(j,{children:o&&o.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden-xs",children:e.jsx(F,{columns:k,dataSource:o,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(t,s)=>`${s[0]}-${s[1]} of ${t} bookings`}})}),e.jsx("div",{className:"visible-xs",children:o.map(t=>e.jsx(j,{style:{marginBottom:16},styles:{body:{padding:16}},children:e.jsxs("div",{style:{marginBottom:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:8},children:[e.jsxs("div",{children:[e.jsx(r,{strong:!0,children:t.service?.name}),e.jsx("br",{}),e.jsx(r,{type:"secondary",children:u(t.appointment_time)})]}),e.jsx(a,{color:m(t.status),children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[e.jsxs("div",{children:[e.jsxs(r,{type:"secondary",children:["Duration:"," "]}),e.jsx(r,{children:x(t.duration)})]}),e.jsxs("div",{children:[e.jsxs(r,{type:"secondary",children:["Amount:"," "]}),e.jsxs(r,{strong:!0,children:["₹",parseFloat(t.total_amount).toFixed(2)]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(a,{color:p(t.payment_status),children:t.payment_status.charAt(0).toUpperCase()+t.payment_status.slice(1)}),e.jsx(i,{size:"small",type:"primary",onClick:()=>n.visit(route("customer.bookings.show",t.id)),children:"View Details"})]})]})},t.id))})]}):e.jsx(M,{description:"No bookings found",style:{padding:"40px 0"},children:e.jsx(i,{type:"primary",onClick:()=>n.visit(route("booking.select-service")),children:"Book Your First Appointment"})})}),e.jsx(I,{visible:v,onCancel:B,onSuccess:_,booking:C})]})]})}export{je as default};
