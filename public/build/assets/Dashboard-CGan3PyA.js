import{r as o,j as e,H,a as f}from"./app-9CPhuQ4N.js";import{ac as B,ad as $,ae as V,B as l,T as U,C as v}from"./Logo-DkqekcuB.js";import{S as O,R as S}from"./CalendarOutlined-BwNhaYMx.js";import{A as Y,R as _}from"./LogoutOutlined-zRISOHo0.js";import{s as i}from"./index-9Xzw0frF.js";import{R as q,C as k}from"./row-DZntwU3-.js";import{R as D,a as J}from"./SafetyCertificateOutlined-pHFwThCC.js";import{M as K}from"./index-CBZmK9eV.js";import{A as X}from"./index-D-6iokib.js";import{I as T}from"./index-O0Iyg6lZ.js";import{R as G}from"./PhoneOutlined-C_oJSXj1.js";import{R as Q}from"./SendOutlined-1dyFCUYg.js";import{R as Z}from"./BookOutlined-D8Ddjkqr.js";/* empty css            */import"./CheckCircleFilled-BMzJfPTH.js";import"./InfoCircleFilled-DTUShVZ5.js";import"./pickAttrs-BDzNXXMc.js";import"./useClosable-BADc7cF3.js";import"./PurePanel-D7NzHduM.js";import"./Input-BsHZSzM4.js";import"./EyeOutlined-BwF00DAq.js";const{Title:m,Paragraph:g,Text:w}=U,{Header:ee,Content:te}=B;function ke({auth:a}){const[P,u]=o.useState(!1),[s,x]=o.useState(""),[r,y]=o.useState(""),[j,b]=o.useState(!1),[d,c]=o.useState(!1),[C,L]=o.useState(""),[h,z]=o.useState(!1),[p,I]=o.useState(null);o.useEffect(()=>{a&&a.user&&(z(!0),I(a.user))},[a]);const A=()=>{f.visit(route("booking.select-service"))},R=()=>{u(!0)},W=async()=>{if(!s||s.length<10){i.error("Please enter a valid phone number");return}try{c(!0);const t=await fetch(route("booking.send-otp"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({phone_number:s})}),n=await t.json();t.ok?(i.success("OTP sent successfully to your phone number"),b(!0),n.otp&&L(n.otp)):i.error(n.error||"Failed to send OTP")}catch(t){console.error("Error sending OTP:",t),i.error("Failed to send OTP")}finally{c(!1)}},E=async()=>{if(!r||r.length!==6){i.error("Please enter a valid 6-digit OTP");return}try{c(!0);const t=await fetch(route("customer.login"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({phone_number:s,otp:r})}),n=await t.json();t.ok?(i.success("Login successful!"),z(!0),I(n.user),u(!1),b(!1),y(""),x(""),window.location.reload()):i.error(n.error||"Invalid OTP")}catch(t){console.error("Error verifying OTP:",t),i.error("Failed to verify OTP")}finally{c(!1)}},N=()=>{f.post(route("logout"),{},{onSuccess:()=>{window.location.reload()}})},M=t=>t?t.split(" ").map(n=>n[0]).join("").toUpperCase().slice(0,2):"CU",F=[{key:"services",icon:e.jsx(Z,{}),label:"Services",onClick:()=>f.visit(route("welcome"))},...h&&p?[{key:"bookings",icon:e.jsx(S,{}),label:"Your Bookings",onClick:()=>f.visit(route("customer.bookings"))}]:[]];return e.jsxs(B,{style:{minHeight:"100vh"},children:[e.jsx(H,{title:"HospiPal - Customer Dashboard"}),e.jsxs(ee,{style:{background:"#fff",padding:"0 16px",display:"flex",alignItems:"center",justifyContent:"space-between",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",height:"auto",minHeight:64,maxWidth:"100vw",width:"100%",overflow:"hidden"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",flexShrink:0,minWidth:0},children:e.jsx($,{variant:"primary",color:"color",background:"white",size:"medium"})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flex:1,justifyContent:"flex-end",minWidth:0,overflow:"hidden"},children:[e.jsx(V,{mode:"horizontal",items:F,style:{border:"none",background:"transparent",fontSize:"14px",minWidth:0,flexShrink:1,maxWidth:"100%"}}),h&&p?e.jsxs(O,{size:"small",style:{flexShrink:0},children:[e.jsx(Y,{style:{backgroundColor:"#1890ff",cursor:"pointer"},onClick:()=>i.info("Profile settings coming soon"),children:M(p?.name)}),e.jsx(l,{type:"text",icon:e.jsx(_,{}),onClick:N,size:"small",children:e.jsx("span",{className:"hidden-xs",children:"Logout"})})]}):e.jsxs(l,{type:"primary",onClick:R,size:"small",children:[e.jsx("span",{className:"hidden-xs",children:"Sign In"}),e.jsx("span",{className:"visible-xs",children:"Login"})]})]})]}),e.jsx(te,{style:{padding:"16px"},children:e.jsxs("div",{style:{maxWidth:1200,margin:"0 auto"},children:[e.jsx("div",{className:"mobile-top-spacing"}),e.jsxs("div",{style:{background:"linear-gradient(135deg, #f0f8ff 0%, #e6f7ff 100%)",padding:"32px 16px",borderRadius:"16px",textAlign:"center",marginBottom:32},children:[e.jsx(m,{level:1,style:{marginBottom:24,color:"#1f1f1f"},children:"Welcome to HospiPal"}),e.jsx(g,{style:{fontSize:18,color:"#666",maxWidth:600,margin:"0 auto 32px auto"},children:"Experience seamless booking with our modern, user-friendly platform. Find and reserve your perfect spot with just a few clicks."}),e.jsxs(O,{size:"large",direction:"vertical",style:{width:"100%"},children:[e.jsx(l,{type:"primary",size:"large",icon:e.jsx(S,{}),onClick:A,style:{background:"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)",border:"none",height:48,padding:"0 32px",fontSize:16,fontWeight:600,width:"100%"},children:h&&p?"Book Appointment Now":"Book Appointment"}),!h&&e.jsx(l,{size:"large",onClick:R,style:{height:48,padding:"0 32px",fontSize:16,width:"100%"},children:"Log In"})]})]}),e.jsxs(q,{gutter:[24,24],children:[e.jsx(k,{xs:24,md:8,children:e.jsx(v,{children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(S,{style:{fontSize:48,color:"#1890ff",marginBottom:16}}),e.jsx(m,{level:4,children:"Easy Booking"}),e.jsx(g,{children:"Book your appointments in just a few clicks with our streamlined booking process."})]})})}),e.jsx(k,{xs:24,md:8,children:e.jsx(v,{children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(D,{style:{fontSize:48,color:"#52c41a",marginBottom:16}}),e.jsx(m,{level:4,children:"Secure & Safe"}),e.jsx(g,{children:"Your data is protected with industry-standard security measures."})]})})}),e.jsx(k,{xs:24,md:8,children:e.jsx(v,{children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(J,{style:{fontSize:48,color:"#722ed1",marginBottom:16}}),e.jsx(m,{level:4,children:"Mobile Friendly"}),e.jsx(g,{children:"Access our platform from any device with our responsive design."})]})})})]})]})}),e.jsx(K,{title:"Customer Login",open:P,onCancel:()=>{u(!1),b(!1),y(""),x("")},footer:null,width:480,centered:!0,children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("div",{style:{marginBottom:32},children:[e.jsx(w,{type:"secondary",style:{fontSize:16,lineHeight:1.6,color:"#595959"},children:j?`We've sent a 6-digit code to ${s}`:"Enter your phone number to receive a verification code"}),j&&C&&e.jsx(X,{message:"Testing Mode - OTP Code",description:`Your verification code is: ${C}`,type:"info",showIcon:!0,style:{marginTop:16}})]}),j?e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:32},children:[e.jsxs("div",{style:{position:"relative",display:"flex",justifyContent:"center",gap:8,marginBottom:16},children:[e.jsx(T,{size:"large",placeholder:"Enter 6-digit code",value:r,onChange:t=>y(t.target.value),maxLength:6,style:{position:"absolute",opacity:0,zIndex:10,width:"100%",height:"100%"},autoFocus:!0}),[0,1,2,3,4,5].map(t=>e.jsx("div",{style:{width:48,height:48,border:"2px solid #d9d9d9",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,fontWeight:"bold",background:"#fff",color:r[t]?"#1890ff":"#d9d9d9",borderColor:r[t]?"#1890ff":"#d9d9d9"},children:r[t]||""},t))]}),e.jsx(w,{type:"secondary",style:{fontSize:12},children:"Enter the 6-digit code sent to your phone"})]}),e.jsx(l,{type:"primary",size:"large",onClick:E,loading:d,disabled:r.length!==6,style:{height:48,fontSize:16,fontWeight:500,borderRadius:8,width:"100%",background:"linear-gradient(135deg, #52c41a 0%, #389e0d 100%)",border:"none",boxShadow:"0 4px 12px rgba(82, 196, 26, 0.3)"},children:d?"Verifying...":"Verify & Login"})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsx("div",{style:{position:"relative",marginBottom:8},children:e.jsx(T,{size:"large",placeholder:"+91 98765 43210",prefix:e.jsx(G,{style:{color:"#bfbfbf"}}),value:s,onChange:t=>x(t.target.value),style:{height:48,fontSize:16,borderRadius:8,border:"1px solid #d9d9d9"}})}),e.jsx(w,{type:"secondary",style:{fontSize:12},children:"We'll send you a verification code via SMS"})]}),e.jsx(l,{type:"primary",size:"large",icon:e.jsx(Q,{}),onClick:W,loading:d,disabled:!s||s.length<10,style:{height:48,fontSize:16,fontWeight:500,borderRadius:8,width:"100%",background:"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)",border:"none",boxShadow:"0 4px 12px rgba(24, 144, 255, 0.3)"},children:d?"Sending...":"Send Verification Code"})]})]})})]})}export{ke as default};
