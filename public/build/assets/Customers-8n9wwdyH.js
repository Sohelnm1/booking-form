import{g as L,r as $,j as e,H as E}from"./app-CjLSFTvF.js";import{A as W}from"./AdminLayout-CaACskhm.js";import{d as _}from"./dayjs.min-BGN71OSw.js";import{C as y,T as Y,B as q}from"./Logo-DLy9Pi-u.js";import{R as z,C as m}from"./row-CQ454HWN.js";import{S as T}from"./index-C-y85uGs.js";import{R as F}from"./UserOutlined-BTlIJHQK.js";import{R as H}from"./CalendarOutlined-C51-_ebW.js";import{R as J}from"./DollarOutlined-CnvFJIap.js";import{I as V}from"./index-D0ij-sgg.js";import{R as K}from"./SearchOutlined-CMjNe8x3.js";import{S as D}from"./index-Dc7Stc7a.js";import{D as O}from"./index-CICymlMJ.js";import{F as P}from"./Table-7REDeCqW.js";import{R as Q}from"./MailOutlined-BmieC3hh.js";import{R as G}from"./PhoneOutlined-DCAGKc-b.js";import{T as U}from"./index-YgNiGMGF.js";import{S as X}from"./index-Cz--6uym.js";import{R as Z}from"./EyeOutlined-C1FdwiFg.js";/* empty css            */import"./index-CgCFGhN9.js";import"./index-DczFaLwX.js";import"./PurePanel-Ctdvl-zP.js";import"./move-BHpooOi0.js";import"./LogoutOutlined-Di16fjZE.js";import"./ClockCircleOutlined-B5klXXHM.js";import"./FileTextOutlined-CosqdZ2W.js";import"./GiftOutlined-CqMUofQ6.js";import"./SettingOutlined-CjjuPnIM.js";import"./pickAttrs-D4RZEvRE.js";import"./Input-DRyzWO36.js";import"./EyeOutlined-FpwRxIr8.js";import"./EyeOutlined-Bmd706kk.js";import"./index-_UDQvjMi.js";import"./addEventListener-Dkb8_L8w.js";import"./index-KNdCQ6Gc.js";import"./index-CdVV1a5r.js";import"./useForm-DYbDyyqO.js";import"./index-BV1LEswr.js";import"./useClosable-C1CguS7l.js";var R={exports:{}},ee=R.exports,A;function te(){return A||(A=1,function(w,d){(function(i,h){w.exports=h()})(ee,function(){return function(i,h,n){i=i||{};var a=h.prototype,u={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function g(o,s,c,f){return a.fromToBase(o,s,c,f)}n.en.relativeTime=u,a.fromToBase=function(o,s,c,f,C){for(var t,r,x,v=c.$locale().relativeTime||u,k=i.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],N=k.length,j=0;j<N;j+=1){var l=k[j];l.d&&(t=f?n(o).diff(c,l.d,!0):c.diff(o,l.d,!0));var p=(i.rounding||Math.round)(Math.abs(t));if(x=t>0,p<=l.r||!l.r){p<=1&&j>0&&(l=k[j-1]);var I=v[l.l];C&&(p=C(""+p)),r=typeof I=="string"?I.replace("%d",p):I(p,s,l.l,x);break}}if(s)return r;var M=x?v.future:v.past;return typeof M=="function"?M(r):M.replace("%s",r)},a.to=function(o,s){return g(o,s,this,!0)},a.from=function(o,s){return g(o,s,this)};var S=function(o){return o.$u?n.utc():n()};a.toNow=function(o){return this.to(S(this),o)},a.fromNow=function(o){return this.from(S(this),o)}}})}(R)),R.exports}var re=te();const oe=L(re);_.extend(oe);const{Title:ie,Text:b}=Y,{Option:B}=D,{Search:se}=V;function Ke({auth:w,customers:d}){const[i,h]=$.useState(""),[n,a]=$.useState("all"),[u,g]=$.useState(null),S=d.length,o=d.filter(t=>t.is_active).length,s=d.reduce((t,r)=>t+(r.customer_bookings_count||0),0),c=d.reduce((t,r)=>t+parseFloat(r.customer_bookings_sum_total_amount||0),0),f=d.filter(t=>{const r=t.name?.toLowerCase().includes(i.toLowerCase())||t.email?.toLowerCase().includes(i.toLowerCase())||t.phone_number?.includes(i),x=n==="all"||n==="active"&&t.is_active||n==="inactive"&&!t.is_active,v=!u||_(t.created_at).isSame(u,"day");return r&&x&&v}),C=[{title:"Customer",key:"customer",render:(t,r)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500,marginBottom:4},children:r.name||"N/A"}),e.jsxs("div",{style:{fontSize:12,color:"#666"},children:[e.jsx(Q,{style:{marginRight:4}}),r.email||"No email"]}),e.jsxs("div",{style:{fontSize:12,color:"#666"},children:[e.jsx(G,{style:{marginRight:4}}),r.phone_number||"No phone"]})]})},{title:"Status",dataIndex:"is_active",key:"is_active",render:t=>e.jsx(U,{color:t?"success":"error",children:t?"Active":"Inactive"})},{title:"Bookings",dataIndex:"customer_bookings_count",key:"bookings",render:t=>e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:18,fontWeight:600,color:"#1890ff"},children:t||0}),e.jsx(b,{type:"secondary",style:{fontSize:12},children:"Total Bookings"})]})},{title:"Total Spent",dataIndex:"customer_bookings_sum_total_amount",key:"total_spent",render:t=>e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:18,fontWeight:600,color:"#52c41a"},children:["$",parseFloat(t||0).toFixed(2)]}),e.jsx(b,{type:"secondary",style:{fontSize:12},children:"Total Spent"})]})},{title:"Member Since",dataIndex:"created_at",key:"created_at",render:t=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:_(t).format("MMM DD, YYYY")}),e.jsx(b,{type:"secondary",style:{fontSize:12},children:_(t).fromNow()})]})},{title:"Actions",key:"actions",render:(t,r)=>e.jsx(X,{children:e.jsx(q,{type:"primary",icon:e.jsx(Z,{}),size:"small",onClick:()=>{console.log("View customer:",r.id)},children:"View Details"})})}];return e.jsxs(W,{auth:w,children:[e.jsx(E,{title:"Customer Management"}),e.jsx("div",{style:{padding:"24px"},children:e.jsxs(y,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:e.jsx(ie,{level:2,style:{margin:0},children:"Customer Management"})}),e.jsxs(z,{gutter:16,style:{marginBottom:24},children:[e.jsx(m,{span:6,children:e.jsx(y,{children:e.jsx(T,{title:"Total Customers",value:S,prefix:e.jsx(F,{}),valueStyle:{color:"#1890ff"}})})}),e.jsx(m,{span:6,children:e.jsx(y,{children:e.jsx(T,{title:"Active Customers",value:o,prefix:e.jsx(F,{}),valueStyle:{color:"#52c41a"}})})}),e.jsx(m,{span:6,children:e.jsx(y,{children:e.jsx(T,{title:"Total Bookings",value:s,prefix:e.jsx(H,{}),valueStyle:{color:"#722ed1"}})})}),e.jsx(m,{span:6,children:e.jsx(y,{children:e.jsx(T,{title:"Total Revenue",value:c,prefix:e.jsx(J,{}),precision:2,valueStyle:{color:"#fa8c16"}})})})]}),e.jsx("div",{style:{marginBottom:16},children:e.jsxs(z,{gutter:16,children:[e.jsx(m,{span:8,children:e.jsx(se,{placeholder:"Search by name, email, or phone",allowClear:!0,value:i,onChange:t=>h(t.target.value),prefix:e.jsx(K,{})})}),e.jsx(m,{span:4,children:e.jsxs(D,{placeholder:"Status",value:n,onChange:a,style:{width:"100%"},children:[e.jsx(B,{value:"all",children:"All Status"}),e.jsx(B,{value:"active",children:"Active"}),e.jsx(B,{value:"inactive",children:"Inactive"})]})}),e.jsx(m,{span:4,children:e.jsx(O,{placeholder:"Join Date",value:u,onChange:g,style:{width:"100%"},allowClear:!0})})]})}),e.jsx(P,{columns:C,dataSource:f,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(t,r)=>`${r[0]}-${r[1]} of ${t} customers`}})]})})]})}export{Ke as default};
