import{R as A,r as $,j as e,H as Te,a as ce}from"./app-9CPhuQ4N.js";import{d as me}from"./dayjs.min-DkyW2i6o.js";import{B as Be}from"./BookingHeader-CYZEQGIX.js";import{W as $e,d as L,D,G as Ie,X as fe,s as Q,H as Oe,f as Me,t as Se,n as Ee,w as _e,J as ze,_ as qe,c as Ve,g as Ke,m as He,u as V,O as Fe,r as De,Y as Le,aQ as Ge,k as We,$ as Xe,a5 as Ye,e as ue,Q as Je,o as pe,ac as Pe,ad as Qe,T as Ue,C as ne,B as H}from"./Logo-DkqekcuB.js";import{P as Ze}from"./progress-DHIiz3aS.js";import{R as et,C as he}from"./row-DZntwU3-.js";import{R as ge}from"./FileTextOutlined-DzrCmN9z.js";import{C as ye}from"./index-D60RrwvQ.js";import{S as xe}from"./CalendarOutlined-BwNhaYMx.js";import{T as ae}from"./index-DR0cXU2Q.js";import{R as ve}from"./EyeOutlined-C9vqayBZ.js";import{A as ee}from"./index-D-6iokib.js";import{D as re}from"./index-CaaxMa_b.js";import{R as tt}from"./ArrowLeftOutlined-CrWWH_jD.js";import{R as nt}from"./ArrowRightOutlined-DEuONyD4.js";import{M as Ce}from"./index-CBZmK9eV.js";import{I as be}from"./index-O0Iyg6lZ.js";import{R as je}from"./PhoneOutlined-C_oJSXj1.js";import{R as rt}from"./SendOutlined-1dyFCUYg.js";import{R as ot}from"./CheckOutlined-wbVTjke9.js";import{s as q}from"./index-9Xzw0frF.js";import{p as it}from"./pickAttrs-BDzNXXMc.js";/* empty css            */import"./LogoutOutlined-zRISOHo0.js";import"./BookOutlined-D8Ddjkqr.js";import"./CheckCircleFilled-BMzJfPTH.js";import"./useClosable-BADc7cF3.js";import"./EyeOutlined-BwF00DAq.js";import"./InfoCircleFilled-DTUShVZ5.js";import"./PurePanel-D7NzHduM.js";import"./Input-BsHZSzM4.js";var we=A.forwardRef(function(n,t){var o=n.prefixCls,s=n.forceRender,p=n.className,f=n.style,c=n.children,y=n.isActive,h=n.role,I=n.classNames,P=n.styles,x=A.useState(y||s),m=$e(x,2),l=m[0],d=m[1];return A.useEffect(function(){(s||y)&&d(!0)},[s,y]),l?A.createElement("div",{ref:t,className:L("".concat(o,"-content"),D(D({},"".concat(o,"-content-active"),y),"".concat(o,"-content-inactive"),!y),p),style:f,role:h},A.createElement("div",{className:L("".concat(o,"-content-box"),I?.body),style:P?.body},c)):null});we.displayName="PanelContent";var st=["showArrow","headerClass","isActive","onItemClick","forceRender","className","classNames","styles","prefixCls","collapsible","accordion","panelKey","extra","header","expandIcon","openMotion","destroyInactivePanel","children"],ke=A.forwardRef(function(n,t){var o=n.showArrow,s=o===void 0?!0:o,p=n.headerClass,f=n.isActive,c=n.onItemClick,y=n.forceRender,h=n.className,I=n.classNames,P=I===void 0?{}:I,x=n.styles,m=x===void 0?{}:x,l=n.prefixCls,d=n.collapsible,b=n.accordion,S=n.panelKey,v=n.extra,u=n.header,j=n.expandIcon,a=n.openMotion,w=n.destroyInactivePanel,g=n.children,k=Ie(n,st),R=d==="disabled",N=v!=null&&typeof v!="boolean",T=D(D(D({onClick:function(){c?.(S)},onKeyDown:function(M){(M.key==="Enter"||M.keyCode===fe.ENTER||M.which===fe.ENTER)&&c?.(S)},role:b?"tab":"button"},"aria-expanded",f),"aria-disabled",R),"tabIndex",R?-1:0),z=typeof j=="function"?j(n):A.createElement("i",{className:"arrow"}),G=z&&A.createElement("div",Q({className:"".concat(l,"-expand-icon")},["header","icon"].includes(d)?T:{}),z),U=L("".concat(l,"-item"),D(D({},"".concat(l,"-item-active"),f),"".concat(l,"-item-disabled"),R),h),Y=L(p,"".concat(l,"-header"),D({},"".concat(l,"-collapsible-").concat(d),!!d),P.header),O=Oe({className:Y,style:m.header},["header","icon"].includes(d)?{}:T);return A.createElement("div",Q({},k,{ref:t,className:U}),A.createElement("div",O,s&&G,A.createElement("span",Q({className:"".concat(l,"-header-text")},d==="header"?T:{}),u),N&&A.createElement("div",{className:"".concat(l,"-extra")},v)),A.createElement(Me,Q({visible:f,leavedClassName:"".concat(l,"-content-hidden")},a,{forceRender:y,removeOnLeave:w}),function(B,M){var W=B.className,K=B.style;return A.createElement(we,{ref:M,prefixCls:l,className:W,classNames:P,style:K,styles:m,isActive:f,forceRender:y,role:b?"tabpanel":void 0},g)}))}),at=["children","label","key","collapsible","onItemClick","destroyInactivePanel"],lt=function(t,o){var s=o.prefixCls,p=o.accordion,f=o.collapsible,c=o.destroyInactivePanel,y=o.onItemClick,h=o.activeKey,I=o.openMotion,P=o.expandIcon;return t.map(function(x,m){var l=x.children,d=x.label,b=x.key,S=x.collapsible,v=x.onItemClick,u=x.destroyInactivePanel,j=Ie(x,at),a=String(b??m),w=S??f,g=u??c,k=function(T){w!=="disabled"&&(y(T),v?.(T))},R=!1;return p?R=h[0]===a:R=h.indexOf(a)>-1,A.createElement(ke,Q({},j,{prefixCls:s,key:a,panelKey:a,isActive:R,accordion:p,openMotion:I,expandIcon:P,header:d,collapsible:w,onItemClick:k,destroyInactivePanel:g}),l)})},dt=function(t,o,s){if(!t)return null;var p=s.prefixCls,f=s.accordion,c=s.collapsible,y=s.destroyInactivePanel,h=s.onItemClick,I=s.activeKey,P=s.openMotion,x=s.expandIcon,m=t.key||String(o),l=t.props,d=l.header,b=l.headerClass,S=l.destroyInactivePanel,v=l.collapsible,u=l.onItemClick,j=!1;f?j=I[0]===m:j=I.indexOf(m)>-1;var a=v??c,w=function(R){a!=="disabled"&&(h(R),u?.(R))},g={key:m,panelKey:m,header:d,headerClass:b,isActive:j,prefixCls:p,destroyInactivePanel:S??y,openMotion:P,accordion:f,children:t.props.children,onItemClick:w,expandIcon:x,collapsible:a};return typeof t.type=="string"?t:(Object.keys(g).forEach(function(k){typeof g[k]>"u"&&delete g[k]}),A.cloneElement(t,g))};function ct(n,t,o){return Array.isArray(n)?lt(n,o):Se(t).map(function(s,p){return dt(s,p,o)})}function mt(n){var t=n;if(!Array.isArray(t)){var o=ze(t);t=o==="number"||o==="string"?[t]:[]}return t.map(function(s){return String(s)})}var ft=A.forwardRef(function(n,t){var o=n.prefixCls,s=o===void 0?"rc-collapse":o,p=n.destroyInactivePanel,f=p===void 0?!1:p,c=n.style,y=n.accordion,h=n.className,I=n.children,P=n.collapsible,x=n.openMotion,m=n.expandIcon,l=n.activeKey,d=n.defaultActiveKey,b=n.onChange,S=n.items,v=L(s,h),u=Ee([],{value:l,onChange:function(N){return b?.(N)},defaultValue:d,postState:mt}),j=$e(u,2),a=j[0],w=j[1],g=function(N){return w(function(){if(y)return a[0]===N?[]:[N];var T=a.indexOf(N),z=T>-1;return z?a.filter(function(G){return G!==N}):[].concat(qe(a),[N])})};_e(!I,"[rc-collapse] `children` will be removed in next major version. Please use `items` instead.");var k=ct(S,I,{prefixCls:s,accordion:y,openMotion:x,expandIcon:m,collapsible:P,destroyInactivePanel:f,onItemClick:g,activeKey:a});return A.createElement("div",Q({ref:t,className:v,style:c,role:y?"tablist":void 0},it(n,{aria:!0,data:!0})),k)});const le=Object.assign(ft,{Panel:ke});le.Panel;const ut=$.forwardRef((n,t)=>{const{getPrefixCls:o}=$.useContext(Ve),{prefixCls:s,className:p,showArrow:f=!0}=n,c=o("collapse",s),y=L({[`${c}-no-arrow`]:!f},p);return $.createElement(le.Panel,Object.assign({ref:t},n,{prefixCls:c,className:y}))}),pt=n=>{const{componentCls:t,contentBg:o,padding:s,headerBg:p,headerPadding:f,collapseHeaderPaddingSM:c,collapseHeaderPaddingLG:y,collapsePanelBorderRadius:h,lineWidth:I,lineType:P,colorBorder:x,colorText:m,colorTextHeading:l,colorTextDisabled:d,fontSizeLG:b,lineHeight:S,lineHeightLG:v,marginSM:u,paddingSM:j,paddingLG:a,paddingXS:w,motionDurationSlow:g,fontSizeIcon:k,contentPadding:R,fontHeight:N,fontHeightLG:T}=n,z=`${V(I)} ${P} ${x}`;return{[t]:Object.assign(Object.assign({},De(n)),{backgroundColor:p,border:z,borderRadius:h,"&-rtl":{direction:"rtl"},[`& > ${t}-item`]:{borderBottom:z,"&:first-child":{[`
            &,
            & > ${t}-header`]:{borderRadius:`${V(h)} ${V(h)} 0 0`}},"&:last-child":{[`
            &,
            & > ${t}-header`]:{borderRadius:`0 0 ${V(h)} ${V(h)}`}},[`> ${t}-header`]:Object.assign(Object.assign({position:"relative",display:"flex",flexWrap:"nowrap",alignItems:"flex-start",padding:f,color:l,lineHeight:S,cursor:"pointer",transition:`all ${g}, visibility 0s`},Le(n)),{[`> ${t}-header-text`]:{flex:"auto"},[`${t}-expand-icon`]:{height:N,display:"flex",alignItems:"center",paddingInlineEnd:u},[`${t}-arrow`]:Object.assign(Object.assign({},Ge()),{fontSize:k,transition:`transform ${g}`,svg:{transition:`transform ${g}`}}),[`${t}-header-text`]:{marginInlineEnd:"auto"}}),[`${t}-collapsible-header`]:{cursor:"default",[`${t}-header-text`]:{flex:"none",cursor:"pointer"}},[`${t}-collapsible-icon`]:{cursor:"unset",[`${t}-expand-icon`]:{cursor:"pointer"}}},[`${t}-content`]:{color:m,backgroundColor:o,borderTop:z,[`& > ${t}-content-box`]:{padding:R},"&-hidden":{display:"none"}},"&-small":{[`> ${t}-item`]:{[`> ${t}-header`]:{padding:c,paddingInlineStart:w,[`> ${t}-expand-icon`]:{marginInlineStart:n.calc(j).sub(w).equal()}},[`> ${t}-content > ${t}-content-box`]:{padding:j}}},"&-large":{[`> ${t}-item`]:{fontSize:b,lineHeight:v,[`> ${t}-header`]:{padding:y,paddingInlineStart:s,[`> ${t}-expand-icon`]:{height:T,marginInlineStart:n.calc(a).sub(s).equal()}},[`> ${t}-content > ${t}-content-box`]:{padding:a}}},[`${t}-item:last-child`]:{borderBottom:0,[`> ${t}-content`]:{borderRadius:`0 0 ${V(h)} ${V(h)}`}},[`& ${t}-item-disabled > ${t}-header`]:{"\n          &,\n          & > .arrow\n        ":{color:d,cursor:"not-allowed"}},[`&${t}-icon-position-end`]:{[`& > ${t}-item`]:{[`> ${t}-header`]:{[`${t}-expand-icon`]:{order:1,paddingInlineEnd:0,paddingInlineStart:u}}}}})}},ht=n=>{const{componentCls:t}=n,o=`> ${t}-item > ${t}-header ${t}-arrow`;return{[`${t}-rtl`]:{[o]:{transform:"rotate(180deg)"}}}},gt=n=>{const{componentCls:t,headerBg:o,borderlessContentPadding:s,borderlessContentBg:p,colorBorder:f}=n;return{[`${t}-borderless`]:{backgroundColor:o,border:0,[`> ${t}-item`]:{borderBottom:`1px solid ${f}`},[`
        > ${t}-item:last-child,
        > ${t}-item:last-child ${t}-header
      `]:{borderRadius:0},[`> ${t}-item:last-child`]:{borderBottom:0},[`> ${t}-item > ${t}-content`]:{backgroundColor:p,borderTop:0},[`> ${t}-item > ${t}-content > ${t}-content-box`]:{padding:s}}}},yt=n=>{const{componentCls:t,paddingSM:o}=n;return{[`${t}-ghost`]:{backgroundColor:"transparent",border:0,[`> ${t}-item`]:{borderBottom:0,[`> ${t}-content`]:{backgroundColor:"transparent",border:0,[`> ${t}-content-box`]:{paddingBlock:o}}}}}},xt=n=>({headerPadding:`${n.paddingSM}px ${n.padding}px`,headerBg:n.colorFillAlter,contentPadding:`${n.padding}px 16px`,contentBg:n.colorBgContainer,borderlessContentPadding:`${n.paddingXXS}px 16px ${n.padding}px`,borderlessContentBg:"transparent"}),vt=Ke("Collapse",n=>{const t=He(n,{collapseHeaderPaddingSM:`${V(n.paddingXS)} ${V(n.paddingSM)}`,collapseHeaderPaddingLG:`${V(n.padding)} ${V(n.paddingLG)}`,collapsePanelBorderRadius:n.borderRadiusLG});return[pt(t),gt(t),yt(t),ht(t),Fe(t)]},xt),Ct=$.forwardRef((n,t)=>{const{getPrefixCls:o,direction:s,expandIcon:p,className:f,style:c}=We("collapse"),{prefixCls:y,className:h,rootClassName:I,style:P,bordered:x=!0,ghost:m,size:l,expandIconPosition:d="start",children:b,destroyInactivePanel:S,destroyOnHidden:v,expandIcon:u}=n,j=Xe(O=>{var B;return(B=l??O)!==null&&B!==void 0?B:"middle"}),a=o("collapse",y),w=o(),[g,k,R]=vt(a),N=$.useMemo(()=>d==="left"?"start":d==="right"?"end":d,[d]),T=u??p,z=$.useCallback((O={})=>{const B=typeof T=="function"?T(O):$.createElement(Ye,{rotate:O.isActive?s==="rtl"?-90:90:void 0,"aria-label":O.isActive?"expanded":"collapsed"});return ue(B,()=>{var M;return{className:L((M=B.props)===null||M===void 0?void 0:M.className,`${a}-arrow`)}})},[T,a,s]),G=L(`${a}-icon-position-${N}`,{[`${a}-borderless`]:!x,[`${a}-rtl`]:s==="rtl",[`${a}-ghost`]:!!m,[`${a}-${j}`]:j!=="middle"},f,h,I,k,R),U=$.useMemo(()=>Object.assign(Object.assign({},Je(w)),{motionAppear:!1,leavedClassName:`${a}-content-hidden`}),[w,a]),Y=$.useMemo(()=>b?Se(b).map((O,B)=>{var M,W;const K=O.props;if(K?.disabled){const oe=(M=O.key)!==null&&M!==void 0?M:String(B),ie=Object.assign(Object.assign({},pe(O.props,["disabled"])),{key:oe,collapsible:(W=K.collapsible)!==null&&W!==void 0?W:"disabled"});return ue(O,ie)}return O}):null,[b]);return g($.createElement(le,Object.assign({ref:t,openMotion:U},pe(n,["rootClassName"]),{expandIcon:z,prefixCls:a,className:G,style:Object.assign(Object.assign({},c),P),destroyInactivePanel:v??S}),Y))}),bt=Object.assign(Ct,{Panel:ut}),{Title:X,Text:C,Paragraph:jt}=Ue,{Panel:tn}=bt,{Content:$t}=Pe;function nn({service:n,selectedExtras:t,date:o,time:s,consentSettings:p,auth:f}){const[c,y]=$.useState([]),[h,I]=$.useState(null),[P,x]=$.useState(!1),[m,l]=$.useState(""),[d,b]=$.useState(""),[S,v]=$.useState(!1),[u,j]=$.useState(!1),[a,w]=$.useState(!1),[g,k]=$.useState(!1),[R,N]=$.useState(!1),[T,z]=$.useState("");$.useEffect(()=>{f&&f.user&&f.user.phone_number&&(j(!0),w(!0),l(f.user.phone_number)),W()},[f]);const G=()=>{const r=t.map(i=>i.id);ce.visit(route("booking.select-datetime"),{data:{service_id:n.id,extras:r}})},U=()=>{const r=p.filter(_=>_.is_required),i=r.every(_=>c.includes(_.id));if(console.log("handleContinue called",{allRequiredAccepted:i,otpVerified:u,verificationCompleted:a,requiredConsents:r.length,acceptedConsents:c.length}),!i){q.error("Please accept all required agreements to continue");return}if(r.length>0&&!u&&!a){console.log("Showing phone verification modal"),N(!0);return}a&&!u&&j(!0),console.log("Proceeding to confirmation page");const E=t.map(_=>_.id),te=c,J={service_id:n.id,extras:E,date:o,time:s,consents:te};(u||a)&&m&&(J.verified_phone=m),console.log("Navigating to confirm page with data:",J),ce.visit(route("booking.confirm"),{data:J})},Y=r=>{I(r),x(!0)},O=r=>{y(i=>i.includes(r)?i.filter(E=>E!==r):[...i,r])},B=()=>{const r=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");return r||(console.error("CSRF token not found in meta tag"),q.error("CSRF token not found. Please refresh the page."),null)},M=()=>{q.error("Session expired. Please refresh the page and try again.")},W=async()=>{const r=B();if(!r)return!1;try{const i=await fetch(route("test-csrf"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":r,Accept:"application/json"}});return i.ok?(console.log("CSRF token is valid"),!0):(console.error("CSRF token validation failed:",i.status),!1)}catch(i){return console.error("Error testing CSRF token:",i),!1}},K=async()=>{if(!m||m.length<10){q.error("Please enter a valid phone number");return}const r=B();if(r)try{k(!0);const i=await fetch(route("booking.send-otp"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":r,Accept:"application/json"},body:JSON.stringify({phone_number:m})});if(!i.ok){if(i.status===419){M();return}const te=await i.json().catch(()=>({}));q.error(te.error||"Failed to send OTP");return}const E=await i.json();q.success("OTP sent successfully to your phone number"),v(!0),E.otp&&z(E.otp)}catch(i){console.error("Error sending OTP:",i),q.error("Failed to send OTP")}finally{k(!1)}},oe=async()=>{if(!d||d.length!==6){q.error("Please enter a valid 6-digit OTP");return}const r=B();if(r)try{k(!0);const i=await fetch(route("customer.login"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":r,Accept:"application/json"},body:JSON.stringify({phone_number:m,otp:d})});if(!i.ok){if(i.status===419){M();return}const _=await i.json().catch(()=>({}));q.error(_.error||"Invalid OTP");return}const E=await i.json();q.success("Phone number verified successfully!"),j(!0),w(!0),N(!1),E.formatted_phone&&l(E.formatted_phone),E.user;const J=p.filter(_=>_.is_required).find(_=>!c.includes(_.id));J&&y(_=>[..._,J.id])}catch(i){console.error("Error verifying OTP:",i),q.error("Failed to verify OTP")}finally{k(!1)}},ie=()=>{N(!1),l(""),b(""),v(!1),j(!1),w(!1)},se=r=>`₹${parseFloat(r).toFixed(2)}`,Re=r=>{if(r<60)return`${r} min`;{const i=Math.floor(r/60),E=r%60;return E>0?`${i}h ${E}m`:`${i}h`}},Ne=r=>me(r,"HH:mm").format("h:mm A"),Ae=r=>me(r).format("dddd, MMMM D, YYYY"),F=p.filter(r=>r.is_required),de=p.filter(r=>!r.is_required),Z=F.every(r=>c.includes(r.id));return e.jsxs(Pe,{style:{minHeight:"100vh"},children:[e.jsx(Te,{title:"Consent & Terms - Book Appointment"}),e.jsx(Be,{auth:f}),e.jsx($t,{children:e.jsxs("div",{style:{maxWidth:1200,margin:"0 auto",padding:"24px"},children:[e.jsx("div",{className:"mobile-top-spacing"}),e.jsxs("div",{style:{textAlign:"center",marginBottom:48},children:[e.jsx(Qe,{variant:"primary",color:"color",background:"white",size:"large"}),e.jsx(X,{level:2,style:{marginTop:24,marginBottom:8},children:"Consent & Terms"}),e.jsx(C,{type:"secondary",style:{fontSize:16},children:"Please review and accept our terms and conditions"})]}),e.jsxs("div",{style:{marginBottom:32},children:[e.jsx(Ze,{percent:80,showInfo:!1,strokeColor:"#1890ff",trailColor:"#f0f0f0"}),e.jsx("div",{style:{textAlign:"center",marginTop:8},children:e.jsx(C,{type:"secondary",children:"Step 4 of 5"})})]}),e.jsxs(et,{gutter:[32,32],children:[e.jsxs(he,{xs:24,lg:16,children:[F.length>0&&e.jsxs(ne,{style:{marginBottom:24},children:[e.jsxs(X,{level:4,style:{marginBottom:16},children:[e.jsx(ge,{style:{marginRight:8,color:"#ff4d4f"}}),"Required Agreements"]}),F.map(r=>{const i=c.includes(r.id);return e.jsx("div",{style:{marginBottom:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",padding:16,border:"1px solid #f0f0f0",borderRadius:8,backgroundColor:i?"#f6ffed":"white"},children:[e.jsx(ye,{checked:i,onChange:()=>O(r.id),style:{marginRight:12,marginTop:2}}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[e.jsx(X,{level:5,style:{margin:0},children:r.title}),e.jsxs(xe,{children:[e.jsx(ae,{color:"red",children:"Required"}),e.jsx(H,{type:"text",size:"small",icon:e.jsx(ve,{}),onClick:()=>Y(r),children:"View"})]})]}),r.summary&&e.jsx(C,{type:"secondary",style:{fontSize:14},children:r.summary})]})]})},r.id)})]}),de.length>0&&e.jsxs(ne,{children:[e.jsxs(X,{level:4,style:{marginBottom:16},children:[e.jsx(ge,{style:{marginRight:8,color:"#1890ff"}}),"Optional Agreements"]}),de.map(r=>{const i=c.includes(r.id);return e.jsx("div",{style:{marginBottom:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",padding:16,border:"1px solid #f0f0f0",borderRadius:8,backgroundColor:i?"#f6ffed":"white"},children:[e.jsx(ye,{checked:i,onChange:()=>O(r.id),style:{marginRight:12,marginTop:2}}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[e.jsx(X,{level:5,style:{margin:0},children:r.title}),e.jsxs(xe,{children:[e.jsx(ae,{color:"blue",children:"Optional"}),e.jsx(H,{type:"text",size:"small",icon:e.jsx(ve,{}),onClick:()=>Y(r),children:"View"})]})]}),r.summary&&e.jsx(C,{type:"secondary",style:{fontSize:14},children:r.summary})]})]})},r.id)})]}),p.length===0&&e.jsx(ne,{children:e.jsx(ee,{message:"No consent documents available",description:"There are no terms and conditions to review at this time.",type:"info",showIcon:!0})})]}),e.jsx(he,{xs:24,lg:8,children:e.jsxs(ne,{style:{position:"sticky",top:24},children:[e.jsx(X,{level:4,style:{marginBottom:16},children:"Booking Summary"}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsx(C,{strong:!0,children:n.name}),e.jsx(C,{children:se(n.price)})]}),e.jsx(C,{type:"secondary",style:{fontSize:12},children:Re(n.duration)})]}),t.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(re,{style:{margin:"12px 0"}}),t.map(r=>e.jsx("div",{style:{marginBottom:8},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(C,{children:["+ ",r.name]}),e.jsx(C,{children:se(r.price)})]})},r.id))]}),e.jsx(re,{style:{margin:"16px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsx(C,{strong:!0,children:"Total Price"}),e.jsx(C,{strong:!0,style:{fontSize:16},children:se(parseFloat(n.price)+t.reduce((r,i)=>r+parseFloat(i.price),0))})]}),e.jsx(re,{style:{margin:"16px 0"}}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(C,{type:"secondary",children:"Appointment Date"}),e.jsx("div",{children:e.jsx(C,{strong:!0,children:Ae(o)})})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(C,{type:"secondary",children:"Appointment Time"}),e.jsx("div",{children:e.jsx(C,{strong:!0,children:Ne(s)})})]}),e.jsx(re,{style:{margin:"16px 0"}}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(C,{type:"secondary",children:"Required Agreements"}),e.jsx("div",{children:e.jsxs(C,{strong:!0,style:{color:Z?"#52c41a":"#ff4d4f"},children:[c.filter(r=>F.find(i=>i.id===r)).length," ","of ",F.length," ","accepted"]})})]}),F.length>0&&e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(C,{type:"secondary",children:"Phone Verification"}),e.jsx("div",{children:e.jsx(C,{strong:!0,style:{color:u?"#52c41a":"#ff4d4f"},children:u?"✓ Verified":"✗ Not Verified"})})]}),e.jsxs("div",{style:{marginTop:24},children:[e.jsx(H,{block:!0,style:{marginBottom:12},icon:e.jsx(tt,{}),onClick:G,children:"Back to Date & Time"}),e.jsx(H,{type:"primary",block:!0,size:"large",icon:e.jsx(nt,{}),onClick:U,disabled:!Z||g,loading:g,children:F.length>0&&!u?"Verify Phone Number":"Continue to Confirmation"})]}),!Z&&e.jsx(ee,{message:"Required agreements not accepted",description:"Please accept all required terms and conditions to continue.",type:"warning",showIcon:!0,style:{marginTop:16}}),Z&&!u&&F.length>0&&e.jsx(ee,{message:"Phone verification required",description:"Please verify your phone number to continue with the booking.",type:"warning",showIcon:!0,style:{marginTop:16}}),Z&&u&&e.jsx(ee,{message:"All requirements completed",description:"You can now proceed to the confirmation page.",type:"success",showIcon:!0,style:{marginTop:16}})]})})]}),e.jsx(Ce,{title:h?.title,open:P,onCancel:()=>x(!1),footer:[e.jsx(H,{onClick:()=>x(!1),children:"Close"},"close")],width:800,children:h&&e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(ae,{color:h.is_required?"red":"blue",children:h.is_required?"Required":"Optional"}),e.jsxs(C,{type:"secondary",style:{marginLeft:8},children:["Version ",h.version]})]}),e.jsx("div",{style:{maxHeight:400,overflowY:"auto",padding:16,border:"1px solid #f0f0f0",borderRadius:8,backgroundColor:"#fafafa"},children:e.jsx(jt,{style:{whiteSpace:"pre-line",margin:0},children:h.content})})]})}),e.jsx(Ce,{title:e.jsxs("div",{style:{textAlign:"center",padding:"8px 0"},children:[e.jsx("div",{style:{width:60,height:60,borderRadius:"50%",backgroundColor:"#f0f8ff",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",border:"2px solid #e6f7ff"},children:e.jsx(je,{style:{fontSize:28,color:"#1890ff"}})}),e.jsx(X,{level:3,style:{margin:0,color:"#262626"},children:"Phone Verification"})]}),open:R,onCancel:ie,footer:null,width:480,closable:!g,centered:!0,style:{top:20},styles:{body:{padding:"32px 24px"}},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("div",{style:{marginBottom:32},children:[e.jsx(C,{type:"secondary",style:{fontSize:16,lineHeight:1.6,color:"#595959"},children:S?`We've sent a 6-digit code to ${m}`:"Enter your phone number to receive a verification code"}),S&&T&&e.jsx(ee,{message:"Testing Mode - OTP Code",description:`Your verification code is: ${T}`,type:"info",showIcon:!0,style:{marginTop:16}})]}),S?e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:32},children:[e.jsxs("div",{style:{position:"relative",display:"flex",justifyContent:"center",gap:8,marginBottom:16},children:[e.jsx(be,{size:"large",placeholder:"Enter 6-digit code",value:d,onChange:r=>b(r.target.value),maxLength:6,style:{position:"absolute",opacity:0,zIndex:10,width:"100%",height:"100%"},autoFocus:!0}),[0,1,2,3,4,5].map(r=>e.jsx("div",{style:{width:48,height:56,border:"2px solid #d9d9d9",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,fontWeight:600,backgroundColor:d[r]?"#f6ffed":"#fafafa",borderColor:d[r]?"#52c41a":"#d9d9d9",transition:"all 0.2s ease",cursor:"text"},children:d[r]||""},r))]}),e.jsx(C,{type:"secondary",style:{fontSize:14},children:"Enter the 6-digit verification code"})]}),e.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"center"},children:[e.jsx(H,{onClick:()=>{v(!1),b("")},disabled:g,style:{height:44,borderRadius:8,border:"1px solid #d9d9d9",color:"#595959"},children:"Change Number"}),e.jsx(H,{type:"primary",icon:e.jsx(ot,{}),onClick:oe,loading:g,disabled:!d||d.length!==6,style:{height:44,borderRadius:8,background:"linear-gradient(135deg, #52c41a 0%, #389e0d 100%)",border:"none",boxShadow:"0 4px 12px rgba(82, 196, 26, 0.3)"},children:g?"Verifying...":"Verify Code"})]}),e.jsx("div",{style:{marginTop:24},children:e.jsxs(C,{type:"secondary",style:{fontSize:12},children:["Didn't receive the code?"," ",e.jsx(H,{type:"link",size:"small",style:{padding:0,height:"auto"},onClick:K,disabled:g,children:"Resend"})]})})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsx("div",{style:{position:"relative",marginBottom:8},children:e.jsx(be,{size:"large",placeholder:"+91 98765 43210",prefix:e.jsx(je,{style:{color:"#bfbfbf"}}),value:m,onChange:r=>l(r.target.value),style:{height:48,fontSize:16,borderRadius:8,border:"1px solid #d9d9d9"}})}),e.jsx(C,{type:"secondary",style:{fontSize:12},children:"We'll send you a verification code via SMS"})]}),e.jsx(H,{type:"primary",size:"large",icon:e.jsx(rt,{}),onClick:K,loading:g,disabled:!m||m.length<10,style:{height:48,fontSize:16,fontWeight:500,borderRadius:8,width:"100%",background:"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)",border:"none",boxShadow:"0 4px 12px rgba(24, 144, 255, 0.3)"},children:g?"Sending...":"Send Verification Code"})]})]})})]})})]})}export{nn as default};
