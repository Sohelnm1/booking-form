import{r as _,R as fe,j as e,H as ge,a as je}from"./app-C8g8NPlW.js";import{d as re}from"./dayjs.min-C8D6uy6L.js";import{B as be}from"./BookingHeader-K0WWg-n8.js";import{I as _e,a9 as we,T as ve,C as $,B as D}from"./Logo-CDqhpTsI.js";import{F as f}from"./index-BZR7Xbcy.js";import{P as Ce}from"./progress-Dez_ubCl.js";import{R as V,C as I}from"./row-BBkur2F_.js";import{R as ne}from"./CheckCircleOutlined-FV-62HKK.js";import{D as b}from"./index-BigaAIWV.js";import{T as M}from"./index-DAuFP0fy.js";import{R as Se}from"./CalendarOutlined-B3TgQEw7.js";import{R as Re}from"./ClockCircleOutlined-DqtaExyq.js";import{R as te}from"./DollarOutlined-CysiRrKK.js";import{R as ze}from"./GiftOutlined-Bj_7ita5.js";import{I as y}from"./index-Dj2znBUR.js";import{A as Y}from"./index-kv2ZU-Ew.js";import{R as se}from"./UserOutlined-_ec-VI_3.js";import{R as oe}from"./MailOutlined-Vh1OGh7J.js";import{R as Ie}from"./ArrowLeftOutlined-B6zu6WF4.js";import{D as k}from"./index-Bi5b3Spo.js";import{s as P}from"./index-DKkFCNyw.js";import{D as ae}from"./index-C60-j9ow.js";import{T as ke}from"./index-BwvBI_QP.js";import{C as ie}from"./index-Bu3CvMfN.js";import{R as le}from"./index-Cjg9Y2g3.js";import{S as de}from"./index-CjtxO68u.js";import{T as Pe}from"./index-QNnz4Q-r.js";import{R as Be}from"./PhoneOutlined-BB-yXM8E.js";/* empty css            */import"./CustomerLoginModal-phdVw1M7.js";import"./index-f4TWz8zb.js";import"./CheckCircleFilled-MrEsiJ-J.js";import"./InfoCircleFilled-CRmqDlzt.js";import"./pickAttrs-CL77P40i.js";import"./useClosable-BmhHyeLv.js";import"./extendsObject-78o_rR5W.js";import"./PurePanel-DRVFJyWS.js";import"./LockOutlined-Dj6L2BDk.js";import"./index-BF9Z3oFg.js";import"./index-DKjJxjzr.js";import"./LogoutOutlined-Cjf3cbtA.js";import"./BookOutlined-BSP247HQ.js";import"./useForm-Dw1bw0PS.js";import"./Input-BEvITN8p.js";import"./EyeOutlined-DKEMeNFp.js";import"./EyeOutlined-Bmd706kk.js";import"./move-NR-w9Fmu.js";import"./index-BomWxtKH.js";import"./DownOutlined-CMIcAaga.js";var Ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-792 72h752v120H136V232zm752 560H136V440h752v352zm-237-64h165c4.4 0 8-3.6 8-8v-72c0-4.4-3.6-8-8-8H651c-4.4 0-8 3.6-8 8v72c0 4.4 3.6 8 8 8z"}}]},name:"credit-card",theme:"outlined"};function W(){return W=Object.assign?Object.assign.bind():function(o){for(var d=1;d<arguments.length;d++){var g=arguments[d];for(var j in g)Object.prototype.hasOwnProperty.call(g,j)&&(o[j]=g[j])}return o},W.apply(this,arguments)}const Fe=(o,d)=>_.createElement(_e,W({},o,{ref:d,icon:Ae})),ce=_.forwardRef(Fe),{Title:B,Text:t,Paragraph:Dr}=ve,{Option:qe}=de;function Tr({service:o,selectedExtras:d,date:g,time:j,consentSettings:T,form:$e,formFields:x,paymentSettings:L,totalPrice:w,verifiedPhone:i,selectedPricingTier:l,selectedDuration:De,selectedPrice:Te,bookingSettings:v,auth:me}){const[C]=f.useForm(),[pe,G]=_.useState(!1),[Le,Ne]=_.useState(0),[N,J]=_.useState(""),[ue,K]=_.useState(!1),[h,A]=_.useState(null),[U,R]=_.useState(""),[z,F]=_.useState(w);(l?l.duration_minutes:o.duration)+d.reduce((r,n)=>{const s=n.quantity||1;if(n.durationRelation){const m=n.durationRelation.hours*60+n.durationRelation.minutes;return r+m*s}return r+(n.total_duration||0)*s},0),fe.useEffect(()=>{if(console.log("Confirm page - verifiedPhone received:",i),console.log("Confirm page - formInstance available:",!!C),console.log("Confirm page - formFields:",x),console.log("Confirm page - bookingSettings:",v),console.log("Confirm page - URL search params:",window.location.search),console.log("Confirm page - gender preference from URL:",new URLSearchParams(window.location.search).get("gender_preference")),i&&x){const r=x.find(n=>n.is_primary&&(n.name==="customer_phone"||n.name==="phone_number"));r?(console.log("Found phone field:",r.name,"Setting value:",i),C.setFieldsValue({[r.name]:i}),setTimeout(()=>{const n=C.getFieldsValue();console.log("Form values after setting phone:",n)},100)):console.log("No phone field found in form fields")}else console.log("No verified phone number available or no form fields")},[i,C,x]);const ye=()=>{const r=d.map(s=>s.id),n=T.map(s=>s.id);je.visit(route("booking.consent"),{data:{service_id:o.id,extras:r,date:g,time:j,consents:n}})},X=async()=>{if(!N.trim()){R("Please enter a coupon code");return}K(!0),R("");try{const r=d.map(a=>a.id),n=C.getFieldValue("customer_phone")||i,m=await(await fetch(route("booking.validate-coupon"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({code:N,service_id:o.id,extras:r,phone_number:n})})).json();m.valid?(A(m.coupon),F(m.coupon.final_amount),R(""),P.success(m.message)):(R(m.message),A(null),F(w))}catch(r){console.error("Coupon validation error:",r),R("Failed to validate coupon. Please try again."),A(null),F(w)}finally{K(!1)}},he=()=>{A(null),J(""),F(w),R("")},xe=async r=>{G(!0);try{const n=d.map(c=>c.id),s=d.map(c=>({id:c.id,quantity:c.quantity||1})),m=T.map(c=>c.id),a={service_id:o.id,pricing_tier_id:l?.id,selected_duration:l?.duration_minutes||o.duration,selected_price:l?.price||o.price,extras:n,extra_quantities:s,date:g,time:j,consents:m,verified_phone:i,payment_method:r.payment_method,special_requests:r.special_requests||"",coupon_code:h?h.code:null,gender_preference:window.location.search.includes("gender_preference=")?new URLSearchParams(window.location.search).get("gender_preference"):"no_preference"};x&&x.forEach(c=>{r[c.name]!==void 0&&(a[c.name]=r[c.name])}),console.log("Form data being sent to backend:",a),console.log("Gender preference being sent:",a.gender_preference),console.log("Pricing tier debug:",{selectedPricingTier:l,pricing_tier_id:a.pricing_tier_id,selected_duration:a.selected_duration,selected_price:a.selected_price,service_price:o.price,service_duration:o.duration}),console.log("Form values from Ant Design:",r),console.log("Applied coupon:",h),console.log("Coupon code being sent:",a.coupon_code),console.log("Phone number debug:",{verifiedPhone:i,formValues:r,finalFormData:a});const S=await fetch(route("booking.process"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify(a)});let p;try{p=await S.json()}catch(c){console.error("Failed to parse response:",c),P.error("Server returned an invalid response. Please try again.");return}if(p.success){console.log("Razorpay order data:",p.order_data),console.log("Frontend final price:",z),console.log("Frontend total price:",w),console.log("Amount being sent to Razorpay:",p.order_data.amount),console.log("Amount in rupees:",p.order_data.amount/100),console.log("Expected discounted amount in paise:",z*100),console.log("Expected discounted amount in rupees:",z);const c={key:p.order_data.key_id,amount:p.order_data.amount,currency:p.order_data.currency,name:"HospiPal",description:`${o.name} - Booking`,order_id:p.order_data.order_id,handler:function(H){window.location.href=route("booking.payment-success")+`?razorpay_payment_id=${H.razorpay_payment_id}&razorpay_order_id=${H.razorpay_order_id}&razorpay_signature=${H.razorpay_signature}`},prefill:{name:r.customer_name,email:r.customer_email,contact:i||r.customer_phone},theme:{color:"#1890ff"},modal:{ondismiss:function(){window.location.href=route("booking.payment-cancelled")}},notes:{"Booking Details":`${o.name} - ${E(g)} at ${O(j)}`}};new window.Razorpay(c).open()}else p.errors?Object.keys(p.errors).forEach(c=>{p.errors[c].forEach(ee=>{P.error(ee)})}):P.error(p.error||"Failed to create booking")}catch(n){console.error("Booking error:",n),P.error("An error occurred. Please try again.")}finally{G(!1)}},u=r=>`â‚¹${parseFloat(r).toFixed(2)}`,q=r=>{if(r<60)return`${r} min`;{const n=Math.floor(r/60),s=r%60;return s>0?`${n}h ${s}m`:`${n}h`}},O=r=>re(r,"HH:mm").format("h:mm A"),E=r=>re(r).format("dddd, MMMM D, YYYY"),Q=r=>{const n=[];switch(r.is_required?n.push({required:!0,message:`Please enter your ${r.label.toLowerCase()}`}):n.push({required:!1}),r.type){case"email":n.push({type:"email",message:"Please enter a valid email address"});break;case"phone":n.push({pattern:/^[0-9+\-\s()]+$/,message:"Please enter a valid phone number"});break;case"number":n.push({type:"number",message:"Please enter a valid number"});break;case"url":n.push({type:"url",message:"Please enter a valid URL"});break}return n},Z=r=>{const n={placeholder:r.placeholder,size:"large"};switch(r.type){case"text":return e.jsx(y,{...n});case"email":return e.jsx(y,{...n,prefix:e.jsx(oe,{})});case"phone":return e.jsx(y,{...n,prefix:e.jsx(Be,{})});case"number":return e.jsx(Pe,{...n,style:{width:"100%"}});case"textarea":return e.jsx(y.TextArea,{...n,rows:3});case"select":return e.jsx(de,{...n,children:r.options?.map((s,m)=>{const a=typeof s=="object"?s.value:s,S=typeof s=="object"?s.label:s;return e.jsx(qe,{value:a,children:S},m)})});case"radio":return e.jsx(le.Group,{children:r.options?.map((s,m)=>{const a=typeof s=="object"?s.value:s,S=typeof s=="object"?s.label:s;return e.jsx(le,{value:a,children:S},m)})});case"checkbox":return e.jsx(ie.Group,{children:r.options?.map((s,m)=>{const a=typeof s=="object"?s.value:s,S=typeof s=="object"?s.label:s;return e.jsx(ie,{value:a,children:S},m)})});case"date":return e.jsx(ae,{...n,style:{width:"100%"}});case"time":return e.jsx(ke,{...n,style:{width:"100%"}});case"datetime":return e.jsx(ae,{...n,showTime:!0,style:{width:"100%"}});case"url":return e.jsx(y,{...n});case"password":return e.jsx(y.Password,{...n});default:return e.jsx(y,{...n})}};return e.jsxs("div",{children:[e.jsx(ge,{title:"Confirm & Pay - Book Appointment"}),e.jsx(be,{auth:me}),e.jsxs("div",{style:{maxWidth:1200,margin:"0 auto",padding:"16px",overflow:"hidden"},children:[e.jsx("div",{className:"mobile-top-spacing"}),e.jsxs("div",{style:{textAlign:"center",marginBottom:48},children:[e.jsx(we,{variant:"primary",color:"color",background:"white",size:"large"}),e.jsx(B,{level:2,style:{marginTop:24,marginBottom:8},children:"Confirm & Pay"}),e.jsx(t,{type:"secondary",style:{fontSize:16},children:"Review your booking and complete payment"})]}),e.jsxs("div",{style:{marginBottom:32},children:[e.jsx(Ce,{percent:100,showInfo:!1,strokeColor:"#1890ff",trailColor:"#f0f0f0"}),e.jsx("div",{style:{textAlign:"center",marginTop:8},children:e.jsx(t,{type:"secondary",children:"Step 5 of 5"})})]}),e.jsxs(V,{gutter:[16,16],children:[e.jsxs(I,{xs:24,lg:16,children:[e.jsxs($,{style:{marginBottom:24},children:[e.jsxs(B,{level:4,style:{marginBottom:16},children:[e.jsx(ne,{style:{marginRight:8,color:"#52c41a"}}),"Booking Summary"]}),e.jsxs(b,{bordered:!0,column:1,size:"small",children:[e.jsx(b.Item,{label:"Service",children:e.jsxs("div",{children:[e.jsxs(t,{strong:!0,children:[o.name,l&&e.jsx(M,{color:"blue",style:{marginLeft:8,fontSize:10},children:l.name})]}),e.jsx("br",{}),e.jsx(t,{type:"secondary",children:l?q(l.duration_minutes):o.duration_label||q(o.duration)})]})}),d.length>0&&e.jsx(b.Item,{label:"Extras",children:d.map(r=>{const n=r.quantity||1;return e.jsxs("div",{style:{marginBottom:8},children:[e.jsxs(t,{children:["+ ",r.name,n>1&&e.jsxs(t,{type:"secondary",style:{fontSize:12},children:[" ","Ã— ",n]})]}),e.jsx("br",{}),e.jsx(t,{type:"secondary",children:u(parseFloat(r.price)*n)}),e.jsx("br",{}),e.jsxs(t,{type:"secondary",style:{fontSize:12},children:[r.duration_relation?r.duration_relation.label:"No additional time",n>1&&e.jsxs(t,{type:"secondary",style:{fontSize:12},children:[" ","Ã— ",n]})]})]},r.id)})}),e.jsxs(b.Item,{label:"Appointment Date",children:[e.jsx(Se,{style:{marginRight:8}}),E(g)]}),e.jsxs(b.Item,{label:"Appointment Time",children:[e.jsx(Re,{style:{marginRight:8}}),O(j)]}),(()=>{const n=new URLSearchParams(window.location.search).get("gender_preference"),s=n&&n!=="no_preference";return console.log("Gender preference debug:",{urlParams:window.location.search,genderPreference:n,shouldShow:s,bookingSettings:v}),s})()&&e.jsx(b.Item,{label:"HospiPal Preference",children:e.jsxs(t,{children:[new URLSearchParams(window.location.search).get("gender_preference")==="male"?"Male":"Female"," ","HospiPal",v?.enable_gender_preference&&e.jsxs(t,{type:"secondary",style:{marginLeft:8},children:["(+â‚¹",new URLSearchParams(window.location.search).get("gender_preference")==="male"?v?.male_preference_fee||0:v?.female_preference_fee||0,")"]})]})}),h&&e.jsx(b.Item,{label:"Original Price",children:e.jsxs(t,{delete:!0,style:{fontSize:16},children:[e.jsx(te,{style:{marginRight:8}}),u(w)]})}),h&&e.jsx(b.Item,{label:"Discount",children:e.jsxs(t,{style:{fontSize:16,color:"#52c41a"},children:["-"," ",u(h.discount_amount)]})}),e.jsx(b.Item,{label:"Total Price",children:e.jsxs(t,{strong:!0,style:{fontSize:18,color:"#52c41a"},children:[e.jsx(te,{style:{marginRight:8}}),u(z)]})})]})]}),e.jsxs($,{style:{marginBottom:24},children:[e.jsxs(B,{level:4,style:{marginBottom:16},children:[e.jsx(ze,{style:{marginRight:8}}),"Apply Coupon"]}),h?e.jsx("div",{children:e.jsx(Y,{message:"Coupon Applied Successfully!",description:e.jsxs("div",{children:[e.jsx(t,{strong:!0,children:h.name}),e.jsx("br",{}),e.jsxs(t,{type:"secondary",children:["You saved Rs."," ",h.discount_amount]})]}),type:"success",showIcon:!0,action:e.jsx(D,{size:"small",onClick:he,children:"Remove"})})}):e.jsxs(V,{gutter:16,children:[e.jsxs(I,{flex:"auto",children:[e.jsx(y,{placeholder:"Enter coupon code",value:N,onChange:r=>J(r.target.value),onPressEnter:X,status:U?"error":""}),U&&e.jsx(t,{type:"danger",style:{fontSize:12},children:U})]}),e.jsx(I,{children:e.jsx(D,{type:"primary",onClick:X,loading:ue,children:"Apply"})})]})]}),e.jsxs($,{children:[e.jsxs(B,{level:4,style:{marginBottom:16},children:[e.jsx(se,{style:{marginRight:8}}),"Customer Information"]}),e.jsxs(f,{form:C,layout:"vertical",onFinish:xe,initialValues:{payment_method:"card"},children:[x&&x.length>0?e.jsxs(e.Fragment,{children:[x.filter(r=>r.is_primary).map(r=>e.jsx(f.Item,{name:r.name,label:r.label,rules:Q(r),help:r.help_text,children:Z(r)},r.id)),x.filter(r=>!r.is_primary).map(r=>e.jsx(f.Item,{name:r.name,label:r.label,rules:Q(r),help:r.help_text,children:Z(r)},r.id)),e.jsx(f.Item,{name:"payment_method",label:"Payment",rules:[{required:!0,message:"Payment method is required"}],children:e.jsxs("div",{children:[e.jsx(t,{type:"secondary",style:{fontSize:"14px",marginBottom:12,display:"block"},children:"All transactions are secure and encrypted."}),e.jsxs("div",{style:{border:"1px solid #1890ff",borderRadius:"8px",padding:"16px",backgroundColor:"#fff",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{width:24,height:24,backgroundColor:"#1890ff",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ce,{style:{color:"white",fontSize:14}})}),e.jsxs("div",{children:[e.jsx(t,{strong:!0,style:{fontSize:16,color:"#1f1f1f"},children:"Razorpay Secure"}),e.jsx("div",{style:{fontSize:12,color:"#666",marginTop:2},children:"(UPI, Cards, Wallets, NetBanking)"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{fontSize:12,color:"#666"},children:"UPI"}),e.jsx("div",{style:{fontSize:12,color:"#666"},children:"VISA"}),e.jsx("div",{style:{fontSize:12,color:"#666"},children:"MC"}),e.jsx("div",{style:{fontSize:12,color:"#666"},children:"+18"})]})]}),e.jsxs("div",{style:{marginTop:12,display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:20,height:20,backgroundColor:"#f0f0f0",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("div",{style:{fontSize:10,color:"#666"},children:"ðŸŒ"})}),e.jsx(t,{type:"secondary",style:{fontSize:"12px",lineHeight:1.4},children:"After clicking 'Confirm & Pay', you will be redirected to Razorpay Secure (UPI, Cards, Wallets, NetBanking) to complete your purchase securely."})]})]})})]}):e.jsxs(e.Fragment,{children:[e.jsxs(V,{gutter:16,children:[e.jsx(I,{xs:24,sm:12,children:e.jsx(f.Item,{name:"customer_name",label:"Full Name",rules:[{required:!0,message:"Please enter your full name"}],children:e.jsx(y,{prefix:e.jsx(se,{}),placeholder:"Enter your full name",size:"large"})})}),e.jsxs(I,{xs:24,sm:12,children:[e.jsx(f.Item,{name:"customer_phone",label:"Phone Number",rules:[{required:!0,message:"Please enter your phone number"},{pattern:/^[0-9+\-\s()]+$/,message:"Please enter a valid phone number"}],children:e.jsx(y,{placeholder:"Enter your phone number",disabled:!!i,addonBefore:e.jsx("span",{style:{color:i?"#52c41a":"inherit"},children:i?"âœ“ Verified":"ðŸ“±"})})}),i&&e.jsx(t,{type:"success",style:{fontSize:"12px"},children:"Phone number verified in previous step"}),i&&i!==C.getFieldValue("customer_phone")&&e.jsxs(t,{type:"warning",style:{fontSize:"12px"},children:["Note: Using verified phone number (",i,") for booking"]})]})]}),e.jsx(f.Item,{name:"customer_email",label:"Email Address",rules:[{required:!0,message:"Please enter your email address"},{type:"email",message:"Please enter a valid email address"}],children:e.jsx(y,{prefix:e.jsx(oe,{}),placeholder:"Enter your email address",size:"large"})}),e.jsx(f.Item,{name:"payment_method",label:"Payment",rules:[{required:!0,message:"Payment method is required"}],children:e.jsxs("div",{children:[e.jsx(t,{type:"secondary",style:{fontSize:"14px",marginBottom:12,display:"block"},children:"All transactions are secure and encrypted."}),e.jsxs("div",{style:{border:"1px solid #1890ff",borderRadius:"8px",padding:"16px",backgroundColor:"#fff",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{width:24,height:24,backgroundColor:"#1890ff",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ce,{style:{color:"white",fontSize:14}})}),e.jsxs("div",{children:[e.jsx(t,{strong:!0,style:{fontSize:16,color:"#1f1f1f"},children:"Razorpay Secure"}),e.jsx("div",{style:{fontSize:12,color:"#666",marginTop:2},children:"(UPI, Cards, Wallets, NetBanking)"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{fontSize:12,color:"#666"},children:"UPI"}),e.jsx("div",{style:{fontSize:12,color:"#666"},children:"VISA"}),e.jsx("div",{style:{fontSize:12,color:"#666"},children:"MC"}),e.jsx("div",{style:{fontSize:12,color:"#666"},children:"+18"})]})]}),e.jsxs("div",{style:{marginTop:12,display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:20,height:20,backgroundColor:"#f0f0f0",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("div",{style:{fontSize:10,color:"#666"},children:"ðŸŒ"})}),e.jsx(t,{type:"secondary",style:{fontSize:"12px",lineHeight:1.4},children:"After clicking 'Confirm & Pay', you will be redirected to Razorpay Secure (UPI, Cards, Wallets, NetBanking) to complete your purchase securely."})]})]})}),e.jsx(f.Item,{name:"special_requests",label:"Special Requests (Optional)",children:e.jsx(y.TextArea,{rows:3,placeholder:"Any special requests or notes for your appointment..."})})]}),e.jsx(Y,{message:"Booking Confirmation",description:"By clicking 'Confirm & Pay', you agree to our terms and conditions and confirm your appointment booking.",type:"info",showIcon:!0,style:{marginBottom:24}}),e.jsxs("div",{style:{display:"flex",gap:16,flexDirection:"column",width:"100%"},children:[e.jsx(D,{size:"large",icon:e.jsx(Ie,{}),onClick:ye,style:{width:"100%"},children:"Back to Terms"}),e.jsxs(D,{type:"primary",size:"large",htmlType:"submit",loading:pe,icon:e.jsx(ne,{}),style:{width:"100%"},children:[e.jsx("span",{className:"hidden-xs",children:"Confirm & Pay"}),e.jsx("span",{className:"visible-xs",children:"Pay"})," ",u(z)]})]})]})]})]}),e.jsx(I,{xs:24,lg:8,children:e.jsxs($,{style:{position:"sticky",top:24},children:[e.jsx(B,{level:4,style:{marginBottom:16},children:"Final Summary"}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsxs(t,{strong:!0,children:[o.name,l&&e.jsx(M,{color:"blue",style:{marginLeft:8,fontSize:10},children:l.name})]}),e.jsx(t,{children:u(l?l.price:o.price)})]}),e.jsx(t,{type:"secondary",style:{fontSize:12},children:l?q(l.duration_minutes):o.duration_label||q(o.duration)})]}),e.jsx("div",{style:{marginBottom:16},children:e.jsx(t,{type:"secondary",style:{fontSize:12},children:"Employee will be automatically assigned based on availability"})}),d.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(k,{style:{margin:"12px 0"}}),d.map(r=>{const n=r.quantity||1,s=parseFloat(r.price)*n;return e.jsx("div",{style:{marginBottom:8},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(t,{children:["+ ",r.name,n>1&&e.jsxs(t,{type:"secondary",style:{fontSize:12,marginLeft:4},children:["Ã— ",n]})]}),e.jsx(t,{children:u(s)})]})},r.id)})]}),window.location.search.includes("gender_preference=")&&new URLSearchParams(window.location.search).get("gender_preference")!=="no_preference"&&e.jsxs(e.Fragment,{children:[e.jsx(k,{style:{margin:"12px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsxs(t,{children:["+"," ",new URLSearchParams(window.location.search).get("gender_preference")==="male"?"Male":"Female"," ","Preference"]}),e.jsx(t,{children:u(new URLSearchParams(window.location.search).get("gender_preference")==="male"?v?.male_preference_fee||0:v?.female_preference_fee||0)})]})]}),e.jsx(k,{style:{margin:"16px 0"}}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(t,{type:"secondary",children:"Appointment Date"}),e.jsx("div",{children:e.jsx(t,{strong:!0,children:E(g)})})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(t,{type:"secondary",children:"Appointment Time"}),e.jsx("div",{children:e.jsx(t,{strong:!0,children:O(j)})})]}),e.jsx(k,{style:{margin:"16px 0"}}),h&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsx(t,{children:"Original Price"}),e.jsx(t,{delete:!0,style:{fontSize:14},children:u(w)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsx(t,{children:"Discount"}),e.jsxs(t,{style:{fontSize:14,color:"#52c41a"},children:["-"," ",u(h.discount_amount)]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsx(t,{strong:!0,children:"Total Price"}),e.jsx(t,{strong:!0,style:{fontSize:18,color:"#52c41a"},children:u(z)})]}),e.jsx(k,{style:{margin:"16px 0"}}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(t,{type:"secondary",children:"Accepted Agreements"}),e.jsx("div",{children:T.map(r=>e.jsx(M,{color:"green",style:{marginTop:4},children:r.title},r.id))})]}),e.jsx(Y,{message:"Secure Payment",description:`Your payment information is encrypted and secure. ${L?.razorpay_key?"Powered by Razorpay.":""}`,type:"success",showIcon:!0,style:{marginTop:16}}),L?.currency&&e.jsxs(t,{type:"secondary",style:{fontSize:12,display:"block",marginTop:8},children:["Currency: ",L.currency]})]})})]})]})]})}export{Tr as default};
