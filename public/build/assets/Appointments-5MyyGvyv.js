import{r as c,j as e,H as O}from"./app-BT0PBD5v.js";import{A as P}from"./AdminLayout-Dc03Pn8T.js";import{d as h}from"./dayjs.min-iFuAdwsj.js";import{I as V,C as j,T as H,B as D,R as G}from"./Logo-CBsbfG2i.js";import{S as l}from"./index-DyZ0RITu.js";import{R as J,C as _}from"./row-BmBoW_gX.js";import{I as K}from"./index-DSRvDQzQ.js";import{S as Q}from"./Input-CvWDqBh-.js";import{S as T}from"./index-DBEzLASz.js";import{D as U}from"./index-DLiTCBO6.js";import{F as q}from"./Table-B7Pdspem.js";import{M as W}from"./index-BmtCO0jd.js";import{D as i}from"./index-CPNQNLGX.js";import{D as f}from"./index-BbnGm7O4.js";import{B as p}from"./index-BhmSSg8N.js";import{R as X}from"./CheckCircleOutlined-CPKirhKK.js";import{R as Z}from"./MailOutlined-BntH5jt5.js";import{R as ee}from"./PhoneOutlined-Ca8mh_sI.js";import{R as te}from"./CalendarOutlined-4pR6q61x.js";import{R as se}from"./ClockCircleOutlined-x1u_407Q.js";import{T as re}from"./index-Du1npkmC.js";import{R as ne}from"./EyeOutlined-CZuwmzK6.js";/* empty css            */import"./index-CeLPprD2.js";import"./PurePanel-D4KtRPLf.js";import"./move-8rmViMFg.js";import"./useBreakpoint-_zB_dkAU.js";import"./PlusOutlined-CMQuLy0S.js";import"./FileTextOutlined-CTErf0sg.js";import"./pickAttrs-CVI85bE7.js";import"./EyeOutlined-DLP9J_fo.js";import"./index-6ufNqcJI.js";import"./addEventListener-GUaYHLgK.js";import"./index-Bzdxy8Q6.js";import"./index-D06CY-Zo.js";import"./useForm-BuUIJ0Zj.js";import"./index-ByS1Z0ke.js";import"./CheckCircleFilled-t1GImBJH.js";import"./ExclamationCircleFilled-uB9MuAY_.js";import"./InfoCircleFilled-C2zuEgtx.js";function S(){return S=Object.assign?Object.assign.bind():function(m){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var d in r)Object.prototype.hasOwnProperty.call(r,d)&&(m[d]=r[d])}return m},S.apply(this,arguments)}const ie=(m,a)=>c.createElement(V,S({},m,{ref:a,icon:Q})),le=c.forwardRef(ie),{Title:y,Text:n}=H,{Option:x}=T,{Search:oe}=K;function Qe({auth:m,bookings:a}){const[r,d]=c.useState(null),[B,C]=c.useState(!1),[u,F]=c.useState(""),[v,A]=c.useState("all"),[g,k]=c.useState(null),L=t=>{d(t),C(!0)},I=()=>{C(!1),d(null)},b=t=>{switch(t){case"confirmed":return"success";case"pending":return"warning";case"completed":return"processing";case"cancelled":return"error";case"no_show":return"default";default:return"default"}},w=t=>{switch(t){case"paid":return"success";case"pending":return"warning";case"failed":return"error";case"refunded":return"default";default:return"default"}},M=t=>h(t).format("h:mm A"),$=t=>h(t).format("MMM DD, YYYY"),z=t=>h(t).format("MMM DD, YYYY h:mm A"),Y=t=>{const s=t.form_field;if(!s)return e.jsxs("div",{style:{marginBottom:8},children:[e.jsxs(n,{strong:!0,style:{fontSize:"12px",color:"#666"},children:["Unknown Field (ID: ",t.form_field_id,"):"]}),e.jsx("br",{}),e.jsx(n,{children:t.response_value||"Not provided"})]},t.id);const o=t.formatted_value||t.response_value;return e.jsxs("div",{style:{marginBottom:8},children:[e.jsxs(n,{strong:!0,style:{fontSize:"12px",color:"#666"},children:[s.label,":"]}),e.jsx("br",{}),e.jsx(n,{children:o||"Not provided"})]},t.id)},R=a.filter(t=>{const s=u===""||t.customer.name.toLowerCase().includes(u.toLowerCase())||t.customer.email.toLowerCase().includes(u.toLowerCase())||t.service.name.toLowerCase().includes(u.toLowerCase())||t.employee.name.toLowerCase().includes(u.toLowerCase()),o=v==="all"||t.status===v,N=!g||h(t.appointment_time).isSame(g,"day");return s&&o&&N}),E=[{title:"Customer",key:"customer",render:(t,s)=>e.jsxs(l,{direction:"vertical",size:"small",children:[e.jsxs(l,{children:[e.jsx(G,{}),e.jsx(n,{strong:!0,children:s.customer.name})]}),e.jsxs(l,{children:[e.jsx(Z,{}),e.jsx(n,{copyable:!0,style:{fontSize:"12px"},children:s.customer.email})]}),e.jsxs(l,{children:[e.jsx(ee,{}),e.jsx(n,{copyable:!0,style:{fontSize:"12px"},children:s.customer.phone_number})]})]})},{title:"Service & Employee",key:"service",render:(t,s)=>e.jsxs(l,{direction:"vertical",size:"small",children:[e.jsxs("div",{children:[e.jsx(n,{strong:!0,children:s.service.name}),e.jsx("br",{}),e.jsxs(n,{type:"secondary",style:{fontSize:"12px"},children:[s.service.duration," min • ₹",s.service.price]})]}),e.jsx("div",{children:e.jsxs(n,{type:"secondary",style:{fontSize:"12px"},children:["Assigned to: ",s.employee.name,e.jsx(p,{status:s.employee.is_active?"success":"error",text:s.employee.is_active?"Active":"Inactive",style:{marginLeft:4,fontSize:"10px"}})]})})]})},{title:"Appointment",key:"appointment",render:(t,s)=>e.jsxs(l,{direction:"vertical",size:"small",children:[e.jsxs(l,{children:[e.jsx(te,{}),e.jsx(n,{children:$(s.appointment_time)})]}),e.jsxs(l,{children:[e.jsx(se,{}),e.jsx(n,{children:M(s.appointment_time)})]}),e.jsxs(n,{type:"secondary",style:{fontSize:"12px"},children:["Duration: ",s.duration," min"]})]})},{title:"Extras",key:"extras",render:(t,s)=>e.jsx("div",{children:s.extras&&s.extras.length>0?s.extras.map(o=>e.jsxs(re,{color:"blue",style:{marginBottom:4},children:[o.name," (₹",o.pivot.price,")"]},o.id)):e.jsx(n,{type:"secondary",style:{fontSize:"12px"},children:"No extras"})})},{title:"Total & Status",key:"total",render:(t,s)=>e.jsxs(l,{direction:"vertical",size:"small",children:[e.jsxs(l,{children:[e.jsx(n,{strong:!0,style:{color:"#1890ff"},children:"₹"}),e.jsxs(n,{strong:!0,children:["₹",s.total_amount]})]}),e.jsx(l,{children:e.jsx(p,{status:b(s.status),text:s.status_text||s.status})}),e.jsx(l,{children:e.jsx(p,{status:w(s.payment_status),text:s.payment_status_text||s.payment_status})})]})},{title:"Actions",key:"actions",render:(t,s)=>e.jsx(D,{type:"primary",icon:e.jsx(ne,{}),size:"small",onClick:()=>L(s),children:"View Details"})}];return e.jsxs(P,{auth:m,children:[e.jsx(O,{title:"Appointments"}),e.jsxs("div",{style:{padding:"24px"},children:[e.jsxs(j,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[e.jsx(y,{level:2,style:{margin:0},children:"Appointments"}),e.jsx(l,{children:e.jsxs(n,{type:"secondary",children:["Total: ",R.length," bookings"]})})]}),e.jsx("div",{style:{marginBottom:16},children:e.jsxs(J,{gutter:16,children:[e.jsx(_,{span:8,children:e.jsx(oe,{placeholder:"Search by customer, service, or employee",allowClear:!0,value:u,onChange:t=>F(t.target.value),prefix:e.jsx(le,{})})}),e.jsx(_,{span:4,children:e.jsxs(T,{placeholder:"Status",value:v,onChange:A,style:{width:"100%"},children:[e.jsx(x,{value:"all",children:"All Status"}),e.jsx(x,{value:"pending",children:"Pending"}),e.jsx(x,{value:"confirmed",children:"Confirmed"}),e.jsx(x,{value:"completed",children:"Completed"}),e.jsx(x,{value:"cancelled",children:"Cancelled"}),e.jsx(x,{value:"no_show",children:"No Show"})]})}),e.jsx(_,{span:4,children:e.jsx(U,{placeholder:"Filter by date",value:g,onChange:k,style:{width:"100%"},allowClear:!0})})]})}),e.jsx(q,{columns:E,dataSource:R,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(t,s)=>`${s[0]}-${s[1]} of ${t} appointments`}})]}),e.jsx(W,{title:"Booking Details",open:B,onCancel:I,footer:[e.jsx(D,{onClick:I,children:"Close"},"close")],width:800,children:r&&e.jsxs("div",{children:[e.jsxs(i,{title:"Customer Information",bordered:!0,size:"small",children:[e.jsx(i.Item,{label:"Name",span:2,children:r.customer.name}),e.jsx(i.Item,{label:"Email",span:2,children:r.customer.email}),e.jsx(i.Item,{label:"Phone",span:2,children:r.customer.phone_number})]}),e.jsx(f,{}),e.jsxs(i,{title:"Booking Information",bordered:!0,size:"small",children:[e.jsx(i.Item,{label:"Service",children:r.service.name}),e.jsxs(i.Item,{label:"Employee",children:[r.employee.name,e.jsx(p,{status:r.employee.is_active?"success":"error",text:r.employee.is_active?"Active":"Inactive",style:{marginLeft:8}})]}),e.jsx(i.Item,{label:"Date & Time",children:z(r.appointment_time)}),e.jsxs(i.Item,{label:"Duration",children:[r.duration," minutes"]}),e.jsx(i.Item,{label:"Status",children:e.jsx(p,{status:b(r.status),text:r.status_text||r.status})}),e.jsx(i.Item,{label:"Payment Status",children:e.jsx(p,{status:w(r.payment_status),text:r.payment_status_text||r.payment_status})}),e.jsx(i.Item,{label:"Total Amount",span:2,children:e.jsxs(n,{strong:!0,style:{fontSize:"16px"},children:["₹",r.total_amount]})})]}),e.jsx(f,{}),r.extras&&r.extras.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(i,{title:"Selected Extras",bordered:!0,size:"small",children:r.extras.map(t=>e.jsxs(i.Item,{label:t.name,children:["₹",t.pivot.price]},t.id))}),e.jsx(f,{})]}),(()=>{const t=r.form_responses;if(t&&t.length>0){const s=t.filter(o=>o.form_field&&!o.form_field.is_primary);return s.length>0?e.jsxs("div",{children:[e.jsx(y,{level:4,children:"Custom Field Responses"}),e.jsx(j,{size:"small",children:s.map(Y)})]}):e.jsxs("div",{children:[e.jsx(y,{level:4,children:"Custom Field Responses"}),e.jsx(j,{size:"small",children:e.jsx(n,{type:"secondary",children:"No custom field responses found."})})]})}else return e.jsxs("div",{children:[e.jsx(y,{level:4,children:"Custom Field Responses"}),e.jsx(j,{size:"small",children:e.jsx(n,{type:"secondary",children:"No form responses found."})})]})})(),r.consent_given&&e.jsxs(e.Fragment,{children:[e.jsx(f,{}),e.jsxs(i,{title:"Consent Information",bordered:!0,size:"small",children:[e.jsxs(i.Item,{label:"Consent Given",children:[e.jsx(X,{style:{color:"green"}})," ","Yes"]}),e.jsx(i.Item,{label:"Consent Date",children:r.consent_given_at?z(r.consent_given_at):"Not recorded"})]})]})]})})]})]})}export{Qe as default};
