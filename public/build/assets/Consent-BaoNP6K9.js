import{R as A,r as b,j as e,H as Oe,a as me}from"./app-CkCwleol.js";import{d as fe}from"./dayjs.min-adpuSsob.js";import{B as Be}from"./BookingHeader-DgLJ_YGY.js";import{W as Ie,d as L,D,G as Se,X as ue,s as Q,H as Me,f as Ee,t as Pe,n as _e,w as ze,J as qe,_ as Ve,c as Ke,g as He,m as Fe,u as V,O as De,r as Le,Y as Ge,aQ as We,k as Xe,$ as Ye,a5 as Je,e as pe,Q as Qe,o as he,I as Ue,ac as we,ad as Ze,T as et,C as ne,B as H}from"./Logo-Bm9HFBra.js";import{P as tt}from"./progress-BmCZIU7F.js";import{R as nt,C as ge}from"./row-DR-3XZwd.js";import{R as ye}from"./FileTextOutlined-Bk9VxT4g.js";import{C as xe}from"./index-DN6eZ2vn.js";import{S as ve}from"./CalendarOutlined-BJ8QoLnm.js";import{T as ae}from"./index-CDZaCDYH.js";import{R as Ce}from"./EyeOutlined-BjpzDm2r.js";import{A as ee}from"./index-CQdfdfwk.js";import{D as re}from"./index-shhxZTnw.js";import{R as rt}from"./ArrowLeftOutlined-H0uVUnYk.js";import{R as ot}from"./ArrowRightOutlined-BxhzBtFs.js";import{M as be}from"./index-Cf0U9k4q.js";import{I as je}from"./index-ClURE6eI.js";import{R as $e}from"./PhoneOutlined-GIPcOI5s.js";import{R as it}from"./CheckOutlined-APL4zK5H.js";import{s as q}from"./index-B4r3jgYD.js";import{p as st}from"./pickAttrs-D6af2yxc.js";/* empty css            */import"./CustomerLoginModal-C1TJjV8S.js";import"./LogoutOutlined-CtN_iQew.js";import"./BookOutlined-BxbSxOK2.js";import"./CheckCircleFilled-CLv1T2XR.js";import"./index-Rr6sIx6Z.js";import"./useClosable-DxwrCKd8.js";import"./EyeOutlined-DA8e5tAQ.js";import"./InfoCircleFilled--9mUs4Se.js";import"./PurePanel-CgsNtyW7.js";import"./Input-COZ_8-MU.js";var ke=A.forwardRef(function(n,t){var o=n.prefixCls,i=n.forceRender,p=n.className,f=n.style,c=n.children,y=n.isActive,h=n.role,I=n.classNames,P=n.styles,x=A.useState(y||i),m=Ie(x,2),l=m[0],d=m[1];return A.useEffect(function(){(i||y)&&d(!0)},[i,y]),l?A.createElement("div",{ref:t,className:L("".concat(o,"-content"),D(D({},"".concat(o,"-content-active"),y),"".concat(o,"-content-inactive"),!y),p),style:f,role:h},A.createElement("div",{className:L("".concat(o,"-content-box"),I?.body),style:P?.body},c)):null});ke.displayName="PanelContent";var at=["showArrow","headerClass","isActive","onItemClick","forceRender","className","classNames","styles","prefixCls","collapsible","accordion","panelKey","extra","header","expandIcon","openMotion","destroyInactivePanel","children"],Re=A.forwardRef(function(n,t){var o=n.showArrow,i=o===void 0?!0:o,p=n.headerClass,f=n.isActive,c=n.onItemClick,y=n.forceRender,h=n.className,I=n.classNames,P=I===void 0?{}:I,x=n.styles,m=x===void 0?{}:x,l=n.prefixCls,d=n.collapsible,j=n.accordion,S=n.panelKey,v=n.extra,u=n.header,$=n.expandIcon,a=n.openMotion,w=n.destroyInactivePanel,g=n.children,k=Se(n,at),R=d==="disabled",N=v!=null&&typeof v!="boolean",T=D(D(D({onClick:function(){c?.(S)},onKeyDown:function(M){(M.key==="Enter"||M.keyCode===ue.ENTER||M.which===ue.ENTER)&&c?.(S)},role:j?"tab":"button"},"aria-expanded",f),"aria-disabled",R),"tabIndex",R?-1:0),z=typeof $=="function"?$(n):A.createElement("i",{className:"arrow"}),G=z&&A.createElement("div",Q({className:"".concat(l,"-expand-icon")},["header","icon"].includes(d)?T:{}),z),U=L("".concat(l,"-item"),D(D({},"".concat(l,"-item-active"),f),"".concat(l,"-item-disabled"),R),h),Y=L(p,"".concat(l,"-header"),D({},"".concat(l,"-collapsible-").concat(d),!!d),P.header),B=Me({className:Y,style:m.header},["header","icon"].includes(d)?{}:T);return A.createElement("div",Q({},k,{ref:t,className:U}),A.createElement("div",B,i&&G,A.createElement("span",Q({className:"".concat(l,"-header-text")},d==="header"?T:{}),u),N&&A.createElement("div",{className:"".concat(l,"-extra")},v)),A.createElement(Ee,Q({visible:f,leavedClassName:"".concat(l,"-content-hidden")},a,{forceRender:y,removeOnLeave:w}),function(O,M){var W=O.className,K=O.style;return A.createElement(ke,{ref:M,prefixCls:l,className:W,classNames:P,style:K,styles:m,isActive:f,forceRender:y,role:j?"tabpanel":void 0},g)}))}),lt=["children","label","key","collapsible","onItemClick","destroyInactivePanel"],dt=function(t,o){var i=o.prefixCls,p=o.accordion,f=o.collapsible,c=o.destroyInactivePanel,y=o.onItemClick,h=o.activeKey,I=o.openMotion,P=o.expandIcon;return t.map(function(x,m){var l=x.children,d=x.label,j=x.key,S=x.collapsible,v=x.onItemClick,u=x.destroyInactivePanel,$=Se(x,lt),a=String(j??m),w=S??f,g=u??c,k=function(T){w!=="disabled"&&(y(T),v?.(T))},R=!1;return p?R=h[0]===a:R=h.indexOf(a)>-1,A.createElement(Re,Q({},$,{prefixCls:i,key:a,panelKey:a,isActive:R,accordion:p,openMotion:I,expandIcon:P,header:d,collapsible:w,onItemClick:k,destroyInactivePanel:g}),l)})},ct=function(t,o,i){if(!t)return null;var p=i.prefixCls,f=i.accordion,c=i.collapsible,y=i.destroyInactivePanel,h=i.onItemClick,I=i.activeKey,P=i.openMotion,x=i.expandIcon,m=t.key||String(o),l=t.props,d=l.header,j=l.headerClass,S=l.destroyInactivePanel,v=l.collapsible,u=l.onItemClick,$=!1;f?$=I[0]===m:$=I.indexOf(m)>-1;var a=v??c,w=function(R){a!=="disabled"&&(h(R),u?.(R))},g={key:m,panelKey:m,header:d,headerClass:j,isActive:$,prefixCls:p,destroyInactivePanel:S??y,openMotion:P,accordion:f,children:t.props.children,onItemClick:w,expandIcon:x,collapsible:a};return typeof t.type=="string"?t:(Object.keys(g).forEach(function(k){typeof g[k]>"u"&&delete g[k]}),A.cloneElement(t,g))};function mt(n,t,o){return Array.isArray(n)?dt(n,o):Pe(t).map(function(i,p){return ct(i,p,o)})}function ft(n){var t=n;if(!Array.isArray(t)){var o=qe(t);t=o==="number"||o==="string"?[t]:[]}return t.map(function(i){return String(i)})}var ut=A.forwardRef(function(n,t){var o=n.prefixCls,i=o===void 0?"rc-collapse":o,p=n.destroyInactivePanel,f=p===void 0?!1:p,c=n.style,y=n.accordion,h=n.className,I=n.children,P=n.collapsible,x=n.openMotion,m=n.expandIcon,l=n.activeKey,d=n.defaultActiveKey,j=n.onChange,S=n.items,v=L(i,h),u=_e([],{value:l,onChange:function(N){return j?.(N)},defaultValue:d,postState:ft}),$=Ie(u,2),a=$[0],w=$[1],g=function(N){return w(function(){if(y)return a[0]===N?[]:[N];var T=a.indexOf(N),z=T>-1;return z?a.filter(function(G){return G!==N}):[].concat(Ve(a),[N])})};ze(!I,"[rc-collapse] `children` will be removed in next major version. Please use `items` instead.");var k=mt(S,I,{prefixCls:i,accordion:y,openMotion:x,expandIcon:m,collapsible:P,destroyInactivePanel:f,onItemClick:g,activeKey:a});return A.createElement("div",Q({ref:t,className:v,style:c,role:y?"tablist":void 0},st(n,{aria:!0,data:!0})),k)});const de=Object.assign(ut,{Panel:Re});de.Panel;const pt=b.forwardRef((n,t)=>{const{getPrefixCls:o}=b.useContext(Ke),{prefixCls:i,className:p,showArrow:f=!0}=n,c=o("collapse",i),y=L({[`${c}-no-arrow`]:!f},p);return b.createElement(de.Panel,Object.assign({ref:t},n,{prefixCls:c,className:y}))}),ht=n=>{const{componentCls:t,contentBg:o,padding:i,headerBg:p,headerPadding:f,collapseHeaderPaddingSM:c,collapseHeaderPaddingLG:y,collapsePanelBorderRadius:h,lineWidth:I,lineType:P,colorBorder:x,colorText:m,colorTextHeading:l,colorTextDisabled:d,fontSizeLG:j,lineHeight:S,lineHeightLG:v,marginSM:u,paddingSM:$,paddingLG:a,paddingXS:w,motionDurationSlow:g,fontSizeIcon:k,contentPadding:R,fontHeight:N,fontHeightLG:T}=n,z=`${V(I)} ${P} ${x}`;return{[t]:Object.assign(Object.assign({},Le(n)),{backgroundColor:p,border:z,borderRadius:h,"&-rtl":{direction:"rtl"},[`& > ${t}-item`]:{borderBottom:z,"&:first-child":{[`
            &,
            & > ${t}-header`]:{borderRadius:`${V(h)} ${V(h)} 0 0`}},"&:last-child":{[`
            &,
            & > ${t}-header`]:{borderRadius:`0 0 ${V(h)} ${V(h)}`}},[`> ${t}-header`]:Object.assign(Object.assign({position:"relative",display:"flex",flexWrap:"nowrap",alignItems:"flex-start",padding:f,color:l,lineHeight:S,cursor:"pointer",transition:`all ${g}, visibility 0s`},Ge(n)),{[`> ${t}-header-text`]:{flex:"auto"},[`${t}-expand-icon`]:{height:N,display:"flex",alignItems:"center",paddingInlineEnd:u},[`${t}-arrow`]:Object.assign(Object.assign({},We()),{fontSize:k,transition:`transform ${g}`,svg:{transition:`transform ${g}`}}),[`${t}-header-text`]:{marginInlineEnd:"auto"}}),[`${t}-collapsible-header`]:{cursor:"default",[`${t}-header-text`]:{flex:"none",cursor:"pointer"}},[`${t}-collapsible-icon`]:{cursor:"unset",[`${t}-expand-icon`]:{cursor:"pointer"}}},[`${t}-content`]:{color:m,backgroundColor:o,borderTop:z,[`& > ${t}-content-box`]:{padding:R},"&-hidden":{display:"none"}},"&-small":{[`> ${t}-item`]:{[`> ${t}-header`]:{padding:c,paddingInlineStart:w,[`> ${t}-expand-icon`]:{marginInlineStart:n.calc($).sub(w).equal()}},[`> ${t}-content > ${t}-content-box`]:{padding:$}}},"&-large":{[`> ${t}-item`]:{fontSize:j,lineHeight:v,[`> ${t}-header`]:{padding:y,paddingInlineStart:i,[`> ${t}-expand-icon`]:{height:T,marginInlineStart:n.calc(a).sub(i).equal()}},[`> ${t}-content > ${t}-content-box`]:{padding:a}}},[`${t}-item:last-child`]:{borderBottom:0,[`> ${t}-content`]:{borderRadius:`0 0 ${V(h)} ${V(h)}`}},[`& ${t}-item-disabled > ${t}-header`]:{"\n          &,\n          & > .arrow\n        ":{color:d,cursor:"not-allowed"}},[`&${t}-icon-position-end`]:{[`& > ${t}-item`]:{[`> ${t}-header`]:{[`${t}-expand-icon`]:{order:1,paddingInlineEnd:0,paddingInlineStart:u}}}}})}},gt=n=>{const{componentCls:t}=n,o=`> ${t}-item > ${t}-header ${t}-arrow`;return{[`${t}-rtl`]:{[o]:{transform:"rotate(180deg)"}}}},yt=n=>{const{componentCls:t,headerBg:o,borderlessContentPadding:i,borderlessContentBg:p,colorBorder:f}=n;return{[`${t}-borderless`]:{backgroundColor:o,border:0,[`> ${t}-item`]:{borderBottom:`1px solid ${f}`},[`
        > ${t}-item:last-child,
        > ${t}-item:last-child ${t}-header
      `]:{borderRadius:0},[`> ${t}-item:last-child`]:{borderBottom:0},[`> ${t}-item > ${t}-content`]:{backgroundColor:p,borderTop:0},[`> ${t}-item > ${t}-content > ${t}-content-box`]:{padding:i}}}},xt=n=>{const{componentCls:t,paddingSM:o}=n;return{[`${t}-ghost`]:{backgroundColor:"transparent",border:0,[`> ${t}-item`]:{borderBottom:0,[`> ${t}-content`]:{backgroundColor:"transparent",border:0,[`> ${t}-content-box`]:{paddingBlock:o}}}}}},vt=n=>({headerPadding:`${n.paddingSM}px ${n.padding}px`,headerBg:n.colorFillAlter,contentPadding:`${n.padding}px 16px`,contentBg:n.colorBgContainer,borderlessContentPadding:`${n.paddingXXS}px 16px ${n.padding}px`,borderlessContentBg:"transparent"}),Ct=He("Collapse",n=>{const t=Fe(n,{collapseHeaderPaddingSM:`${V(n.paddingXS)} ${V(n.paddingSM)}`,collapseHeaderPaddingLG:`${V(n.padding)} ${V(n.paddingLG)}`,collapsePanelBorderRadius:n.borderRadiusLG});return[ht(t),yt(t),xt(t),gt(t),De(t)]},vt),bt=b.forwardRef((n,t)=>{const{getPrefixCls:o,direction:i,expandIcon:p,className:f,style:c}=Xe("collapse"),{prefixCls:y,className:h,rootClassName:I,style:P,bordered:x=!0,ghost:m,size:l,expandIconPosition:d="start",children:j,destroyInactivePanel:S,destroyOnHidden:v,expandIcon:u}=n,$=Ye(B=>{var O;return(O=l??B)!==null&&O!==void 0?O:"middle"}),a=o("collapse",y),w=o(),[g,k,R]=Ct(a),N=b.useMemo(()=>d==="left"?"start":d==="right"?"end":d,[d]),T=u??p,z=b.useCallback((B={})=>{const O=typeof T=="function"?T(B):b.createElement(Je,{rotate:B.isActive?i==="rtl"?-90:90:void 0,"aria-label":B.isActive?"expanded":"collapsed"});return pe(O,()=>{var M;return{className:L((M=O.props)===null||M===void 0?void 0:M.className,`${a}-arrow`)}})},[T,a,i]),G=L(`${a}-icon-position-${N}`,{[`${a}-borderless`]:!x,[`${a}-rtl`]:i==="rtl",[`${a}-ghost`]:!!m,[`${a}-${$}`]:$!=="middle"},f,h,I,k,R),U=b.useMemo(()=>Object.assign(Object.assign({},Qe(w)),{motionAppear:!1,leavedClassName:`${a}-content-hidden`}),[w,a]),Y=b.useMemo(()=>j?Pe(j).map((B,O)=>{var M,W;const K=B.props;if(K?.disabled){const oe=(M=B.key)!==null&&M!==void 0?M:String(O),ie=Object.assign(Object.assign({},he(B.props,["disabled"])),{key:oe,collapsible:(W=K.collapsible)!==null&&W!==void 0?W:"disabled"});return pe(B,ie)}return B}):null,[j]);return g(b.createElement(de,Object.assign({ref:t,openMotion:U},he(n,["rootClassName"]),{expandIcon:z,prefixCls:a,className:G,style:Object.assign(Object.assign({},c),P),destroyInactivePanel:v??S}),Y))}),jt=Object.assign(bt,{Panel:pt});var $t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"};function le(){return le=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])}return n},le.apply(this,arguments)}const It=(n,t)=>b.createElement(Ue,le({},n,{ref:t,icon:$t})),St=b.forwardRef(It),{Title:X,Text:C,Paragraph:Pt}=et,{Panel:an}=jt,{Content:wt}=we;function ln({service:n,selectedExtras:t,date:o,time:i,consentSettings:p,auth:f}){const[c,y]=b.useState([]),[h,I]=b.useState(null),[P,x]=b.useState(!1),[m,l]=b.useState(""),[d,j]=b.useState(""),[S,v]=b.useState(!1),[u,$]=b.useState(!1),[a,w]=b.useState(!1),[g,k]=b.useState(!1),[R,N]=b.useState(!1),[T,z]=b.useState("");b.useEffect(()=>{f&&f.user&&f.user.phone_number&&($(!0),w(!0),l(f.user.phone_number)),W()},[f]);const G=()=>{const r=t.map(s=>s.id);me.visit(route("booking.select-datetime"),{data:{service_id:n.id,extras:r}})},U=()=>{const r=p.filter(_=>_.is_required),s=r.every(_=>c.includes(_.id));if(console.log("handleContinue called",{allRequiredAccepted:s,otpVerified:u,verificationCompleted:a,requiredConsents:r.length,acceptedConsents:c.length}),!s){q.error("Please accept all required agreements to continue");return}if(r.length>0&&!u&&!a){console.log("Showing phone verification modal"),N(!0);return}a&&!u&&$(!0),console.log("Proceeding to confirmation page");const E=t.map(_=>_.id),te=c,J={service_id:n.id,extras:E,date:o,time:i,consents:te};(u||a)&&m&&(J.verified_phone=m),console.log("Navigating to confirm page with data:",J),me.visit(route("booking.confirm"),{data:J})},Y=r=>{I(r),x(!0)},B=r=>{y(s=>s.includes(r)?s.filter(E=>E!==r):[...s,r])},O=()=>{const r=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");return r||(console.error("CSRF token not found in meta tag"),q.error("CSRF token not found. Please refresh the page."),null)},M=()=>{q.error("Session expired. Please refresh the page and try again.")},W=async()=>{const r=O();if(!r)return!1;try{const s=await fetch(route("test-csrf"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":r,Accept:"application/json"}});return s.ok?(console.log("CSRF token is valid"),!0):(console.error("CSRF token validation failed:",s.status),!1)}catch(s){return console.error("Error testing CSRF token:",s),!1}},K=async()=>{if(!m||m.length<10){q.error("Please enter a valid phone number");return}const r=O();if(r)try{k(!0);const s=await fetch(route("booking.send-otp"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":r,Accept:"application/json"},body:JSON.stringify({phone_number:m})});if(!s.ok){if(s.status===419){M();return}const te=await s.json().catch(()=>({}));q.error(te.error||"Failed to send OTP");return}const E=await s.json();q.success("OTP sent successfully to your phone number"),v(!0),E.otp&&z(E.otp)}catch(s){console.error("Error sending OTP:",s),q.error("Failed to send OTP")}finally{k(!1)}},oe=async()=>{if(!d||d.length!==6){q.error("Please enter a valid 6-digit OTP");return}const r=O();if(r)try{k(!0);const s=await fetch(route("customer.login"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":r,Accept:"application/json"},body:JSON.stringify({phone_number:m,otp:d})});if(!s.ok){if(s.status===419){M();return}const _=await s.json().catch(()=>({}));q.error(_.error||"Invalid OTP");return}const E=await s.json();q.success("Phone number verified successfully!"),$(!0),w(!0),N(!1),E.formatted_phone&&l(E.formatted_phone),E.user;const J=p.filter(_=>_.is_required).find(_=>!c.includes(_.id));J&&y(_=>[..._,J.id])}catch(s){console.error("Error verifying OTP:",s),q.error("Failed to verify OTP")}finally{k(!1)}},ie=()=>{N(!1),l(""),j(""),v(!1),$(!1),w(!1)},se=r=>`₹${parseFloat(r).toFixed(2)}`,Ne=r=>{if(r<60)return`${r} min`;{const s=Math.floor(r/60),E=r%60;return E>0?`${s}h ${E}m`:`${s}h`}},Ae=r=>fe(r,"HH:mm").format("h:mm A"),Te=r=>fe(r).format("dddd, MMMM D, YYYY"),F=p.filter(r=>r.is_required),ce=p.filter(r=>!r.is_required),Z=F.every(r=>c.includes(r.id));return e.jsxs(we,{style:{minHeight:"100vh"},children:[e.jsx(Oe,{title:"Consent & Terms - Book Appointment"}),e.jsx(Be,{auth:f}),e.jsx(wt,{children:e.jsxs("div",{style:{maxWidth:1200,margin:"0 auto",padding:"24px"},children:[e.jsx("div",{className:"mobile-top-spacing"}),e.jsxs("div",{style:{textAlign:"center",marginBottom:48},children:[e.jsx(Ze,{variant:"primary",color:"color",background:"white",size:"large"}),e.jsx(X,{level:2,style:{marginTop:24,marginBottom:8},children:"Consent & Terms"}),e.jsx(C,{type:"secondary",style:{fontSize:16},children:"Please review and accept our terms and conditions"})]}),e.jsxs("div",{style:{marginBottom:32},children:[e.jsx(tt,{percent:80,showInfo:!1,strokeColor:"#1890ff",trailColor:"#f0f0f0"}),e.jsx("div",{style:{textAlign:"center",marginTop:8},children:e.jsx(C,{type:"secondary",children:"Step 4 of 5"})})]}),e.jsxs(nt,{gutter:[32,32],children:[e.jsxs(ge,{xs:24,lg:16,children:[F.length>0&&e.jsxs(ne,{style:{marginBottom:24},children:[e.jsxs(X,{level:4,style:{marginBottom:16},children:[e.jsx(ye,{style:{marginRight:8,color:"#ff4d4f"}}),"Required Agreements"]}),F.map(r=>{const s=c.includes(r.id);return e.jsx("div",{style:{marginBottom:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",padding:16,border:"1px solid #f0f0f0",borderRadius:8,backgroundColor:s?"#f6ffed":"white"},children:[e.jsx(xe,{checked:s,onChange:()=>B(r.id),style:{marginRight:12,marginTop:2}}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[e.jsx(X,{level:5,style:{margin:0},children:r.title}),e.jsxs(ve,{children:[e.jsx(ae,{color:"red",children:"Required"}),e.jsx(H,{type:"text",size:"small",icon:e.jsx(Ce,{}),onClick:()=>Y(r),children:"View"})]})]}),r.summary&&e.jsx(C,{type:"secondary",style:{fontSize:14},children:r.summary})]})]})},r.id)})]}),ce.length>0&&e.jsxs(ne,{children:[e.jsxs(X,{level:4,style:{marginBottom:16},children:[e.jsx(ye,{style:{marginRight:8,color:"#1890ff"}}),"Optional Agreements"]}),ce.map(r=>{const s=c.includes(r.id);return e.jsx("div",{style:{marginBottom:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",padding:16,border:"1px solid #f0f0f0",borderRadius:8,backgroundColor:s?"#f6ffed":"white"},children:[e.jsx(xe,{checked:s,onChange:()=>B(r.id),style:{marginRight:12,marginTop:2}}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[e.jsx(X,{level:5,style:{margin:0},children:r.title}),e.jsxs(ve,{children:[e.jsx(ae,{color:"blue",children:"Optional"}),e.jsx(H,{type:"text",size:"small",icon:e.jsx(Ce,{}),onClick:()=>Y(r),children:"View"})]})]}),r.summary&&e.jsx(C,{type:"secondary",style:{fontSize:14},children:r.summary})]})]})},r.id)})]}),p.length===0&&e.jsx(ne,{children:e.jsx(ee,{message:"No consent documents available",description:"There are no terms and conditions to review at this time.",type:"info",showIcon:!0})})]}),e.jsx(ge,{xs:24,lg:8,children:e.jsxs(ne,{style:{position:"sticky",top:24},children:[e.jsx(X,{level:4,style:{marginBottom:16},children:"Booking Summary"}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsx(C,{strong:!0,children:n.name}),e.jsx(C,{children:se(n.price)})]}),e.jsx(C,{type:"secondary",style:{fontSize:12},children:Ne(n.duration)})]}),t.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(re,{style:{margin:"12px 0"}}),t.map(r=>e.jsx("div",{style:{marginBottom:8},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(C,{children:["+ ",r.name]}),e.jsx(C,{children:se(r.price)})]})},r.id))]}),e.jsx(re,{style:{margin:"16px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsx(C,{strong:!0,children:"Total Price"}),e.jsx(C,{strong:!0,style:{fontSize:16},children:se(parseFloat(n.price)+t.reduce((r,s)=>r+parseFloat(s.price),0))})]}),e.jsx(re,{style:{margin:"16px 0"}}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(C,{type:"secondary",children:"Appointment Date"}),e.jsx("div",{children:e.jsx(C,{strong:!0,children:Te(o)})})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(C,{type:"secondary",children:"Appointment Time"}),e.jsx("div",{children:e.jsx(C,{strong:!0,children:Ae(i)})})]}),e.jsx(re,{style:{margin:"16px 0"}}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(C,{type:"secondary",children:"Required Agreements"}),e.jsx("div",{children:e.jsxs(C,{strong:!0,style:{color:Z?"#52c41a":"#ff4d4f"},children:[c.filter(r=>F.find(s=>s.id===r)).length," ","of ",F.length," ","accepted"]})})]}),F.length>0&&e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(C,{type:"secondary",children:"Phone Verification"}),e.jsx("div",{children:e.jsx(C,{strong:!0,style:{color:u?"#52c41a":"#ff4d4f"},children:u?"✓ Verified":"✗ Not Verified"})})]}),e.jsxs("div",{style:{marginTop:24},children:[e.jsx(H,{block:!0,style:{marginBottom:12},icon:e.jsx(rt,{}),onClick:G,children:"Back to Date & Time"}),e.jsx(H,{type:"primary",block:!0,size:"large",icon:e.jsx(ot,{}),onClick:U,disabled:!Z||g,loading:g,children:F.length>0&&!u?"Verify Phone Number":"Continue to Confirmation"})]}),!Z&&e.jsx(ee,{message:"Required agreements not accepted",description:"Please accept all required terms and conditions to continue.",type:"warning",showIcon:!0,style:{marginTop:16}}),Z&&!u&&F.length>0&&e.jsx(ee,{message:"Phone verification required",description:"Please verify your phone number to continue with the booking.",type:"warning",showIcon:!0,style:{marginTop:16}}),Z&&u&&e.jsx(ee,{message:"All requirements completed",description:"You can now proceed to the confirmation page.",type:"success",showIcon:!0,style:{marginTop:16}})]})})]}),e.jsx(be,{title:h?.title,open:P,onCancel:()=>x(!1),footer:[e.jsx(H,{onClick:()=>x(!1),children:"Close"},"close")],width:800,children:h&&e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(ae,{color:h.is_required?"red":"blue",children:h.is_required?"Required":"Optional"}),e.jsxs(C,{type:"secondary",style:{marginLeft:8},children:["Version ",h.version]})]}),e.jsx("div",{style:{maxHeight:400,overflowY:"auto",padding:16,border:"1px solid #f0f0f0",borderRadius:8,backgroundColor:"#fafafa"},children:e.jsx(Pt,{style:{whiteSpace:"pre-line",margin:0},children:h.content})})]})}),e.jsx(be,{title:e.jsxs("div",{style:{textAlign:"center",padding:"8px 0"},children:[e.jsx("div",{style:{width:60,height:60,borderRadius:"50%",backgroundColor:"#f0f8ff",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",border:"2px solid #e6f7ff"},children:e.jsx($e,{style:{fontSize:28,color:"#1890ff"}})}),e.jsx(X,{level:3,style:{margin:0,color:"#262626"},children:"Phone Verification"})]}),open:R,onCancel:ie,footer:null,width:480,closable:!g,centered:!0,style:{top:20},styles:{body:{padding:"32px 24px"}},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("div",{style:{marginBottom:32},children:[e.jsx(C,{type:"secondary",style:{fontSize:16,lineHeight:1.6,color:"#595959"},children:S?`We've sent a 6-digit code to ${m}`:"Enter your phone number to receive a verification code"}),S&&T&&e.jsx(ee,{message:"Testing Mode - OTP Code",description:`Your verification code is: ${T}`,type:"info",showIcon:!0,style:{marginTop:16}})]}),S?e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:32},children:[e.jsxs("div",{style:{position:"relative",display:"flex",justifyContent:"center",gap:8,marginBottom:16},children:[e.jsx(je,{size:"large",placeholder:"Enter 6-digit code",value:d,onChange:r=>j(r.target.value),maxLength:6,style:{position:"absolute",opacity:0,zIndex:10,width:"100%",height:"100%"},autoFocus:!0}),[0,1,2,3,4,5].map(r=>e.jsx("div",{style:{width:48,height:56,border:"2px solid #d9d9d9",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,fontWeight:600,backgroundColor:d[r]?"#f6ffed":"#fafafa",borderColor:d[r]?"#52c41a":"#d9d9d9",transition:"all 0.2s ease",cursor:"text"},children:d[r]||""},r))]}),e.jsx(C,{type:"secondary",style:{fontSize:14},children:"Enter the 6-digit verification code"})]}),e.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"center"},children:[e.jsx(H,{onClick:()=>{v(!1),j("")},disabled:g,style:{height:44,borderRadius:8,border:"1px solid #d9d9d9",color:"#595959"},children:"Change Number"}),e.jsx(H,{type:"primary",icon:e.jsx(it,{}),onClick:oe,loading:g,disabled:!d||d.length!==6,style:{height:44,borderRadius:8,background:"linear-gradient(135deg, #52c41a 0%, #389e0d 100%)",border:"none",boxShadow:"0 4px 12px rgba(82, 196, 26, 0.3)"},children:g?"Verifying...":"Verify Code"})]}),e.jsx("div",{style:{marginTop:24},children:e.jsxs(C,{type:"secondary",style:{fontSize:12},children:["Didn't receive the code?"," ",e.jsx(H,{type:"link",size:"small",style:{padding:0,height:"auto"},onClick:K,disabled:g,children:"Resend"})]})})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsx("div",{style:{position:"relative",marginBottom:8},children:e.jsx(je,{size:"large",placeholder:"+91 98765 43210",prefix:e.jsx($e,{style:{color:"#bfbfbf"}}),value:m,onChange:r=>l(r.target.value),style:{height:48,fontSize:16,borderRadius:8,border:"1px solid #d9d9d9"}})}),e.jsx(C,{type:"secondary",style:{fontSize:12},children:"We'll send you a verification code via SMS"})]}),e.jsx(H,{type:"primary",size:"large",icon:e.jsx(St,{}),onClick:K,loading:g,disabled:!m||m.length<10,style:{height:48,fontSize:16,fontWeight:500,borderRadius:8,width:"100%",background:"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)",border:"none",boxShadow:"0 4px 12px rgba(24, 144, 255, 0.3)"},children:g?"Sending...":"Send Verification Code"})]})]})})]})})]})}export{ln as default};
