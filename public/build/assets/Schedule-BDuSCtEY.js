import{r as f,j as e,H as E,a as p}from"./app-DEDll9AR.js";import{d as y}from"./dayjs.min-oV3UgmnJ.js";import{A as F}from"./AdminLayout-DiEZ2B35.js";import{F as s}from"./index-CNVZPylv.js";import{C as P,T as A,B as h,R as m,a as r}from"./Logo-B-N0zWbR.js";import{F as M}from"./Table-CNImRVhP.js";import{R}from"./PlusOutlined-g136DRi-.js";import{M as B}from"./index-uM4vXguI.js";import{I as w}from"./index-BDWaNcMD.js";import{T as l}from"./index-CzJqx6VE.js";import{D as x}from"./index-DBRdJP7-.js";import{T as g}from"./index-BnfRF0kH.js";import{C as q}from"./index-BXZuxNhI.js";import{S as W}from"./index-DQPVsnOL.js";import{T as _}from"./index-ClulcKCA.js";import{R as z}from"./ClockCircleOutlined-CXxhKNjU.js";import{S as N}from"./index-BmgT4Ulx.js";import{R as O}from"./EditOutlined-BWiQOlm9.js";import{P as $}from"./index-BkJCwme6.js";import{R as V}from"./DeleteOutlined-cHc3_kg0.js";/* empty css            */import"./index-D0T4vDnu.js";import"./PurePanel-DI_1_OwW.js";import"./move-CESINLyB.js";import"./CalendarOutlined-D-mS0-JV.js";import"./FileTextOutlined-CJliSb57.js";import"./useForm-C6D9L30Q.js";import"./CheckCircleFilled-z0b-rEXZ.js";import"./InfoCircleFilled-DvigaNyv.js";import"./pickAttrs-BiP3ANKa.js";import"./addEventListener-D4ymVQd_.js";import"./index-CvJdu2Nc.js";import"./index-bloQYPn8.js";import"./Input-DQrPDwVw.js";import"./index-D6vFq78i.js";import"./index-bm3QRPu0.js";import"./EyeOutlined-B78wcFKQ.js";const{Title:G,Text:c}=A,{TextArea:J}=w;function Fe({auth:K,scheduleSettings:b,services:L}){const[k,d]=f.useState(!1),[o,u]=f.useState(null),[a]=s.useForm(),v=[{label:"Monday",value:1},{label:"Tuesday",value:2},{label:"Wednesday",value:3},{label:"Thursday",value:4},{label:"Friday",value:5},{label:"Saturday",value:6},{label:"Sunday",value:7}],S=()=>{u(null),a.resetFields(),a.setFieldsValue({working_days:[1,2,3,4,5],break_times:[],is_active:!0}),d(!0)},I=t=>{u(t),a.setFieldsValue({name:t.name,description:t.description,booking_window_days:t.booking_window_days,min_advance_hours:t.min_advance_hours,max_advance_days:t.max_advance_days,buffer_time_minutes:t.buffer_time_minutes,start_time:t.start_time?y(t.start_time,"HH:mm"):null,end_time:t.end_time?y(t.end_time,"HH:mm"):null,working_days:t.working_days||[1,2,3,4,5],break_times:t.break_times||[],is_active:t.is_active,sort_order:t.sort_order}),d(!0)},T=()=>{a.validateFields().then(t=>{const i=new FormData;t.start_time&&i.append("start_time",t.start_time.format("HH:mm:ss")),t.end_time&&i.append("end_time",t.end_time.format("HH:mm:ss")),t.working_days&&t.working_days.forEach(n=>{i.append("working_days[]",n)}),t.break_times&&t.break_times.forEach((n,j)=>{i.append(`break_times[${j}][start]`,n.start),i.append(`break_times[${j}][end]`,n.end)}),Object.keys(t).forEach(n=>{["start_time","end_time","working_days","break_times"].includes(n)||i.append(n,t[n]||"")}),o?p.put(route("admin.schedule.update",o.id),i):p.post(route("admin.schedule.store"),i),d(!1)})},H=()=>{d(!1),u(null),a.resetFields()},C=t=>{p.post(route("admin.schedule.delete",t))},D=[{title:"Name",dataIndex:"name",key:"name",render:(t,i)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:t}),i.description&&e.jsx(c,{type:"secondary",style:{fontSize:"12px"},children:i.description})]})},{title:"Booking Window",key:"booking_window",render:(t,i)=>e.jsxs("div",{children:[e.jsx("div",{children:e.jsxs(_,{color:"blue",children:[i.booking_window_days," days ahead"]})}),e.jsxs(c,{type:"secondary",style:{fontSize:"12px"},children:["Min: ",i.min_advance_hours,"h advance"]})]})},{title:"Working Hours",key:"working_hours",render:(t,i)=>e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx(z,{})," ",i.start_time," -"," ",i.end_time]}),e.jsx(c,{type:"secondary",style:{fontSize:"12px"},children:i.working_days_text})]})},{title:"Buffer Time",key:"buffer_time",render:(t,i)=>e.jsxs("div",{children:[e.jsx("div",{children:e.jsxs(_,{color:"green",children:[i.buffer_time_minutes," min buffer"]})}),e.jsx(c,{type:"secondary",style:{fontSize:"12px"},children:"Between appointments"})]})},{title:"Status",dataIndex:"is_active",key:"is_active",render:t=>e.jsx(_,{color:t?"green":"red",children:t?"Active":"Inactive"})},{title:"Actions",key:"actions",render:(t,i)=>e.jsxs(N,{children:[e.jsx(h,{type:"text",icon:e.jsx(O,{}),onClick:()=>I(i),title:"Edit Schedule"}),e.jsx($,{title:"Are you sure you want to delete this schedule?",onConfirm:()=>C(i.id),okText:"Yes",cancelText:"No",children:e.jsx(h,{type:"text",danger:!0,icon:e.jsx(V,{}),title:"Delete Schedule"})})]})}];return e.jsxs(F,{children:[e.jsx(E,{title:"Schedule Settings"}),e.jsxs("div",{children:[e.jsx(P,{title:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(G,{level:3,style:{margin:0},children:"Schedule Settings"}),e.jsx(h,{type:"primary",icon:e.jsx(R,{}),onClick:S,children:"Add Schedule"})]}),children:e.jsx(M,{columns:D,dataSource:b,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0}})}),e.jsx(B,{title:o?"Edit Schedule":"Add Schedule",open:k,onOk:T,onCancel:H,width:800,okText:o?"Update":"Create",cancelText:"Cancel",children:e.jsxs(s,{form:a,layout:"vertical",children:[e.jsxs(m,{gutter:16,children:[e.jsx(r,{span:12,children:e.jsx(s.Item,{name:"name",label:"Schedule Name",rules:[{required:!0,message:"Please enter schedule name"}],children:e.jsx(w,{placeholder:"e.g., Default Schedule"})})}),e.jsx(r,{span:12,children:e.jsx(s.Item,{name:"sort_order",label:"Sort Order",children:e.jsx(l,{min:0,placeholder:"Enter sort order",style:{width:"100%"}})})})]}),e.jsx(s.Item,{name:"description",label:"Description",children:e.jsx(J,{rows:2,placeholder:"Enter schedule description"})}),e.jsx(x,{children:"Booking Window Settings"}),e.jsxs(m,{gutter:16,children:[e.jsx(r,{span:8,children:e.jsx(s.Item,{name:"booking_window_days",label:"Booking Window (Days)",rules:[{required:!0,message:"Please enter booking window"}],children:e.jsx(l,{min:1,max:365,placeholder:"30",style:{width:"100%"}})})}),e.jsx(r,{span:8,children:e.jsx(s.Item,{name:"min_advance_hours",label:"Min Advance (Hours)",rules:[{required:!0,message:"Please enter minimum advance"}],children:e.jsx(l,{min:0,max:168,placeholder:"2",style:{width:"100%"}})})}),e.jsx(r,{span:8,children:e.jsx(s.Item,{name:"max_advance_days",label:"Max Advance (Days)",rules:[{required:!0,message:"Please enter maximum advance"}],children:e.jsx(l,{min:1,max:365,placeholder:"90",style:{width:"100%"}})})})]}),e.jsx(x,{children:"Buffer Time Settings"}),e.jsx(m,{gutter:16,children:e.jsx(r,{span:8,children:e.jsx(s.Item,{name:"buffer_time_minutes",label:"Buffer Time (Minutes)",rules:[{required:!0,message:"Please enter buffer time"}],children:e.jsx(l,{min:0,max:60,step:5,placeholder:"15",style:{width:"100%"}})})})}),e.jsx(x,{children:"Working Hours"}),e.jsxs(m,{gutter:16,children:[e.jsx(r,{span:8,children:e.jsx(s.Item,{name:"start_time",label:"Start Time",rules:[{required:!0,message:"Please select start time"}],children:e.jsx(g,{format:"HH:mm",placeholder:"09:00",style:{width:"100%"}})})}),e.jsx(r,{span:8,children:e.jsx(s.Item,{name:"end_time",label:"End Time",rules:[{required:!0,message:"Please select end time"}],children:e.jsx(g,{format:"HH:mm",placeholder:"18:00",style:{width:"100%"}})})}),e.jsx(r,{span:8,children:e.jsx(s.Item,{name:"working_days",label:"Working Days",rules:[{required:!0,message:"Please select working days"}],children:e.jsx(q.Group,{options:v,style:{width:"100%"}})})})]}),e.jsx(s.Item,{name:"is_active",label:"Active",valuePropName:"checked",children:e.jsx(W,{})})]})})]})]})}export{Fe as default};
