import{r as f,j as e,a as n,H as T}from"./app-GHJ6SJ9p.js";import{T as $,B as r,a9 as M,aa as R,C as j}from"./Logo-CgCrcYaU.js";import{C as D}from"./CancelModal-V8HPvk4t.js";import{d as F}from"./dayjs.min-B4YUl899.js";import{L as C}from"./index-C_hlbVzA.js";import{S as m}from"./index-C4h3PxPQ.js";import{A as H,R as Y}from"./LogoutOutlined-Bdb2DG7j.js";import{s as g}from"./index-BceBb3gr.js";import{R as N}from"./ArrowLeftOutlined-DvgnW3XK.js";import{F as U}from"./Table-D-mWpawj.js";import{T as a}from"./index-Di36YMr6.js";import{E as W}from"./index-BHN9A3hJ.js";import{R as E}from"./BookOutlined-KgU2wRPd.js";import{R as L}from"./CalendarOutlined-DRjFhB-3.js";/* empty css            */import"./index-DQaT6v9B.js";import"./useForm-c8FVYlit.js";import"./row-CgwhhCUf.js";import"./CheckCircleFilled-C6274V1h.js";import"./InfoCircleFilled-BgQ81YM8.js";import"./index-BI7GSswp.js";import"./pickAttrs-BVXv29NF.js";import"./useClosable-C7FjKwvd.js";import"./extendsObject-78o_rR5W.js";import"./PurePanel-oknD4ArD.js";import"./index-C9xZ2qKj.js";import"./index-DshskHDl.js";import"./index-BKi5BDEi.js";import"./Input-Ba6sZIOH.js";import"./EyeOutlined-BUY3z7ff.js";import"./EyeOutlined-Bmd706kk.js";import"./ExclamationCircleOutlined-D4DdctsG.js";import"./index-DIcGKw6c.js";import"./addEventListener-DIGLTZCa.js";import"./index-CnMyniK2.js";import"./move-BQEn0wCQ.js";import"./DownOutlined-CnWx9RdQ.js";import"./index-Ckzs-oZH.js";import"./index-CFCYulKb.js";import"./index-DSrkMEKC.js";const{Title:v,Text:i}=$,{Header:P,Content:V}=C;function $e({auth:l,bookings:o}){const[k,c]=f.useState(!1),[w,d]=f.useState(null);if(!l||!l.user)return e.jsxs("div",{style:{padding:"24px",textAlign:"center"},children:[e.jsx(v,{level:2,children:"Access Denied"}),e.jsx(i,{children:"Please log in to view your bookings."}),e.jsx("br",{}),e.jsx(r,{type:"primary",onClick:()=>n.visit(route("welcome")),style:{marginTop:16},children:"Go to Home"})]});const p=t=>{switch(t){case"confirmed":return"success";case"pending":return"warning";case"completed":return"processing";case"cancelled":return"error";case"no_show":return"default";default:return"default"}},u=t=>{switch(t){case"paid":return"success";case"pending":return"warning";case"failed":return"error";case"refunded":return"default";default:return"default"}},x=t=>F(t).format("MMM DD, YYYY h:mm A"),h=t=>{if(t<60)return`${t} min`;{const s=Math.floor(t/60),y=t%60;return y>0?`${s}h ${y}m`:`${s}h`}},S=t=>t?t.split(" ").map(s=>s[0]).join("").toUpperCase().slice(0,2):"CU",_=t=>{d(t),c(!0)},B=t=>{c(!1),d(null),g.success("Booking cancelled successfully"),window.location.reload()},I=()=>{c(!1),d(null)},b=()=>{n.post(route("logout"),{},{onSuccess:()=>{window.location.reload()}})},z=[{key:"services",icon:e.jsx(E,{}),label:"Services",onClick:()=>n.visit(route("booking.select-service"))},{key:"bookings",icon:e.jsx(L,{}),label:"Your Bookings"}],A=[{title:"Service",dataIndex:"service",key:"service",render:t=>t?.name||"N/A",responsive:["md"]},{title:"Employee",dataIndex:"employee",key:"employee",render:t=>t?.name||"Auto-assigned",responsive:["lg"]},{title:"Date & Time",dataIndex:"appointment_time",key:"appointment_time",render:t=>x(t)},{title:"Duration",dataIndex:"duration",key:"duration",render:t=>h(t),responsive:["md"]},{title:"Status",dataIndex:"status",key:"status",render:t=>e.jsx(a,{color:p(t),children:t.charAt(0).toUpperCase()+t.slice(1)})},{title:"Payment",dataIndex:"payment_status",key:"payment_status",render:t=>e.jsx(a,{color:u(t),children:t.charAt(0).toUpperCase()+t.slice(1)}),responsive:["md"]},{title:"Amount",dataIndex:"total_amount",key:"total_amount",render:t=>`₹${parseFloat(t).toFixed(2)}`,responsive:["sm"]},{title:"Reschedule",key:"reschedule",render:(t,s)=>e.jsx("div",{children:s.reschedule_attempts>0?e.jsxs(m,{direction:"vertical",size:"small",children:[e.jsxs(i,{type:"secondary",style:{fontSize:"12px"},children:[s.reschedule_attempts," time(s)"]}),s.reschedule_payment_amount>0&&e.jsxs(i,{type:"secondary",style:{fontSize:"12px",color:"#52c41a"},children:["Fee: ₹",s.reschedule_payment_amount]})]}):e.jsx(i,{type:"secondary",style:{fontSize:"12px"},children:"Never"})}),responsive:["md"]},{title:"Actions",key:"actions",render:(t,s)=>e.jsxs(m,{children:[e.jsx(r,{size:"small",onClick:()=>n.visit(route("customer.bookings.show",s.id)),children:"View"}),(s.status==="pending"||s.status==="confirmed")&&e.jsx(r,{size:"small",danger:!0,onClick:()=>_(s),children:"Cancel"})]})}];return e.jsxs(C,{style:{minHeight:"100vh"},children:[e.jsx(T,{title:"Your Bookings - HospiPal"}),e.jsxs(P,{style:{background:"#fff",padding:"0 16px",display:"flex",alignItems:"center",justifyContent:"space-between",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",height:"auto",minHeight:64,maxWidth:"100vw",width:"100%",overflow:"hidden"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",flexShrink:0,minWidth:0},children:e.jsx(M,{variant:"primary",color:"color",background:"white",size:"medium"})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flex:1,justifyContent:"flex-end",minWidth:0,overflow:"hidden"},children:[e.jsx(R,{mode:"horizontal",items:z,selectedKeys:["bookings"],style:{border:"none",background:"transparent",fontSize:"14px",minWidth:0,flexShrink:1,maxWidth:"100%"}}),e.jsxs(m,{size:"small",style:{flexShrink:0},children:[e.jsx(H,{style:{backgroundColor:"#1890ff",cursor:"pointer"},onClick:()=>g.info("Profile settings coming soon"),children:S(l.user?.name)}),e.jsx(r,{type:"text",icon:e.jsx(Y,{}),onClick:b,size:"small",children:e.jsx("span",{className:"hidden-xs",children:"Logout"})})]})]})]}),e.jsx(V,{style:{padding:"16px"},children:e.jsxs("div",{style:{maxWidth:1200,margin:"0 auto"},children:[e.jsx("div",{className:"mobile-top-spacing"}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsx(r,{icon:e.jsx(N,{}),onClick:()=>n.visit(route("welcome")),style:{marginBottom:16},children:"Back to Home"}),e.jsx(v,{level:2,style:{marginBottom:8},children:"Your Bookings"}),e.jsx(i,{type:"secondary",children:"View and manage all your appointments"})]}),e.jsx(j,{children:o&&o.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden-xs",children:e.jsx(U,{columns:A,dataSource:o,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(t,s)=>`${s[0]}-${s[1]} of ${t} bookings`}})}),e.jsx("div",{className:"visible-xs",children:o.map(t=>e.jsxs(j,{style:{marginBottom:16},styles:{body:{padding:16}},children:[e.jsxs("div",{style:{marginBottom:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:8},children:[e.jsx(i,{strong:!0,style:{fontSize:16},children:t.service?.name}),e.jsx(a,{color:p(t.status),children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]}),e.jsx(i,{type:"secondary",children:x(t.appointment_time)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[e.jsxs("div",{children:[e.jsxs(i,{type:"secondary",children:["Duration:"," "]}),e.jsx(i,{children:h(t.duration)})]}),e.jsxs("div",{children:[e.jsxs(i,{type:"secondary",children:["Amount:"," "]}),e.jsxs(i,{strong:!0,children:["₹",parseFloat(t.total_amount).toFixed(2)]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(a,{color:u(t.payment_status),children:t.payment_status.charAt(0).toUpperCase()+t.payment_status.slice(1)}),e.jsx(r,{size:"small",type:"primary",onClick:()=>n.visit(route("customer.bookings.show",t.id)),children:"View Details"})]})]},t.id))})]}):e.jsx(W,{description:"No bookings found",style:{padding:"40px 0"},children:e.jsx(r,{type:"primary",onClick:()=>n.visit(route("booking.select-service")),children:"Book Your First Appointment"})})})]})}),e.jsx(D,{visible:k,onCancel:I,onSuccess:B,booking:w})]})}export{$e as default};
