import{r as c,j as e,a as m}from"./app-BA7by1EP.js";import{F as r,I as p}from"./index-CGSh92UT.js";import{a as ee,d as te,T as ie,B as a,b as le}from"./SettingOutlined-Z3C5fP-7.js";import{F as S,S as w}from"./Table-Wfepau0O.js";import{R as C}from"./PlusOutlined-imxDIpvd.js";import{M as T,R as E}from"./EditOutlined-B_Wxalx8.js";import{T as k}from"./index-S90Po-GT.js";import{S as _}from"./index-DHv4hztg.js";import{T as n}from"./index-C2m6lP5V.js";import{S as A}from"./index-DBoILsXb.js";import{R as re}from"./EyeOutlined-CT3vUkmD.js";import{P as M}from"./index-DN244ch6.js";import{R as P}from"./DeleteOutlined-BK-DMYmT.js";/* empty css            */import"./Input-Bsa4J8jQ.js";import"./CheckCircleFilled-_KBAN88a.js";import"./EyeOutlined-DAC7kkoL.js";import"./pickAttrs-UXPnEPeG.js";import"./addEventListener-C4wz7XiZ.js";import"./index-U6fO8HFV.js";const{Title:V,Text:q}=ie,{TextArea:R}=p;function Se({forms:N,services:O,fieldTypes:v}){const[D,x]=c.useState(!1),[z,u]=c.useState(!1),[j,f]=c.useState(!1),[s,h]=c.useState(null),[y,F]=c.useState(null),[o]=r.useForm(),[d]=r.useForm(),[$,g]=c.useState("1"),B=()=>{h(null),f(!1),o.resetFields(),x(!0)},K=t=>{h(t),f(!1),o.setFieldsValue({name:t.name,description:t.description,is_active:t.is_active,sort_order:t.sort_order,services:t.services?.map(i=>i.id)||[]}),x(!0)},J=t=>{h(t),f(!0),o.setFieldsValue({name:t.name,description:t.description,is_active:t.is_active,sort_order:t.sort_order,services:t.services?.map(i=>i.id)||[]}),x(!0)},L=()=>{o.validateFields().then(t=>{const i=new FormData;Object.keys(t).forEach(l=>{l==="services"?t[l]&&t[l].length>0&&t[l].forEach(b=>{i.append("services[]",b)}):i.append(l,t[l]||"")}),s?m.put(route("admin.forms.update",s.id),i):m.post(route("admin.forms.store"),i),x(!1)})},I=()=>{x(!1),h(null),f(!1),o.resetFields()},Q=()=>{F(null),d.resetFields(),d.setFieldsValue({form_id:s?.id,type:"text",is_required:!1,is_primary:!1,sort_order:0}),u(!0)},U=t=>{F(t),d.setFieldsValue({form_id:t.form_id,label:t.label,name:t.name,type:t.type,placeholder:t.placeholder,help_text:t.help_text,is_required:t.is_required,is_primary:t.is_primary,sort_order:t.sort_order,options:t.options||[],validation_rules:t.validation_rules||[]}),u(!0)},Y=()=>{d.validateFields().then(t=>{const i=new FormData;Object.keys(t).forEach(l=>{l==="options"||l==="validation_rules"?t[l]&&t[l].length>0&&t[l].forEach(b=>{i.append(`${l}[]`,b)}):i.append(l,t[l]||"")}),y?m.put(route("admin.form-fields.update",y.id),i):m.post(route("admin.form-fields.store"),i),u(!1)})},H=()=>{u(!1),F(null),d.resetFields()},W=t=>{m.post(route("admin.forms.delete",t))},G=t=>{m.post(route("admin.form-fields.delete",t))},X=[{title:"Name",dataIndex:"name",key:"name",render:(t,i)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:t}),i.description&&e.jsx(q,{type:"secondary",style:{fontSize:"12px"},children:i.description})]})},{title:"Fields",dataIndex:"fields",key:"fields",render:t=>e.jsxs("div",{children:[e.jsx("div",{children:e.jsxs(n,{color:"blue",children:[t?.length||0," fields"]})}),t&&t.length>0&&e.jsxs("div",{style:{marginTop:4},children:[t.slice(0,3).map((i,l)=>e.jsx(n,{size:"small",color:i.is_primary?"green":"default",children:i.label},l)),t.length>3&&e.jsxs(n,{size:"small",children:["+",t.length-3," more"]})]})]})},{title:"Services",dataIndex:"services",key:"services",render:t=>e.jsx("div",{children:t&&t.length>0?t.map((i,l)=>e.jsx(n,{color:"purple",children:i.name},l)):e.jsx(q,{type:"secondary",children:"No services"})})},{title:"Status",dataIndex:"is_active",key:"is_active",render:t=>e.jsx(n,{color:t?"green":"red",children:t?"Active":"Inactive"})},{title:"Actions",key:"actions",render:(t,i)=>e.jsxs(A,{children:[e.jsx(a,{type:"text",icon:e.jsx(re,{}),onClick:()=>J(i),title:"View Form"}),e.jsx(a,{type:"text",icon:e.jsx(E,{}),onClick:()=>K(i),title:"Edit Form"}),e.jsx(a,{type:"text",icon:e.jsx(le,{}),onClick:()=>{h(i),g("2")},title:"Manage Fields"}),e.jsx(M,{title:"Are you sure you want to delete this form?",onConfirm:()=>W(i.id),okText:"Yes",cancelText:"No",children:e.jsx(a,{type:"text",danger:!0,icon:e.jsx(P,{}),title:"Delete Form"})})]})}],Z=[{title:"Label",dataIndex:"label",key:"label"},{title:"Type",dataIndex:"type",key:"type",render:t=>e.jsx(n,{color:"blue",children:v[t]||t})},{title:"Required",dataIndex:"is_required",key:"is_required",render:t=>e.jsx(n,{color:t?"red":"default",children:t?"Required":"Optional"})},{title:"Primary",dataIndex:"is_primary",key:"is_primary",render:t=>e.jsx(n,{color:t?"green":"default",children:t?"Primary":"Custom"})},{title:"Actions",key:"actions",render:(t,i)=>e.jsxs(A,{children:[e.jsx(a,{type:"text",icon:e.jsx(E,{}),onClick:()=>U(i),title:"Edit Field"}),e.jsx(M,{title:"Are you sure you want to delete this field?",onConfirm:()=>G(i.id),okText:"Yes",cancelText:"No",children:e.jsx(a,{type:"text",danger:!0,icon:e.jsx(P,{}),title:"Delete Field"})})]})}];return e.jsxs("div",{children:[e.jsx(ee,{title:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(V,{level:3,style:{margin:0},children:"Forms Management"}),e.jsx(a,{type:"primary",icon:e.jsx(C,{}),onClick:B,children:"Add Form"})]}),children:e.jsx(te,{activeKey:$,onChange:g,items:[{key:"1",label:"Forms",children:e.jsx(S,{columns:X,dataSource:N,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0}})},...s?[{key:"2",label:"Form Fields",children:e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs(V,{level:4,children:["Fields for:"," ",s.name]}),e.jsx(a,{type:"primary",icon:e.jsx(C,{}),onClick:Q,children:"Add Field"})]}),e.jsx(S,{columns:Z,dataSource:s.fields||[],rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0}})]})}]:[]]})}),e.jsx(T,{title:j?"View Form":s?"Edit Form":"Add Form",open:D,onOk:j?I:L,onCancel:I,width:600,okText:j?"Close":s?"Update":"Create",cancelText:"Cancel",children:e.jsxs(r,{form:o,layout:"vertical",disabled:j,children:[e.jsx(r.Item,{name:"name",label:"Form Name",rules:[{required:!0,message:"Please enter form name"}],children:e.jsx(p,{placeholder:"Enter form name"})}),e.jsx(r.Item,{name:"description",label:"Description",children:e.jsx(R,{rows:3,placeholder:"Enter form description"})}),e.jsx(r.Item,{name:"services",label:"Associated Services",children:e.jsx(w,{mode:"multiple",placeholder:"Select services",options:O.map(t=>({label:t.name,value:t.id}))})}),e.jsx(r.Item,{name:"sort_order",label:"Sort Order",children:e.jsx(k,{min:0,placeholder:"Enter sort order",style:{width:"100%"}})}),e.jsx(r.Item,{name:"is_active",label:"Active",valuePropName:"checked",children:e.jsx(_,{})})]})}),e.jsx(T,{title:y?"Edit Field":"Add Field",open:z,onOk:Y,onCancel:H,width:600,okText:y?"Update":"Create",cancelText:"Cancel",children:e.jsxs(r,{form:d,layout:"vertical",children:[e.jsx(r.Item,{name:"form_id",hidden:!0,children:e.jsx(p,{})}),e.jsx(r.Item,{name:"label",label:"Field Label",rules:[{required:!0,message:"Please enter field label"}],children:e.jsx(p,{placeholder:"Enter field label"})}),e.jsx(r.Item,{name:"name",label:"Field Name",rules:[{required:!0,message:"Please enter field name"}],children:e.jsx(p,{placeholder:"Enter field name (e.g., phone_number)"})}),e.jsx(r.Item,{name:"type",label:"Field Type",rules:[{required:!0,message:"Please select field type"}],children:e.jsx(w,{placeholder:"Select field type",options:Object.entries(v).map(([t,i])=>({label:i,value:t}))})}),e.jsx(r.Item,{name:"placeholder",label:"Placeholder",children:e.jsx(p,{placeholder:"Enter placeholder text"})}),e.jsx(r.Item,{name:"help_text",label:"Help Text",children:e.jsx(R,{rows:2,placeholder:"Enter help text"})}),e.jsx(r.Item,{name:"is_required",label:"Required",valuePropName:"checked",children:e.jsx(_,{})}),e.jsx(r.Item,{name:"is_primary",label:"Primary Field (Phone, Name, Email)",valuePropName:"checked",children:e.jsx(_,{})}),e.jsx(r.Item,{name:"sort_order",label:"Sort Order",children:e.jsx(k,{min:0,placeholder:"Enter sort order",style:{width:"100%"}})})]})})]})}export{Se as default};
