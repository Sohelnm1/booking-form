import{r as R,j as e,a as E,H as _e}from"./app-CJqx2nlw.js";import{I as Se,C as _,T as le,B as y,aa as Re,ab as Ce}from"./Logo-BxrHS6GJ.js";import{d as p}from"./dayjs.min-ByW_Pquc.js";import{F as Be}from"./index-BkNtq0EW.js";import{s as f}from"./index-C302MrZq.js";import{M as Ie}from"./index-Be8JAZRx.js";import{R as Y,C as m}from"./row-BB7zYcZo.js";import{S as Z}from"./index-DiKTrVqn.js";import{T as N}from"./index-CV9a0vwC.js";import{A as k}from"./index-Cs2l_6CY.js";import{R as oe}from"./CalendarOutlined-B_C58u2P.js";import{R as Me}from"./ClockCircleOutlined-BkYPCbn9.js";import{E as ee}from"./index-CKTeyKnI.js";import{R as Te}from"./CheckOutlined-DSESVoxn.js";import{L as ae}from"./index-Bd_PfEaH.js";import{S as L}from"./index-as06zxLB.js";import{A as De,R as Pe}from"./LogoutOutlined-DaqdC0QT.js";import{R as Ye}from"./ArrowLeftOutlined-yKlQVHqx.js";import{R as Ae,a as ze}from"./PrinterOutlined-C-E5AyQf.js";import{D as Fe}from"./index-DLM9gAB5.js";import{R as te}from"./ExclamationCircleOutlined-C5px8iQo.js";import{R as se}from"./CloseCircleOutlined-D-Ydan5_.js";import{R as re}from"./CheckCircleOutlined-BNgPEE5D.js";import{R as $e}from"./BookOutlined-DilCI1Ob.js";/* empty css            */import"./useForm-BiSx87GW.js";import"./CheckCircleFilled-As6OzaIf.js";import"./InfoCircleFilled-C2YIh8OJ.js";import"./pickAttrs-Oxm3QeZq.js";import"./PurePanel-Db2cDM3B.js";import"./index-BSbgTexK.js";import"./DownloadOutlined-DTidZHln.js";var be={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"};function U(){return U=Object.assign?Object.assign.bind():function(j){for(var s=1;s<arguments.length;s++){var M=arguments[s];for(var l in M)Object.prototype.hasOwnProperty.call(M,l)&&(j[l]=M[l])}return j},U.apply(this,arguments)}const Ee=(j,s)=>R.createElement(Se,U({},j,{ref:s,icon:be})),We=R.forwardRef(Ee),{Title:ne,Text:w}=le;function Oe({visible:j,onCancel:s,onSuccess:M,booking:l,scheduleSettings:D=[]}){const[$]=Be.useForm(),[C,P]=R.useState(null),[T,B]=R.useState(null),[b,g]=R.useState([]),[W,A]=R.useState(!1),[H,O]=R.useState(!1),[o,S]=R.useState(p()),[c,ce]=R.useState(null);console.log("RescheduleModal component - Schedule settings:",{scheduleSettings:D,scheduleSettingsLength:D?.length,firstSchedule:D?.[0]}),l.service.duration+(l.extras?l.extras.reduce((t,n)=>t+(n.duration||0),0):0),R.useEffect(()=>{if(j&&l){de();const t=p(l.appointment_time);P(t),S(t),q(t)}},[j,l]);const de=async()=>{if(l){O(!0);try{const n=await(await fetch(route("customer.bookings.policy",l.id))).json();n.success?ce(n.data.policy):console.error("Failed to fetch policy info:",n.message)}catch(t){console.error("Error fetching policy info:",t)}finally{O(!1)}}},q=async t=>{if(!(!t||!l)){A(!0);try{const n=new URLSearchParams({date:t.format("YYYY-MM-DD"),service_id:l.service_id,exclude_booking_id:l.id});l.extras&&l.extras.length>0&&l.extras.forEach(d=>{n.append("extras[]",d.id)}),console.log("Reschedule modal - Request params:",n.toString());const a=await(await fetch(`${route("booking.available-slots")}?${n.toString()}`)).json();if(console.log("Reschedule modal - API response:",a),a.slots){console.log("Reschedule modal - Available slots:",a.slots);const d=p(l.appointment_time),u=a.slots.filter(v=>!p(C).hour(parseInt(v.start.split(":")[0])).minute(parseInt(v.start.split(":")[1])).isSame(d,"minute"));console.log("Reschedule modal - Filtered slots (excluding current):",u),g(u||[])}else g([]),f.error(a.message||a.error||"Failed to fetch available slots")}catch(n){console.error("Error fetching available slots:",n),g([]),f.error("Failed to fetch available slots")}finally{A(!1)}}},he=t=>{P(t),B(null),q(t)},me=t=>{B(t)},ue=async()=>{if(!C||!T){f.error("Please select both date and time");return}const t=p(C).hour(T.hour()).minute(T.minute()).second(0);A(!0);try{const i=await(await fetch(route("customer.bookings.reschedule",l.id),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({new_appointment_time:t.format("YYYY-MM-DD HH:mm:ss")})})).json();if(i.success)i.requires_payment?await pe(i.data):(f.success("Booking rescheduled successfully!"),M(i.data),$.resetFields(),P(null),B(null),g([]));else{const a=i.reason||i.message||"Failed to reschedule booking";f.error(a),console.error("Reschedule failed:",{message:i.message,reason:i.reason,details:i.details})}}catch(n){console.error("Error rescheduling booking:",n),f.error("Failed to reschedule booking")}finally{A(!1)}},pe=async t=>{try{window.Razorpay||await fe();const n={key:t.key_id,amount:t.amount,currency:t.currency,name:"Booking Reschedule Fee",description:`Reschedule fee for booking #${l.id}`,order_id:t.order_id,handler:async function(a){try{const u=await(await fetch(route("customer.reschedule.payment-success"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({razorpay_payment_id:a.razorpay_payment_id,razorpay_order_id:a.razorpay_order_id,razorpay_signature:a.razorpay_signature})})).json();u.success?(f.success("Booking rescheduled successfully!"),M(u.data),$.resetFields(),P(null),B(null),g([])):f.error(u.message||"Payment verification failed")}catch(d){console.error("Payment success handling failed:",d),f.error("Failed to verify payment")}},prefill:{name:l.customer?.name||"Customer",email:l.customer?.email||"",contact:l.customer?.phone_number||""},theme:{color:"#1890ff"},modal:{ondismiss:function(){xe()}}};new window.Razorpay(n).open()}catch(n){console.error("Payment setup failed:",n),f.error("Failed to setup payment")}},xe=async()=>{try{await fetch(route("customer.reschedule.payment-failed"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})}catch(t){console.error("Payment cancellation handling failed:",t)}},fe=()=>new Promise((t,n)=>{if(window.Razorpay){t();return}const i=document.createElement("script");i.src="https://checkout.razorpay.com/v1/checkout.js",i.onload=()=>t(),i.onerror=()=>n(new Error("Failed to load Razorpay script")),document.head.appendChild(i)}),K=()=>{$.resetFields(),P(null),B(null),g([]),s()},ye=t=>{try{if(!t)return"Invalid Time";let n=t;if(t&&typeof t=="object"&&t.format?n=t.format("HH:mm"):typeof t=="object"&&t.start&&(n=t.start),!n||typeof n!="string")return"Invalid Time";const i=n.match(/^(\d{1,2}):(\d{2})$/);if(!i)return"Invalid Time";const a=parseInt(i[1],10),d=parseInt(i[2],10);if(a<0||a>23||d<0||d>59)return"Invalid Time";const u=a>=12?"PM":"AM";return`${a===0?12:a>12?a-12:a}:${d.toString().padStart(2,"0")} ${u}`}catch(n){return console.error("Error formatting time:",n),"Invalid Time"}},je=()=>{S(o.subtract(1,"month"))},ge=()=>{S(o.add(1,"month"))},ve=t=>{const n=p(),i=D?.[0];if(!i)return!1;const a=i.min_advance_hours,d=i.max_advance_days,u=i.working_days,v=n.add(a,"hour"),x=n.add(d,"day"),h=t.isSame(n,"day"),z=h||t.isAfter(v)&&(t.isBefore(x)||t.isSame(x,"day")),I=t.day(),F=I===0?7:I,J=u.includes(F),Q=z&&J;return(t.isSame(n,"day")||t.format("YYYY-MM-DD")==="2025-08-18")&&console.log("RescheduleModal - Date selectability check:",{date:t.format("YYYY-MM-DD"),isToday:h,isWithinRange:z,isWorkingDay:J,isSelectable:Q,minAdvanceHours:a,maxAdvanceDays:d,workingDays:u,adjustedDayOfWeek:F,minDate:v.format("YYYY-MM-DD"),maxDate:x.format("YYYY-MM-DD"),scheduleSettings:D,defaultSchedule:i}),Q},we=t=>{const n=t.startOf("month"),i=t.endOf("month"),a=n.day(),d=[],u=t.subtract(1,"month"),v=u.daysInMonth();for(let h=a-1;h>=0;h--)d.push(u.date(v-h));for(let h=1;h<=i.date();h++)d.push(t.date(h));const x=42-d.length;for(let h=1;h<=x;h++)d.push(t.add(1,"month").date(h));return d},V=()=>{if(!c?.reschedule||c.reschedule.window_hours===0&&c.reschedule.max_attempts===0||c.reschedule.max_attempts>0&&l.reschedule_attempts>=c.reschedule.max_attempts)return!1;const t=p(),n=p(l.appointment_time);if(n.isBefore(t))return!1;const i=n.diff(t,"hour",!0);return!(c.reschedule.window_hours>0&&i<c.reschedule.window_hours)},X=l?.reschedule_attempts||0,G=c?.reschedule?.max_attempts||0;return c?.reschedule?.advance_notice_hours,e.jsx(Ie,{title:"Reschedule Booking",open:j,onCancel:K,footer:null,width:800,centered:!0,children:e.jsxs("div",{style:{maxHeight:"80vh",overflowY:"auto"},children:[e.jsxs(_,{style:{marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:8},children:[e.jsx(We,{style:{color:"#1890ff",marginRight:8}}),e.jsx(w,{strong:!0,children:"Current Booking"})]}),e.jsxs(Y,{gutter:16,children:[e.jsxs(m,{span:8,children:[e.jsx(w,{type:"secondary",children:"Date:"}),e.jsx("br",{}),e.jsx(w,{strong:!0,children:p(l?.appointment_time).format("MMMM D, YYYY")})]}),e.jsxs(m,{span:8,children:[e.jsx(w,{type:"secondary",children:"Time:"}),e.jsx("br",{}),e.jsx(w,{strong:!0,children:p(l?.appointment_time).format("h:mm A")})]}),e.jsxs(m,{span:8,children:[e.jsx(w,{type:"secondary",children:"Service:"}),e.jsx("br",{}),e.jsx(w,{strong:!0,children:l?.service?.name})]})]})]}),H?e.jsxs(_,{style:{marginBottom:16},children:[e.jsx(Z,{size:"small"})," Loading policy information..."]}):c?e.jsx(_,{style:{marginBottom:16},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs(w,{strong:!0,children:["Policy: ",c.name]}),e.jsx("br",{}),e.jsxs(w,{type:"secondary",children:[c.reschedule?.window_hours||0,"h window â€¢ Max"," ",c.reschedule?.max_attempts||0," ","attempts"]}),c.reschedule?.fee>0&&e.jsx("div",{style:{marginTop:8},children:e.jsxs(N,{color:"orange",children:["Reschedule Fee: â‚¹",c.reschedule.fee]})})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx(w,{type:"secondary",children:"Attempts:"}),e.jsx("br",{}),e.jsxs(w,{strong:!0,style:{color:"#1890ff"},children:[X,"/",G]})]})]})}):null,!V()&&c&&e.jsx(k,{message:"Rescheduling Not Allowed",description:e.jsxs("div",{children:[c.reschedule?.window_hours===0&&c.reschedule?.max_attempts===0&&e.jsx("p",{children:"Rescheduling is disabled for this booking."}),c.reschedule?.max_attempts>0&&l?.reschedule_attempts>=c.reschedule?.max_attempts&&e.jsxs("p",{children:["You have already used all your reschedule attempts (",X,"/",G,")."]}),p(l?.appointment_time).isBefore(p())&&e.jsx("p",{children:"Cannot reschedule appointments in the past."}),c.reschedule?.window_hours>0&&p(l?.appointment_time).diff(p(),"hour",!0)<c.reschedule?.window_hours&&e.jsxs("p",{children:["Your appointment is within the reschedule window (",c.reschedule?.window_hours," ","hours)."]})]}),type:"warning",showIcon:!0,style:{marginBottom:16}}),V()&&e.jsxs(e.Fragment,{children:[c?.reschedule?.fee>0&&e.jsx(k,{message:"Reschedule Fee Required",description:`A reschedule fee of â‚¹${c.reschedule.fee} will be charged to complete the rescheduling process.`,type:"warning",showIcon:!0,style:{marginBottom:16}}),e.jsxs(_,{style:{marginBottom:16},children:[e.jsxs(ne,{level:4,style:{marginBottom:16},children:[e.jsx(oe,{style:{marginRight:8}}),"Select New Date"]}),e.jsxs("div",{style:{border:"1px solid #f0f0f0",borderRadius:"12px",overflow:"hidden",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)",background:"white"},children:[e.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #f0f0f0",background:"#fafafa",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(y,{size:"small",onClick:je,style:{border:"none",boxShadow:"none"},children:"â€¹"}),e.jsx("span",{style:{fontSize:"16px",fontWeight:"600",minWidth:"120px",textAlign:"center"},children:o.format("MMMM YYYY")}),e.jsx(y,{size:"small",onClick:ge,style:{border:"none",boxShadow:"none"},children:"â€º"})]}),e.jsxs("div",{style:{padding:"16px"},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"8px"},children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(t=>e.jsx("div",{style:{textAlign:"center",fontWeight:"600",color:"#666",padding:"8px 4px",fontSize:"12px",textTransform:"uppercase",letterSpacing:"0.5px"},children:t},t))}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px"},children:we(o).map((t,n)=>{const i=p(),a=t.isBefore(i,"day"),d=t.isSame(i,"day"),u=C&&C.isSame(t,"day"),v=t.month()===o.month(),x=ve(t),h={height:"48px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px",cursor:x&&!a?"pointer":"default",transition:"all 0.2s ease",fontSize:"14px",fontWeight:"500",opacity:v?1:.3};let z="transparent",I="#333",F="1px solid transparent";return a?I="#999":u?(z="#e6f7ff",I="#1890ff",F="2px solid #1890ff"):d&&!C?(z="#1890ff",I="white",F="none"):x?I="#333":I="#ccc",e.jsx("div",{style:{...h,backgroundColor:z,color:I,border:F},onClick:()=>{x&&!a&&he(t)},children:t.date()},n)})})]})]})]}),C&&e.jsxs(_,{children:[e.jsxs(ne,{level:4,style:{marginBottom:16},children:[e.jsx(Me,{style:{marginRight:8}}),"Available Time Slots"]}),W?e.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[e.jsx(Z,{size:"large"}),e.jsx("div",{style:{marginTop:16},children:e.jsx(w,{type:"secondary",children:"Loading available slots..."})})]}):b.length===0?e.jsx(ee,{description:"No available slots for this date",image:ee.PRESENTED_IMAGE_SIMPLE}):e.jsx(Y,{gutter:[12,12],children:b.map((t,n)=>{const i=typeof t=="object"?t.start:t;if(!i||typeof i!="string")return null;const a=i.split(":");if(a.length!==2)return null;const d=parseInt(a[0],10),u=parseInt(a[1],10);if(d<0||d>23||u<0||u>59)return null;const v=p().hour(d).minute(u).second(0).millisecond(0),x=T&&T.format("HH:mm")===i,h=typeof t=="object"?t.available!==!1:!0;return e.jsx(m,{xs:12,sm:8,md:6,children:e.jsx(y,{size:"large",disabled:!h,style:{width:"100%",height:48,border:x?"2px solid #1890ff":h?"1px solid #d9d9d9":"1px solid #ffccc7",backgroundColor:x?"#e6f7ff":h?"white":"#fff2f0",opacity:h?1:.6},onClick:()=>h&&me(v),children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[x&&e.jsx(Te,{style:{marginRight:8,color:"#1890ff"}}),ye(i)]}),!h&&e.jsx("div",{style:{fontSize:"10px",marginTop:"2px",color:"#ff4d4f",fontWeight:"normal"},children:"Unavailable"})]})})},n)}).filter(Boolean)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:16},children:[e.jsx(y,{onClick:K,children:"Cancel"}),e.jsx(y,{type:"primary",onClick:ue,loading:W,disabled:!C||!T,children:c?.reschedule?.fee>0?`Reschedule & Pay â‚¹${c.reschedule.fee}`:"Reschedule Booking"})]})]})]})})}const{Title:ie,Text:r,Paragraph:He}=le,{Header:Le,Content:Ne}=ae;function _t({auth:j,booking:s}){const[M,l]=R.useState(!1);console.log("BookingDetail component - Schedule settings:",{scheduleSettings:s?.schedule_settings,scheduleSettingsLength:s?.schedule_settings?.length,firstSchedule:s?.schedule_settings?.[0]});const D=o=>{l(!1),window.location.reload()},$=()=>{l(!1)};if(!j||!j.user)return e.jsxs("div",{style:{padding:"24px",textAlign:"center"},children:[e.jsx(ie,{level:2,children:"Access Denied"}),e.jsx(r,{children:"Please log in to view booking details."}),e.jsx("br",{}),e.jsx(y,{type:"primary",onClick:()=>E.visit(route("welcome")),style:{marginTop:16},children:"Go to Home"})]});const C=o=>{switch(o){case"confirmed":return"success";case"pending":return"warning";case"completed":return"processing";case"cancelled":return"error";case"no_show":return"default";default:return"default"}},P=o=>{switch(o){case"confirmed":return e.jsx(re,{});case"pending":return e.jsx(te,{});case"completed":return e.jsx(re,{});case"cancelled":return e.jsx(se,{});case"no_show":return e.jsx(se,{});default:return e.jsx(te,{})}},T=o=>{switch(o){case"paid":return"success";case"pending":return"warning";case"failed":return"error";case"refunded":return"default";default:return"default"}},B=o=>p(o).format("MMM DD, YYYY h:mm A"),b=o=>{if(o<60)return`${o} min`;{const S=Math.floor(o/60),c=o%60;return c>0?`${S}h ${c}m`:`${S}h`}},g=o=>`â‚¹${parseFloat(o).toFixed(2)}`,W=o=>o?o.split(" ").map(S=>S[0]).join("").toUpperCase().slice(0,2):"CU",A=()=>{E.post(route("logout"),{},{onSuccess:()=>{window.location.reload()}})},H=()=>{window.print()},O=[{key:"services",icon:e.jsx($e,{}),label:"Services",onClick:()=>E.visit(route("booking.select-service"))},{key:"bookings",icon:e.jsx(oe,{}),label:"Your Bookings",onClick:()=>E.visit(route("customer.bookings"))}];return e.jsxs(ae,{style:{minHeight:"100vh"},children:[e.jsx(_e,{title:`Booking #${s.id} - HospiPal`}),e.jsxs(Le,{style:{background:"#fff",padding:"0 16px",display:"flex",alignItems:"center",justifyContent:"space-between",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",height:"auto",minHeight:64,maxWidth:"100vw",width:"100%",overflow:"hidden"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",flexShrink:0,minWidth:0},children:e.jsx(Re,{variant:"primary",color:"color",background:"white",size:"medium"})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flex:1,justifyContent:"flex-end",minWidth:0,overflow:"hidden"},children:[e.jsx(Ce,{mode:"horizontal",items:O,selectedKeys:["bookings"],style:{border:"none",background:"transparent",fontSize:"14px",minWidth:0,flexShrink:1,maxWidth:"100%"}}),e.jsxs(L,{size:"small",style:{flexShrink:0},children:[e.jsx(De,{style:{backgroundColor:"#1890ff",cursor:"pointer"},onClick:()=>f.info("Profile settings coming soon"),children:W(j.user?.name)}),e.jsx(y,{type:"text",icon:e.jsx(Pe,{}),onClick:A,size:"small",children:e.jsx("span",{className:"hidden-xs",children:"Logout"})})]})]})]}),e.jsx(Ne,{style:{padding:"16px"},children:e.jsxs("div",{style:{maxWidth:1200,margin:"0 auto"},children:[e.jsx("div",{className:"mobile-top-spacing"}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsx(y,{icon:e.jsx(Ye,{}),onClick:()=>E.visit(route("customer.bookings")),style:{marginBottom:16},children:"Back to Bookings"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:16},children:[e.jsxs("div",{children:[e.jsxs(ie,{level:2,style:{marginBottom:8},children:["Booking #",s.id]}),e.jsx(r,{type:"secondary",children:s.service?.name})]}),e.jsx(L,{children:e.jsx(y,{icon:e.jsx(Ae,{}),onClick:H,children:e.jsx("span",{className:"hidden-xs",children:"Print"})})})]})]}),e.jsxs(Y,{gutter:[24,24],children:[e.jsxs(m,{xs:24,lg:16,children:[e.jsx(_,{title:"Booking Details",style:{marginBottom:24},children:e.jsxs(Y,{gutter:[16,16],children:[e.jsx(m,{xs:24,sm:12,children:e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(r,{strong:!0,children:"Service"}),e.jsx("div",{children:e.jsx(r,{children:s.service?.name})})]})}),e.jsx(m,{xs:24,sm:12,children:e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(r,{strong:!0,children:"Employee"}),e.jsx("div",{children:e.jsx(r,{children:s.employee?.name||"Auto-assigned"})})]})}),e.jsx(m,{xs:24,sm:12,children:e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(r,{strong:!0,children:"Date & Time"}),e.jsx("div",{children:e.jsx(r,{children:B(s.appointment_time)})})]})}),e.jsx(m,{xs:24,sm:12,children:e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(r,{strong:!0,children:"Duration"}),e.jsx("div",{children:e.jsx(r,{children:b(s.duration)})})]})}),e.jsx(m,{xs:24,sm:12,children:e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(r,{strong:!0,children:"Status"}),e.jsx("div",{children:e.jsx(N,{color:C(s.status),icon:P(s.status),children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})})]})}),e.jsx(m,{xs:24,sm:12,children:e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(r,{strong:!0,children:"Payment Status"}),e.jsx("div",{children:e.jsx(N,{color:T(s.payment_status),children:s.payment_status.charAt(0).toUpperCase()+s.payment_status.slice(1)})})]})}),e.jsx(m,{xs:24,sm:12,children:e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(r,{strong:!0,children:"Reschedule Attempts"}),e.jsx("div",{children:e.jsxs(r,{children:[s.reschedule_attempts||0," ","attempts"]})})]})}),s.rescheduled_at&&e.jsx(m,{xs:24,sm:12,children:e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(r,{strong:!0,children:"Last Rescheduled"}),e.jsx("div",{children:e.jsx(r,{children:B(s.rescheduled_at)})})]})})]})}),s.extras&&s.extras.length>0&&e.jsx(_,{title:"Additional Services",style:{marginBottom:24},children:e.jsx(Y,{gutter:[16,16],children:s.extras.map(o=>e.jsx(m,{xs:24,sm:12,children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",border:"1px solid #f0f0f0",borderRadius:"8px"},children:[e.jsxs("div",{children:[e.jsx(r,{strong:!0,children:o.name}),e.jsx("br",{}),e.jsx(r,{type:"secondary",style:{fontSize:"12px"},children:b(o.duration||0)})]}),e.jsx(r,{children:g(o.pivot?.price||o.price)})]})},o.id))})}),s.formResponses&&s.formResponses.length>0&&e.jsx(_,{title:"Form Responses",style:{marginBottom:24},children:e.jsx(Y,{gutter:[16,16],children:s.formResponses.map(o=>e.jsx(m,{xs:24,sm:12,children:e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(r,{strong:!0,children:o.formField?.label||o.formField?.name}),e.jsx("div",{children:e.jsx(r,{children:o.value})})]})},o.id))})}),s.notes&&e.jsx(_,{title:"Notes",style:{marginBottom:24},children:e.jsx(He,{children:s.notes})}),(s.reschedule_attempts>0||s.reschedule_payment_amount>0)&&e.jsx(_,{title:"Reschedule Information",style:{marginBottom:24},children:e.jsxs(Y,{gutter:[16,16],children:[s.reschedule_attempts>0&&e.jsx(m,{xs:24,sm:12,children:e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(r,{strong:!0,children:"Reschedule Attempts"}),e.jsx("div",{children:e.jsxs(r,{children:[s.reschedule_attempts," ","time(s)"]})})]})}),s.rescheduled_at&&e.jsx(m,{xs:24,sm:12,children:e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(r,{strong:!0,children:"Last Rescheduled"}),e.jsx("div",{children:e.jsx(r,{children:B(s.rescheduled_at)})})]})}),s.reschedule_payment_amount>0&&e.jsx(m,{xs:24,sm:12,children:e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(r,{strong:!0,children:"Reschedule Fee Paid"}),e.jsx("div",{children:e.jsxs(r,{style:{color:"#52c41a",fontWeight:"bold"},children:["â‚¹",s.reschedule_payment_amount]})})]})}),s.reschedule_payment_id&&e.jsx(m,{xs:24,sm:12,children:e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(r,{strong:!0,children:"Payment ID"}),e.jsx("div",{children:e.jsx(r,{code:!0,children:s.reschedule_payment_id})})]})}),s.reschedule_payment_date&&e.jsx(m,{xs:24,sm:12,children:e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(r,{strong:!0,children:"Payment Date"}),e.jsx("div",{children:e.jsx(r,{children:B(s.reschedule_payment_date)})})]})})]})})]}),e.jsxs(m,{xs:24,lg:8,children:[e.jsxs(_,{title:"Payment Details",style:{marginBottom:24},children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsx(r,{children:"Service"}),e.jsx(r,{children:g(s.service?.price||0)})]}),s.extras&&s.extras.length>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsx(r,{children:"Extras"}),e.jsx(r,{children:g(s.extras.reduce((o,S)=>o+parseFloat(S.pivot?.price||S.price||0),0))})]}),s.discount_amount>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8,color:"#52c41a"},children:[e.jsx(r,{children:"Discount"}),e.jsxs(r,{children:["-",g(s.discount_amount)]})]}),e.jsx(Fe,{style:{margin:"12px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"16px",fontWeight:"bold"},children:[e.jsx(r,{strong:!0,children:"Total"}),e.jsx(r,{strong:!0,children:g(s.total_amount)})]})]}),s.payment_method&&e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(r,{type:"secondary",children:"Payment Method"}),e.jsx("div",{children:e.jsx(r,{children:s.payment_method})})]}),s.transaction_id&&e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(r,{type:"secondary",children:"Transaction ID"}),e.jsx("div",{children:e.jsx(r,{code:!0,children:s.transaction_id})})]})]}),e.jsx(_,{title:"Actions",children:e.jsxs(L,{direction:"vertical",style:{width:"100%"},children:[s.status==="pending"&&e.jsx(y,{type:"primary",block:!0,danger:!0,onClick:()=>f.info("Cancel booking functionality coming soon"),children:"Cancel Booking"}),s.status==="confirmed"&&e.jsx(y,{type:"primary",block:!0,onClick:()=>l(!0),children:"Reschedule"}),s.invoice&&e.jsx(y,{icon:e.jsx(ze,{}),block:!0,onClick:()=>window.open(`/customer/invoices/${s.invoice.id}/download`,"_blank"),children:"Download Invoice"}),e.jsx(y,{block:!0,onClick:()=>f.info("Contact support functionality coming soon"),children:"Contact Support"})]})})]})]})]})}),e.jsx(Oe,{visible:M,onCancel:$,onSuccess:D,booking:s,scheduleSettings:s.schedule_settings||[]})]})}export{_t as default};
