import{r as j,j as e,H as V,a as A}from"./app-C0i7ji0a.js";import{c as J,B as P}from"./BookingHeader-D9naZcgl.js";import{L as U,C as S,S as C,B as h}from"./Logo-Cr3Vrkiz.js";import{I as G,T as K}from"./AntdIcon-CG4lf82z.js";import{P as X}from"./progress-DoM3zVes.js";import{R as z,C as g}from"./row-DYFwV1zR.js";import{T as k}from"./index-CUUhEHEY.js";import{A as W}from"./index-D-qKAky-.js";import{C as Z}from"./index-GG8jJ-WS.js";import{R as ee}from"./InfoCircleOutlined-C3mzMFXO.js";import{R as te}from"./PlusOutlined-FBaVgi14.js";import{s as R}from"./index-CTyyjyIB.js";import{C as ie}from"./circle-check-big-B4btNST-.js";import{D as H}from"./index-CWRyYsMY.js";import{R as ne}from"./ArrowLeftOutlined-DtEOC4a9.js";import{R as oe}from"./ArrowRightOutlined-B8TUNWvs.js";import{R as B}from"./CheckOutlined-D4oHAZwL.js";import{M as se}from"./message-circle-5xa6KPVp.js";import{M as re}from"./index-DswqVBnH.js";import{R as le}from"./ClockCircleOutlined-ClGMH5-J.js";/* empty css            */import"./PhoneOutlined-BLjeV-ps.js";import"./index-CZKXGgWq.js";import"./Input-DkehPgrd.js";import"./EyeOutlined-Cvu0YLNN.js";import"./EyeOutlined-Bmd706kk.js";import"./index-DXUrc3yS.js";import"./index-3GBlYmCQ.js";import"./useClosable-ht4S8wFe.js";import"./extendsObject-78o_rR5W.js";import"./CheckCircleFilled-f0rgZh4-.js";import"./InfoCircleFilled-BXwDY3O8.js";import"./ClockCircleOutlined-CELcQ7Uv.js";var ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"};function w(){return w=Object.assign?Object.assign.bind():function(l){for(var c=1;c<arguments.length;c++){var m=arguments[c];for(var s in m)Object.prototype.hasOwnProperty.call(m,s)&&(l[s]=m[s])}return l},w.apply(this,arguments)}const de=(l,c)=>j.createElement(G,w({},l,{ref:c,icon:ae})),ce=j.forwardRef(de);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],pe=J("sparkles",xe),{Title:y,Text:r}=K;function Pe({service:l,extras:c,bookingSettings:m,selectedPricingTier:s,selectedDuration:fe,selectedPrice:me,auth:T}){const[d,I]=j.useState([]),[u,v]=j.useState({}),[F,E]=j.useState(!1),[a,M]=j.useState(null),p=m?.max_extras_per_booking||10,L=m?.enable_extra_quantities!==!1;console.log("SelectExtras component - Extras data:",c),console.log("SelectExtras component - Selected extras:",d),console.log("SelectExtras component - Booking settings:",m),c.forEach((t,i)=>{console.log(`Extra ${i+1}:`,{id:t.id,name:t.name,duration_id:t.duration_id,durationRelation:t.durationRelation,hasDurationRelation:!!t.durationRelation,durationLabel:t.durationRelation?.label})});const D=t=>{I(i=>i.find(n=>n.id===t.id)?(v(n=>{const x={...n};return delete x[t.id],x}),i.filter(n=>n.id!==t.id)):i.length>=p?(R.warning(`You can only select up to ${p} different extras.`),i):(v(n=>({...n,[t.id]:1})),[...i,t]))},$=(t,i)=>{if(i<1)I(o=>o.filter(n=>n.id!==t)),v(o=>{const n={...o};return delete n[t],n});else{const n=d.find(x=>x.id===t)?.max_quantity||5;if(i>n){R.warning(`You can only add up to ${n} of this extra.`);return}v(x=>({...x,[t]:i}))}},q=()=>{A.visit(route("booking.select-service"))},Q=()=>{const t=d.map(n=>n.id),i=d.map(n=>({id:n.id,quantity:u[n.id]||1})),o=encodeURIComponent(JSON.stringify(i));A.visit(route("booking.select-datetime"),{data:{service_id:l.id,pricing_tier_id:s?.id,selected_duration:s?.duration_minutes||l.duration,selected_price:s?.price||l.price,extras:t,extra_quantities_json:o}})},f=t=>`â‚¹${parseFloat(t).toFixed(2)}`,O=()=>{const t=parseFloat(s?s.price:l.price),i=d.reduce((o,n)=>{const x=u[n.id]||1;return o+parseFloat(n.price)*x},0);return t+i},b=t=>{if(t<60)return`${t} min`;{const i=Math.floor(t/60),o=t%60;return o>0?`${i}h ${o}m`:`${i}h`}},N=(t,i=60)=>{if(!t||t.length<=i)return t;const o=document.createElement("div");o.innerHTML=t;const n=o.textContent||o.innerText||"";return n.length<=i?t:n.substring(0,i).trim()+"..."},Y=(t,i)=>{i.stopPropagation(),M(t),E(!0)},_=()=>{E(!1),M(null)};return e.jsxs("div",{children:[e.jsx(V,{title:"Select Extras - Book Appointment"}),e.jsx(P,{auth:T}),e.jsxs("div",{style:{maxWidth:1200,margin:"0 auto",padding:"24px"},children:[e.jsx("div",{className:"mobile-top-spacing"}),e.jsxs("div",{style:{textAlign:"center",marginBottom:48},children:[e.jsx(U,{variant:"primary",color:"color",background:"white",size:"large"}),e.jsxs(y,{level:2,style:{marginTop:24,marginBottom:8},children:["Add HospiPal Extras"," ",e.jsx(pe,{size:24,style:{verticalAlign:"middle",marginLeft:"8px"}})]}),e.jsx(r,{type:"secondary",style:{fontSize:16},children:"Make your booking smoother, safer, and stress-free with optional support add-ons."})]}),e.jsxs("div",{style:{marginBottom:32},children:[e.jsx(X,{percent:40,showInfo:!1,strokeColor:"#1890ff",trailColor:"#f0f0f0"}),e.jsx("div",{style:{textAlign:"center",marginTop:8},children:e.jsx(r,{type:"secondary",children:"Step 2 of 5"})})]}),e.jsx("div",{style:{textAlign:"center",marginBottom:32},children:e.jsx(r,{style:{fontSize:16,color:"#666",lineHeight:1.5},children:"Select any extras you may need. You can continue without extras if not required."})}),e.jsxs(z,{gutter:[32,32],children:[e.jsxs(g,{xs:24,lg:16,children:[e.jsxs(S,{style:{marginBottom:24},children:[e.jsx(y,{level:4,style:{marginBottom:16},children:"Selected Service"}),e.jsxs(z,{align:"middle",gutter:16,children:[e.jsx(g,{children:e.jsx("div",{style:{width:60,height:60,backgroundColor:l.color||"#f0f0f0",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:24,fontWeight:"bold"},children:l.name.charAt(0)})}),e.jsxs(g,{flex:"1",children:[e.jsxs(y,{level:5,style:{margin:0},children:[l.name,s&&e.jsx(k,{color:"blue",style:{marginLeft:8,fontSize:10},children:s.name})]}),e.jsxs(C,{size:"large",children:[e.jsx(r,{type:"secondary",children:s?b(s.duration_minutes):l.duration_label||b(l.duration)}),e.jsx(r,{strong:!0,children:f(s?s.price:l.price)})]})]})]})]}),e.jsxs(S,{children:[e.jsx(y,{level:4,style:{marginBottom:16},children:"Available Extras"}),c.length===0?e.jsx(W,{message:"No extras available",description:"There are currently no additional services available for this booking.",type:"info",showIcon:!0}):d.length>=p?e.jsx(W,{message:"Maximum extras reached",description:`You have selected the maximum number of extras (${p}). Please remove some extras to add others.`,type:"warning",showIcon:!0}):e.jsx(z,{gutter:[16,16],children:c.map(t=>{const i=d.find(o=>o.id===t.id);return e.jsx(g,{xs:24,sm:12,children:e.jsx(S,{hoverable:!0,style:{cursor:d.length>=p&&!i?"not-allowed":"pointer",border:i?"2px solid #1890ff":"1px solid #f0f0f0",opacity:d.length>=p&&!i?.6:1,transition:"all 0.3s ease"},onClick:()=>{if(d.length>=p&&!i){R.warning(`You can only select up to ${p} different extras.`);return}D(t)},styles:{body:{padding:16}},children:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(Z,{checked:i,style:{marginRight:12}}),e.jsxs("div",{style:{flex:1},children:[e.jsx(y,{level:5,style:{margin:0,marginBottom:4},children:t.name}),t.description&&e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},dangerouslySetInnerHTML:{__html:N(t.description,60)}}),e.jsx(h,{type:"link",size:"small",icon:e.jsx(ee,{}),onClick:o=>Y(t,o),style:{padding:0,height:"auto",fontSize:"10px",color:"#1890ff",marginTop:2},children:"View Details"}),e.jsx("div",{style:{marginTop:8},children:e.jsxs(C,{size:"small",children:[t.durationRelation&&e.jsx(k,{size:"small",children:t.durationRelation.label}),e.jsx(k,{size:"small",color:"green",children:f(t.price)})]})})]}),i&&L&&e.jsx("div",{style:{marginLeft:12},children:e.jsxs(C,{children:[e.jsx(h,{size:"small",icon:e.jsx(ce,{}),onClick:o=>{o.stopPropagation();const n=u[t.id]||1;$(t.id,n-1)}}),e.jsx(r,{strong:!0,style:{minWidth:20,textAlign:"center"},children:u[t.id]||1}),e.jsx(h,{size:"small",icon:e.jsx(te,{}),onClick:o=>{o.stopPropagation();const n=u[t.id]||1;$(t.id,n+1)}})]})})]})})},t.id)})})]})]}),e.jsx(g,{xs:24,lg:8,children:e.jsxs(S,{style:{position:"sticky",top:24,borderRadius:"16px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.08)",border:"1px solid #f0f0f0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:24,padding:"16px 0"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px"},children:e.jsx(ie,{size:24,color:"white"})}),e.jsxs("div",{children:[e.jsx(y,{level:4,style:{margin:0,color:"#262626"},children:"Booking Summary"}),e.jsx(r,{type:"secondary",style:{fontSize:14},children:"Review your booking details"})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsxs(r,{strong:!0,children:[l.name,s&&e.jsx(k,{color:"blue",style:{marginLeft:8,fontSize:10},children:s.name})]}),e.jsx(r,{children:f(s?s.price:l.price)})]}),e.jsx(r,{type:"secondary",style:{fontSize:12},children:s?b(s.duration_minutes):l.duration_label||b(l.duration)})]}),d.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(H,{style:{margin:"12px 0"}}),d.map(t=>{const i=u[t.id]||1,o=parseFloat(t.price)*i;return e.jsxs("div",{style:{marginBottom:8},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(r,{children:["+ ",t.name,i>1&&e.jsxs(r,{type:"secondary",style:{fontSize:12},children:[" ","Ã— ",i]})]}),e.jsx(r,{children:f(o)})]}),e.jsxs(r,{type:"secondary",style:{fontSize:12},children:[t.duration_relation?t.duration_relation.label:"No additional time",i>1&&e.jsxs(r,{type:"secondary",style:{fontSize:12},children:[" ","Ã— ",i]})]})]},t.id)})]}),e.jsx(H,{style:{margin:"16px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsx(r,{strong:!0,children:"Total Price"}),e.jsx(r,{strong:!0,style:{fontSize:16},children:f(O())})]}),e.jsxs("div",{style:{marginTop:24},children:[e.jsx(h,{block:!0,style:{marginBottom:12},icon:e.jsx(ne,{}),onClick:q,children:"Back to Services"}),e.jsx(h,{type:"primary",block:!0,size:"large",icon:e.jsx(oe,{}),onClick:Q,children:"Continue to Date & Time"})]})]})})]}),e.jsx("div",{style:{textAlign:"center",marginBottom:48,padding:"32px 0"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:32,flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(B,{style:{color:"#52c41a",fontSize:16}}),e.jsx(r,{style:{fontSize:14,color:"#666"},children:"Only available with a main HospiPal service"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(B,{style:{color:"#52c41a",fontSize:16}}),e.jsx(r,{style:{fontSize:14,color:"#666"},children:"Flexible, can be added before your booking starts"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(B,{style:{color:"#52c41a",fontSize:16}}),e.jsx(r,{style:{fontSize:14,color:"#666"},children:"Designed to give peace of mind for families"})]})]})}),e.jsx("div",{style:{textAlign:"center",marginTop:48,padding:"24px 0"},children:e.jsx("div",{style:{padding:"20px",background:"linear-gradient(135deg, #f0f8ff 0%, #e6f7ff 100%)",borderRadius:"16px",border:"1px solid #bae7ff",display:"inline-block"},children:e.jsxs(r,{style:{fontSize:16,color:"#1890ff",fontWeight:500,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(se,{size:18}),"Need help with extras? Chat with us on WhatsApp anytime."]})})})]}),e.jsx(re,{title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{width:40,height:40,borderRadius:"8px",background:"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:18,fontWeight:"bold"},children:a?.name?.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#1f1f1f"},children:a?.name}),e.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:2},children:"Extra Service Details"})]})]}),open:F,onCancel:_,footer:[e.jsx(h,{onClick:_,children:"Close"},"close"),e.jsx(h,{type:"primary",onClick:()=>{D(a),_()},children:"Add This Extra"},"select")],width:500,centered:!0,children:a&&e.jsxs("div",{style:{padding:"16px 0"},children:[a.description&&e.jsxs("div",{style:{marginBottom:20},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#1f1f1f",marginBottom:8},children:"Description"}),e.jsx("div",{style:{fontSize:"14px",lineHeight:1.5,color:"#666"},dangerouslySetInnerHTML:{__html:a.description}})]}),e.jsxs("div",{style:{marginBottom:20},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#1f1f1f",marginBottom:12},children:"Service Information"}),e.jsxs(z,{gutter:16,children:[e.jsx(g,{span:12,children:e.jsxs("div",{style:{padding:"12px",background:"#f8f9fa",borderRadius:"6px",border:"1px solid #e8e8e8"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[e.jsx(le,{style:{color:"#1890ff",fontSize:14}}),e.jsx("span",{style:{fontSize:"11px",color:"#999"},children:"Duration"})]}),e.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#1f1f1f"},children:a.duration_relation?a.duration_relation.label:"No additional time"})]})}),e.jsx(g,{span:12,children:e.jsxs("div",{style:{padding:"12px",background:"#f8f9fa",borderRadius:"6px",border:"1px solid #e8e8e8"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[e.jsx("span",{style:{color:"#52c41a",fontSize:14,fontWeight:"bold"},children:"â‚¹"}),e.jsx("span",{style:{fontSize:"11px",color:"#999"},children:"Regular"})]}),e.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#1f1f1f"},children:f(a.price)})]})})]})]}),e.jsxs("div",{style:{padding:"12px",background:"#f0f8ff",borderRadius:"6px",border:"1px solid #bae7ff"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#1890ff",marginBottom:4},children:"Quantity Limit"}),e.jsxs("div",{style:{fontSize:"12px",lineHeight:1.4,color:"#666"},children:["You can add up to"," ",a.max_quantity||5," of this extra service to your booking."]})]}),(a?.disclaimer_title||a?.disclaimer_content)&&e.jsxs("div",{style:{padding:"16px",background:"#f0f8ff",borderRadius:"8px",border:"1px solid #bae7ff",marginTop:16},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#1890ff",marginBottom:8},children:a?.disclaimer_title||"What's Included"}),e.jsx("div",{style:{fontSize:"14px",lineHeight:1.5,color:"#666"},dangerouslySetInnerHTML:{__html:a?.disclaimer_content||"This extra service includes professional care and quality products to enhance your experience."}})]})]})})]})}export{Pe as default};
