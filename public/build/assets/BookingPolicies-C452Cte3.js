import{r as y,j as e,H as S,a as m}from"./app-GHJ6SJ9p.js";import{A,R as f}from"./AdminLayout-BAgcmyjt.js";import{F as l}from"./index-DQaT6v9B.js";import{T as F,B as u,C as T}from"./Logo-CgCrcYaU.js";import{R as z}from"./PlusOutlined-CtpEdgYh.js";import{F as M}from"./Table-D-mWpawj.js";import{M as B}from"./index-BI7GSswp.js";import{R as t,C as s}from"./row-CgwhhCUf.js";import{I as w}from"./index-BKi5BDEi.js";import{S as a}from"./index-CH9xnHPr.js";import{D as p}from"./index-DshskHDl.js";import{R as j}from"./ClockCircleOutlined-DL0l6okk.js";import{T as o}from"./index-CvMK6DjP.js";import{S as E}from"./index-CnMyniK2.js";import{R as D}from"./SettingOutlined-B_syKyCn.js";import{T as x}from"./index-Di36YMr6.js";import{S as $}from"./index-C4h3PxPQ.js";import{R as L}from"./EditOutlined-WK11D0bY.js";import{P as O}from"./index-Cj0OVQgX.js";import{R as V}from"./DeleteOutlined-Czaf-bo4.js";import{C as W}from"./Collapse-B2Yhg54P.js";/* empty css            */import"./index-C_hlbVzA.js";import"./index-CFCYulKb.js";import"./PurePanel-oknD4ArD.js";import"./move-BQEn0wCQ.js";import"./LogoutOutlined-Bdb2DG7j.js";import"./CalendarOutlined-DRjFhB-3.js";import"./DollarOutlined-DkHeabU4.js";import"./UserOutlined-CB-PlqxZ.js";import"./FileTextOutlined-DYWq0JzC.js";import"./GiftOutlined-C9tE1WQH.js";import"./useForm-c8FVYlit.js";import"./CheckCircleFilled-C6274V1h.js";import"./InfoCircleFilled-BgQ81YM8.js";import"./pickAttrs-BVXv29NF.js";import"./addEventListener-DIGLTZCa.js";import"./DownOutlined-CnWx9RdQ.js";import"./index-Ckzs-oZH.js";import"./index-DSrkMEKC.js";import"./index-DIcGKw6c.js";import"./extendsObject-78o_rR5W.js";import"./index-BHN9A3hJ.js";import"./Input-Ba6sZIOH.js";import"./useClosable-C7FjKwvd.js";import"./EyeOutlined-BUY3z7ff.js";import"./EyeOutlined-Bmd706kk.js";const{Title:H,Text:r}=F,{TextArea:K}=w,{Panel:$e}=W;function Le({auth:g,policies:R}){const[I,d]=y.useState(!1),[_,h]=y.useState(null),[c]=l.useForm(),b=[{label:"Full Refund",value:"full_refund"},{label:"Partial Refund",value:"partial_refund"},{label:"No Refund",value:"no_refund"},{label:"Credit Only",value:"credit_only"}],k=()=>{h(null),c.resetFields(),c.setFieldsValue({cancellation_window_hours:24,cancellation_policy:"full_refund",late_cancellation_fee:0,late_cancellation_window_hours:2,require_cancellation_reason:!1,auto_cancel_no_show:!0,no_show_minutes:15,reschedule_window_hours:24,max_reschedule_attempts:2,reschedule_fee:0,reschedule_advance_notice_hours:2,allow_same_day_reschedule:!1,allow_next_day_reschedule:!0,send_reminder_24h:!0,send_reminder_2h:!0,send_reminder_1h:!1,notify_admin_on_cancellation:!0,notify_admin_on_reschedule:!0,notify_employee_on_cancellation:!0,notify_employee_on_reschedule:!0,is_active:!0}),d(!0)},P=n=>{h(n),c.setFieldsValue({name:n.name,description:n.description,cancellation_window_hours:n.cancellation_window_hours,cancellation_policy:n.cancellation_policy,late_cancellation_fee:n.late_cancellation_fee,late_cancellation_window_hours:n.late_cancellation_window_hours,require_cancellation_reason:n.require_cancellation_reason,auto_cancel_no_show:n.auto_cancel_no_show,no_show_minutes:n.no_show_minutes,reschedule_window_hours:n.reschedule_window_hours,max_reschedule_attempts:n.max_reschedule_attempts,reschedule_fee:n.reschedule_fee,reschedule_advance_notice_hours:n.reschedule_advance_notice_hours,allow_same_day_reschedule:n.allow_same_day_reschedule,allow_next_day_reschedule:n.allow_next_day_reschedule,send_reminder_24h:n.send_reminder_24h,send_reminder_2h:n.send_reminder_2h,send_reminder_1h:n.send_reminder_1h,notify_admin_on_cancellation:n.notify_admin_on_cancellation,notify_admin_on_reschedule:n.notify_admin_on_reschedule,notify_employee_on_cancellation:n.notify_employee_on_cancellation,notify_employee_on_reschedule:n.notify_employee_on_reschedule,is_active:n.is_active,sort_order:n.sort_order}),d(!0)},N=()=>{c.validateFields().then(n=>{const i={name:n.name,description:n.description||"",cancellation_window_hours:n.cancellation_window_hours,cancellation_policy:n.cancellation_policy,late_cancellation_fee:n.late_cancellation_fee,late_cancellation_window_hours:n.late_cancellation_window_hours,require_cancellation_reason:n.require_cancellation_reason||!1,auto_cancel_no_show:n.auto_cancel_no_show||!1,no_show_minutes:n.no_show_minutes,reschedule_window_hours:n.reschedule_window_hours,max_reschedule_attempts:n.max_reschedule_attempts,reschedule_fee:n.reschedule_fee,reschedule_advance_notice_hours:n.reschedule_advance_notice_hours,allow_same_day_reschedule:n.allow_same_day_reschedule||!1,allow_next_day_reschedule:n.allow_next_day_reschedule||!1,send_reminder_24h:n.send_reminder_24h||!1,send_reminder_2h:n.send_reminder_2h||!1,send_reminder_1h:n.send_reminder_1h||!1,notify_admin_on_cancellation:n.notify_admin_on_cancellation||!1,notify_admin_on_reschedule:n.notify_admin_on_reschedule||!1,notify_employee_on_cancellation:n.notify_employee_on_cancellation||!1,notify_employee_on_reschedule:n.notify_employee_on_reschedule||!1,is_active:n.is_active||!1,sort_order:n.sort_order||0};_?m.put(route("admin.booking-policies.update",_.id),i):m.post(route("admin.booking-policies.store"),i),d(!1)})},v=()=>{d(!1),h(null),c.resetFields()},C=n=>{m.post(route("admin.booking-policies.delete",n))},q=[{title:"Policy Name",dataIndex:"name",key:"name",render:(n,i)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:n}),i.description&&e.jsx(r,{type:"secondary",style:{fontSize:"12px"},children:i.description})]})},{title:"Cancellation",key:"cancellation",render:(n,i)=>e.jsxs("div",{children:[e.jsx("div",{children:e.jsxs(x,{color:"red",children:[i.cancellation_window_hours,"h window"]})}),e.jsx(r,{type:"secondary",style:{fontSize:"12px"},children:i.cancellation_policy_text}),i.late_cancellation_fee>0&&e.jsxs(r,{type:"secondary",style:{fontSize:"12px",display:"block"},children:["Late fee: ₹",i.late_cancellation_fee]})]})},{title:"Reschedule",key:"reschedule",render:(n,i)=>e.jsxs("div",{children:[e.jsx("div",{children:e.jsxs(x,{color:"blue",children:[i.reschedule_window_hours,"h window"]})}),e.jsxs(r,{type:"secondary",style:{fontSize:"12px"},children:["Max ",i.max_reschedule_attempts," attempts"]}),i.reschedule_fee>0&&e.jsxs(r,{type:"secondary",style:{fontSize:"12px",display:"block"},children:["Fee: ₹",i.reschedule_fee]})]})},{title:"Notifications",key:"notifications",render:(n,i)=>e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx(f,{})," Reminders"]}),e.jsx(r,{type:"secondary",style:{fontSize:"12px"},children:[i.send_reminder_24h&&"24h",i.send_reminder_2h&&"2h",i.send_reminder_1h&&"1h"].filter(Boolean).join(", ")})]})},{title:"Status",dataIndex:"is_active",key:"is_active",render:n=>e.jsx(x,{color:n?"green":"red",children:n?"Active":"Inactive"})},{title:"Actions",key:"actions",render:(n,i)=>e.jsxs($,{children:[e.jsx(u,{type:"text",icon:e.jsx(L,{}),onClick:()=>P(i),size:"small"}),e.jsx(O,{title:"Are you sure you want to delete this policy?",onConfirm:()=>C(i.id),okText:"Yes",cancelText:"No",children:e.jsx(u,{type:"text",icon:e.jsx(V,{}),danger:!0,size:"small"})})]})}];return e.jsxs(A,{auth:g,children:[e.jsx(S,{title:"Booking Policies"}),e.jsxs("div",{style:{padding:"24px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsxs("div",{children:[e.jsx(H,{level:2,style:{margin:0},children:"Booking Policies"}),e.jsx(r,{type:"secondary",children:"Manage reschedule and cancellation settings"})]}),e.jsx(u,{type:"primary",icon:e.jsx(z,{}),onClick:k,size:"large",children:"Add Policy"})]}),e.jsx(T,{children:e.jsx(M,{columns:q,dataSource:R,rowKey:"id",pagination:!1})}),e.jsx(B,{title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(D,{}),_?"Edit Policy":"Add New Policy"]}),open:I,onOk:N,onCancel:v,width:800,okText:_?"Update":"Create",cancelText:"Cancel",children:e.jsxs(l,{form:c,layout:"vertical",style:{marginTop:"16px"},children:[e.jsxs(t,{gutter:16,children:[e.jsx(s,{span:12,children:e.jsx(l.Item,{name:"name",label:"Policy Name",rules:[{required:!0,message:"Please enter policy name"}],children:e.jsx(w,{placeholder:"e.g., Standard Policy"})})}),e.jsx(s,{span:12,children:e.jsx(l.Item,{name:"is_active",label:"Status",valuePropName:"checked",children:e.jsx(a,{checkedChildren:"Active",unCheckedChildren:"Inactive"})})})]}),e.jsx(l.Item,{name:"description",label:"Description",children:e.jsx(K,{rows:2,placeholder:"Brief description of this policy..."})}),e.jsxs(p,{orientation:"left",children:[e.jsx(j,{})," Cancellation Settings"]}),e.jsxs(t,{gutter:16,children:[e.jsx(s,{span:8,children:e.jsx(l.Item,{name:"cancellation_window_hours",label:"Cancellation Window (hours)",rules:[{required:!0,message:"Required"}],children:e.jsx(o,{min:0,style:{width:"100%"},placeholder:"24"})})}),e.jsx(s,{span:8,children:e.jsx(l.Item,{name:"cancellation_policy",label:"Cancellation Policy",rules:[{required:!0,message:"Required"}],children:e.jsx(E,{options:b})})}),e.jsx(s,{span:8,children:e.jsx(l.Item,{name:"late_cancellation_fee",label:"Late Cancellation Fee (₹)",rules:[{required:!0,message:"Required"}],children:e.jsx(o,{min:0,step:.01,style:{width:"100%"},placeholder:"0"})})})]}),e.jsxs(t,{gutter:16,children:[e.jsx(s,{span:8,children:e.jsx(l.Item,{name:"late_cancellation_window_hours",label:"Late Fee Window (hours)",rules:[{required:!0,message:"Required"}],children:e.jsx(o,{min:0,style:{width:"100%"},placeholder:"2"})})}),e.jsx(s,{span:8,children:e.jsx(l.Item,{name:"no_show_minutes",label:"No-Show Auto-Cancel (min)",rules:[{required:!0,message:"Required"}],children:e.jsx(o,{min:1,style:{width:"100%"},placeholder:"15"})})}),e.jsx(s,{span:8,children:e.jsx(l.Item,{name:"require_cancellation_reason",label:"Require Reason",valuePropName:"checked",children:e.jsx(a,{})})})]}),e.jsx(l.Item,{name:"auto_cancel_no_show",label:"Auto-Cancel No-Shows",valuePropName:"checked",children:e.jsx(a,{})}),e.jsxs(p,{orientation:"left",children:[e.jsx(j,{})," Reschedule Settings"]}),e.jsxs(t,{gutter:16,children:[e.jsx(s,{span:8,children:e.jsx(l.Item,{name:"reschedule_window_hours",label:"Reschedule Window (hours)",rules:[{required:!0,message:"Required"}],children:e.jsx(o,{min:0,style:{width:"100%"},placeholder:"24"})})}),e.jsx(s,{span:8,children:e.jsx(l.Item,{name:"max_reschedule_attempts",label:"Max Reschedule Attempts",rules:[{required:!0,message:"Required"}],children:e.jsx(o,{min:0,style:{width:"100%"},placeholder:"2"})})}),e.jsx(s,{span:8,children:e.jsx(l.Item,{name:"reschedule_fee",label:"Reschedule Fee (₹)",rules:[{required:!0,message:"Required"}],children:e.jsx(o,{min:0,step:.01,style:{width:"100%"},placeholder:"0"})})})]}),e.jsxs(t,{gutter:16,children:[e.jsx(s,{span:8,children:e.jsx(l.Item,{name:"reschedule_advance_notice_hours",label:"Advance Notice (hours)",rules:[{required:!0,message:"Required"}],children:e.jsx(o,{min:0,style:{width:"100%"},placeholder:"2"})})}),e.jsx(s,{span:8,children:e.jsx(l.Item,{name:"allow_same_day_reschedule",label:"Allow Same Day",valuePropName:"checked",children:e.jsx(a,{})})}),e.jsx(s,{span:8,children:e.jsx(l.Item,{name:"allow_next_day_reschedule",label:"Allow Next Day",valuePropName:"checked",children:e.jsx(a,{})})})]}),e.jsxs(p,{orientation:"left",children:[e.jsx(f,{})," Notification Settings"]}),e.jsxs(t,{gutter:16,children:[e.jsx(s,{span:8,children:e.jsx(l.Item,{name:"send_reminder_24h",label:"24h Reminder",valuePropName:"checked",children:e.jsx(a,{})})}),e.jsx(s,{span:8,children:e.jsx(l.Item,{name:"send_reminder_2h",label:"2h Reminder",valuePropName:"checked",children:e.jsx(a,{})})}),e.jsx(s,{span:8,children:e.jsx(l.Item,{name:"send_reminder_1h",label:"1h Reminder",valuePropName:"checked",children:e.jsx(a,{})})})]}),e.jsxs(t,{gutter:16,children:[e.jsx(s,{span:12,children:e.jsx(l.Item,{name:"notify_admin_on_cancellation",label:"Notify Admin on Cancellation",valuePropName:"checked",children:e.jsx(a,{})})}),e.jsx(s,{span:12,children:e.jsx(l.Item,{name:"notify_admin_on_reschedule",label:"Notify Admin on Reschedule",valuePropName:"checked",children:e.jsx(a,{})})})]}),e.jsxs(t,{gutter:16,children:[e.jsx(s,{span:12,children:e.jsx(l.Item,{name:"notify_employee_on_cancellation",label:"Notify Employee on Cancellation",valuePropName:"checked",children:e.jsx(a,{})})}),e.jsx(s,{span:12,children:e.jsx(l.Item,{name:"notify_employee_on_reschedule",label:"Notify Employee on Reschedule",valuePropName:"checked",children:e.jsx(a,{})})})]})]})})]})]})}export{Le as default};
