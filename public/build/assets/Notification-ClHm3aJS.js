import{r as h,j as e,H as q}from"./app-G1tMMJ2-.js";import{A as Y,R as k}from"./AdminLayout-B4T3DR1e.js";import{F as s}from"./index-aQSphIMq.js";import{I as J,T as U,C as x,B as S,S as c}from"./Logo-DFob1dZj.js";import{R as I,C as u}from"./row-B62nxuhq.js";import{F as T}from"./Table-CuOZH1zw.js";import{R as V}from"./PlusOutlined-DlUtAr3Y.js";import{B as j}from"./index-C7qh8VmD.js";import{A as f}from"./UserOutlined-CS77HkGU.js";import{D as C}from"./index-BNXyMrz1.js";import{R}from"./CheckCircleOutlined-B_EBkJG1.js";import{R as g}from"./ClockCircleOutlined-BcZRGHw_.js";import{M as Z}from"./index-CFRd3LyJ.js";import{I as y}from"./index-Bycr-HnA.js";import{S as v}from"./index-CMNepdNd.js";import{S as w}from"./index-giCyjNB7.js";import{T as d}from"./index-BwGZRgBc.js";import{R as K}from"./EditOutlined-LJEivLki.js";import{s as B}from"./index-aLU57_VL.js";import{R as Q}from"./MailOutlined-EqDxLz4Y.js";import{R as L}from"./DeleteOutlined-lsjmLo4W.js";/* empty css            */import"./index-BGvA9JvN.js";import"./move-R-PJffi-.js";import"./DollarOutlined-DWeza2aw.js";import"./FileTextOutlined-CQ6bQI8R.js";import"./GiftOutlined-DGo8mT99.js";import"./useForm-sufLQeRK.js";import"./CheckCircleFilled-1PUsj7uX.js";import"./InfoCircleFilled-ByGB8WiA.js";import"./addEventListener-DmQffKHL.js";import"./DownOutlined-DSyotbNm.js";import"./index-DGMPwGqQ.js";import"./Pagination-D99l3jkE.js";import"./index-DqUOVQrk.js";import"./extendsObject-78o_rR5W.js";import"./index-CSOh2myX.js";import"./Input-BZM9DGDd.js";import"./useClosable-B364swgM.js";import"./EyeOutlined-DSLmGhQb.js";import"./EyeOutlined-Bmd706kk.js";var G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 512a48 48 0 1096 0 48 48 0 10-96 0zm200 0a48 48 0 1096 0 48 48 0 10-96 0zm-400 0a48 48 0 1096 0 48 48 0 10-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"message",theme:"outlined"};function b(){return b=Object.assign?Object.assign.bind():function(a){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var m in r)Object.prototype.hasOwnProperty.call(r,m)&&(a[m]=r[m])}return a},b.apply(this,arguments)}const W=(a,i)=>h.createElement(J,b({},a,{ref:i,icon:G})),X=h.forwardRef(W),{Title:ee,Text:p,Paragraph:Ye}=U,{TextArea:te}=y,{Option:n}=v;function Je({auth:a}){const[i,r]=h.useState(!1),[m,A]=h.useState(null),[l]=s.useForm(),M=[{id:1,name:"Booking Confirmation",type:"email",subject:"Your booking has been confirmed",content:"Dear {customer_name}, your booking for {service_name} on {date} at {time} has been confirmed.",is_active:!0,triggers:["booking_confirmed"]},{id:2,name:"Booking Reminder",type:"sms",subject:"Booking Reminder",content:"Reminder: You have a booking for {service_name} tomorrow at {time}. Please arrive 10 minutes early.",is_active:!0,triggers:["24_hours_before"]},{id:3,name:"Payment Success",type:"email",subject:"Payment Successful",content:"Thank you for your payment of â‚¹{amount} for {service_name}. Your booking is confirmed.",is_active:!0,triggers:["payment_success"]},{id:4,name:"Booking Cancellation",type:"sms",subject:"Booking Cancelled",content:"Your booking for {service_name} on {date} has been cancelled. Contact us for rescheduling.",is_active:!1,triggers:["booking_cancelled"]}],N=[{id:1,recipient:"John Doe",type:"email",subject:"Your booking has been confirmed",status:"sent",sent_at:"2024-01-15 10:30:00",delivery_time:"2 seconds"},{id:2,recipient:"Jane Smith",type:"sms",subject:"Booking Reminder",status:"delivered",sent_at:"2024-01-15 09:15:00",delivery_time:"5 seconds"},{id:3,recipient:"Mike Johnson",type:"email",subject:"Payment Successful",status:"failed",sent_at:"2024-01-15 08:45:00",delivery_time:"N/A"}],_=t=>{switch(t){case"email":return e.jsx(Q,{style:{color:"#1890ff"}});case"sms":return e.jsx(X,{style:{color:"#52c41a"}});default:return e.jsx(k,{})}},P=t=>{switch(t){case"sent":return"blue";case"delivered":return"green";case"failed":return"red";default:return"default"}},z=t=>{switch(t){case"sent":return e.jsx(g,{style:{color:"#1890ff"}});case"delivered":return e.jsx(R,{style:{color:"#52c41a"}});case"failed":return e.jsx(L,{style:{color:"#ff4d4f"}});default:return e.jsx(g,{})}},E=[{title:"Template Name",dataIndex:"name",key:"name",render:t=>e.jsx("strong",{children:t})},{title:"Type",dataIndex:"type",key:"type",render:t=>e.jsxs(c,{children:[_(t),e.jsx(d,{color:t==="email"?"blue":"green",children:t.toUpperCase()})]})},{title:"Subject",dataIndex:"subject",key:"subject",ellipsis:!0},{title:"Triggers",dataIndex:"triggers",key:"triggers",render:t=>e.jsx(c,{children:t.map(o=>e.jsx(d,{size:"small",children:o.replace(/_/g," ")},o))})},{title:"Status",dataIndex:"is_active",key:"is_active",render:t=>e.jsx(d,{color:t?"green":"red",children:t?"Active":"Inactive"})},{title:"Actions",key:"actions",render:(t,o)=>e.jsxs(c,{children:[e.jsx(S,{type:"text",icon:e.jsx(K,{}),size:"small",onClick:()=>F(o)}),e.jsx(w,{checked:o.is_active,size:"small",onChange:()=>O(o)})]})}],$=[{title:"Recipient",dataIndex:"recipient",key:"recipient"},{title:"Type",dataIndex:"type",key:"type",render:t=>e.jsxs(c,{children:[_(t),e.jsx(d,{color:t==="email"?"blue":"green",children:t.toUpperCase()})]})},{title:"Subject",dataIndex:"subject",key:"subject",ellipsis:!0},{title:"Status",dataIndex:"status",key:"status",render:t=>e.jsxs(c,{children:[z(t),e.jsx(d,{color:P(t),children:t.toUpperCase()})]})},{title:"Sent At",dataIndex:"sent_at",key:"sent_at"},{title:"Delivery Time",dataIndex:"delivery_time",key:"delivery_time"}],F=t=>{A(t),l.setFieldsValue({name:t.name,type:t.type,subject:t.subject,content:t.content,triggers:t.triggers,is_active:t.is_active}),r(!0)},O=t=>{B.success(`${t.name} ${t.is_active?"disabled":"enabled"} successfully`)},D=()=>{l.validateFields().then(t=>{B.success("Notification template updated successfully"),r(!1),l.resetFields()})},H=()=>{r(!1),l.resetFields()};return e.jsxs(Y,{auth:a,children:[e.jsx(q,{title:"Notification Management"}),e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsx(ee,{level:2,style:{marginBottom:8},children:"Notification Management"}),e.jsx(p,{type:"secondary",children:"Manage notification templates and view delivery history"})]}),e.jsxs(I,{gutter:[24,24],children:[e.jsx(u,{xs:24,lg:16,children:e.jsx(x,{title:"Notification Templates",extra:e.jsx(S,{type:"primary",icon:e.jsx(V,{}),children:"Add Template"}),children:e.jsx(T,{columns:E,dataSource:M,rowKey:"id",pagination:!1})})}),e.jsx(u,{xs:24,lg:8,children:e.jsx(x,{title:"Quick Stats",children:e.jsxs(c,{direction:"vertical",style:{width:"100%"},children:[e.jsxs("div",{style:{textAlign:"center",padding:"20px"},children:[e.jsx(j,{count:156,showZero:!0,children:e.jsx(f,{size:64,icon:e.jsx(k,{})})}),e.jsx("div",{style:{marginTop:8},children:e.jsx(p,{strong:!0,children:"Total Sent Today"})})]}),e.jsx(C,{}),e.jsxs("div",{style:{textAlign:"center",padding:"20px"},children:[e.jsx(j,{count:98,showZero:!0,children:e.jsx(f,{size:64,icon:e.jsx(R,{})})}),e.jsx("div",{style:{marginTop:8},children:e.jsx(p,{strong:!0,children:"Successfully Delivered"})})]}),e.jsx(C,{}),e.jsxs("div",{style:{textAlign:"center",padding:"20px"},children:[e.jsx(j,{count:58,showZero:!0,children:e.jsx(f,{size:64,icon:e.jsx(g,{})})}),e.jsx("div",{style:{marginTop:8},children:e.jsx(p,{strong:!0,children:"Pending Delivery"})})]})]})})})]}),e.jsx(x,{title:"Recent Notifications",style:{marginTop:24},children:e.jsx(T,{columns:$,dataSource:N,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0}})}),e.jsx(Z,{title:"Edit Notification Template",open:i,onOk:D,onCancel:H,width:700,okText:"Save Changes",children:e.jsxs(s,{form:l,layout:"vertical",children:[e.jsxs(I,{gutter:16,children:[e.jsx(u,{span:12,children:e.jsx(s.Item,{name:"name",label:"Template Name",rules:[{required:!0,message:"Please enter template name"}],children:e.jsx(y,{placeholder:"Enter template name"})})}),e.jsx(u,{span:12,children:e.jsx(s.Item,{name:"type",label:"Notification Type",rules:[{required:!0,message:"Please select type"}],children:e.jsxs(v,{placeholder:"Select notification type",children:[e.jsx(n,{value:"email",children:"Email"}),e.jsx(n,{value:"sms",children:"SMS"})]})})})]}),e.jsx(s.Item,{name:"subject",label:"Subject",rules:[{required:!0,message:"Please enter subject"}],children:e.jsx(y,{placeholder:"Enter notification subject"})}),e.jsx(s.Item,{name:"content",label:"Content",rules:[{required:!0,message:"Please enter content"}],children:e.jsx(te,{rows:4,placeholder:"Enter notification content. Use {variable_name} for dynamic content."})}),e.jsx(s.Item,{name:"triggers",label:"Triggers",rules:[{required:!0,message:"Please select triggers"}],children:e.jsxs(v,{mode:"multiple",placeholder:"Select when this notification should be sent",children:[e.jsx(n,{value:"booking_confirmed",children:"Booking Confirmed"}),e.jsx(n,{value:"booking_cancelled",children:"Booking Cancelled"}),e.jsx(n,{value:"payment_success",children:"Payment Success"}),e.jsx(n,{value:"24_hours_before",children:"24 Hours Before"}),e.jsx(n,{value:"1_hour_before",children:"1 Hour Before"})]})}),e.jsx(s.Item,{name:"is_active",label:"Active",valuePropName:"checked",children:e.jsx(w,{})})]})})]})]})}export{Je as default};
