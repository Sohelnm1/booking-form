import{r as m,j as e,H as ee,a as c}from"./app-DEDll9AR.js";import{A as te}from"./AdminLayout-DiEZ2B35.js";import{F as s}from"./index-CNVZPylv.js";import{C as ie,d as re,T as se,B as a,b as le}from"./Logo-B-N0zWbR.js";import{F as S}from"./Table-CNImRVhP.js";import{R as C}from"./PlusOutlined-g136DRi-.js";import{M as w}from"./index-uM4vXguI.js";import{I as p}from"./index-BDWaNcMD.js";import{S as T}from"./index-CvJdu2Nc.js";import{T as E}from"./index-CzJqx6VE.js";import{S as _}from"./index-DQPVsnOL.js";import{T as o}from"./index-ClulcKCA.js";import{S as k}from"./index-BmgT4Ulx.js";import{R as ae}from"./EyeOutlined-Dgh3GSqW.js";import{R as A}from"./EditOutlined-BWiQOlm9.js";import{P as M}from"./index-BkJCwme6.js";import{R as P}from"./DeleteOutlined-cHc3_kg0.js";/* empty css            */import"./index-D0T4vDnu.js";import"./PurePanel-DI_1_OwW.js";import"./move-CESINLyB.js";import"./CalendarOutlined-D-mS0-JV.js";import"./ClockCircleOutlined-CXxhKNjU.js";import"./FileTextOutlined-CJliSb57.js";import"./useForm-C6D9L30Q.js";import"./CheckCircleFilled-z0b-rEXZ.js";import"./InfoCircleFilled-DvigaNyv.js";import"./pickAttrs-BiP3ANKa.js";import"./addEventListener-D4ymVQd_.js";import"./index-BXZuxNhI.js";import"./index-D6vFq78i.js";import"./index-bm3QRPu0.js";import"./index-bloQYPn8.js";import"./Input-DQrPDwVw.js";import"./EyeOutlined-B78wcFKQ.js";const{Title:V,Text:q}=se,{TextArea:R}=p;function He({auth:oe,forms:N,services:O,fieldTypes:v}){const[D,x]=m.useState(!1),[z,u]=m.useState(!1),[j,f]=m.useState(!1),[l,h]=m.useState(null),[y,F]=m.useState(null),[n]=s.useForm(),[d]=s.useForm(),[$,g]=m.useState("1"),B=()=>{h(null),f(!1),n.resetFields(),x(!0)},H=t=>{h(t),f(!1),n.setFieldsValue({name:t.name,description:t.description,is_active:t.is_active,sort_order:t.sort_order,services:t.services?.map(i=>i.id)||[]}),x(!0)},K=t=>{h(t),f(!0),n.setFieldsValue({name:t.name,description:t.description,is_active:t.is_active,sort_order:t.sort_order,services:t.services?.map(i=>i.id)||[]}),x(!0)},L=()=>{n.validateFields().then(t=>{const i=new FormData;Object.keys(t).forEach(r=>{r==="services"?t[r]&&t[r].length>0&&t[r].forEach(b=>{i.append("services[]",b)}):i.append(r,t[r]||"")}),l?c.put(route("admin.forms.update",l.id),i):c.post(route("admin.forms.store"),i),x(!1)})},I=()=>{x(!1),h(null),f(!1),n.resetFields()},J=()=>{F(null),d.resetFields(),d.setFieldsValue({form_id:l?.id,type:"text",is_required:!1,is_primary:!1,sort_order:0}),u(!0)},Q=t=>{F(t),d.setFieldsValue({form_id:t.form_id,label:t.label,name:t.name,type:t.type,placeholder:t.placeholder,help_text:t.help_text,is_required:t.is_required,is_primary:t.is_primary,sort_order:t.sort_order,options:t.options||[],validation_rules:t.validation_rules||[]}),u(!0)},U=()=>{d.validateFields().then(t=>{const i=new FormData;Object.keys(t).forEach(r=>{r==="options"||r==="validation_rules"?t[r]&&t[r].length>0&&t[r].forEach(b=>{i.append(`${r}[]`,b)}):i.append(r,t[r]||"")}),y?c.put(route("admin.form-fields.update",y.id),i):c.post(route("admin.form-fields.store"),i),u(!1)})},Y=()=>{u(!1),F(null),d.resetFields()},W=t=>{c.post(route("admin.forms.delete",t))},G=t=>{c.post(route("admin.form-fields.delete",t))},X=[{title:"Name",dataIndex:"name",key:"name",render:(t,i)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:t}),i.description&&e.jsx(q,{type:"secondary",style:{fontSize:"12px"},children:i.description})]})},{title:"Fields",dataIndex:"fields",key:"fields",render:t=>e.jsxs("div",{children:[e.jsx("div",{children:e.jsxs(o,{color:"blue",children:[t?.length||0," fields"]})}),t&&t.length>0&&e.jsxs("div",{style:{marginTop:4},children:[t.slice(0,3).map((i,r)=>e.jsx(o,{size:"small",color:i.is_primary?"green":"default",children:i.label},r)),t.length>3&&e.jsxs(o,{size:"small",children:["+",t.length-3," more"]})]})]})},{title:"Services",dataIndex:"services",key:"services",render:t=>e.jsx("div",{children:t&&t.length>0?t.map((i,r)=>e.jsx(o,{color:"purple",children:i.name},r)):e.jsx(q,{type:"secondary",children:"No services"})})},{title:"Status",dataIndex:"is_active",key:"is_active",render:t=>e.jsx(o,{color:t?"green":"red",children:t?"Active":"Inactive"})},{title:"Actions",key:"actions",render:(t,i)=>e.jsxs(k,{children:[e.jsx(a,{type:"text",icon:e.jsx(ae,{}),onClick:()=>K(i),title:"View Form"}),e.jsx(a,{type:"text",icon:e.jsx(A,{}),onClick:()=>H(i),title:"Edit Form"}),e.jsx(a,{type:"text",icon:e.jsx(le,{}),onClick:()=>{h(i),g("2")},title:"Manage Fields"}),e.jsx(M,{title:"Are you sure you want to delete this form?",onConfirm:()=>W(i.id),okText:"Yes",cancelText:"No",children:e.jsx(a,{type:"text",danger:!0,icon:e.jsx(P,{}),title:"Delete Form"})})]})}],Z=[{title:"Label",dataIndex:"label",key:"label"},{title:"Type",dataIndex:"type",key:"type",render:t=>e.jsx(o,{color:"blue",children:v[t]||t})},{title:"Required",dataIndex:"is_required",key:"is_required",render:t=>e.jsx(o,{color:t?"red":"default",children:t?"Required":"Optional"})},{title:"Primary",dataIndex:"is_primary",key:"is_primary",render:t=>e.jsx(o,{color:t?"green":"default",children:t?"Primary":"Custom"})},{title:"Actions",key:"actions",render:(t,i)=>e.jsxs(k,{children:[e.jsx(a,{type:"text",icon:e.jsx(A,{}),onClick:()=>Q(i),title:"Edit Field"}),e.jsx(M,{title:"Are you sure you want to delete this field?",onConfirm:()=>G(i.id),okText:"Yes",cancelText:"No",children:e.jsx(a,{type:"text",danger:!0,icon:e.jsx(P,{}),title:"Delete Field"})})]})}];return e.jsxs(te,{children:[e.jsx(ee,{title:"Forms"}),e.jsxs("div",{children:[e.jsx(ie,{title:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(V,{level:3,style:{margin:0},children:"Forms Management"}),e.jsx(a,{type:"primary",icon:e.jsx(C,{}),onClick:B,children:"Add Form"})]}),children:e.jsx(re,{activeKey:$,onChange:g,items:[{key:"1",label:"Forms",children:e.jsx(S,{columns:X,dataSource:N,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0}})},...l?[{key:"2",label:"Form Fields",children:e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs(V,{level:4,children:["Fields for:"," ",l.name]}),e.jsx(a,{type:"primary",icon:e.jsx(C,{}),onClick:J,children:"Add Field"})]}),e.jsx(S,{columns:Z,dataSource:l.fields||[],rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0}})]})}]:[]]})}),e.jsx(w,{title:j?"View Form":l?"Edit Form":"Add Form",open:D,onOk:j?I:L,onCancel:I,width:600,okText:j?"Close":l?"Update":"Create",cancelText:"Cancel",children:e.jsxs(s,{form:n,layout:"vertical",disabled:j,children:[e.jsx(s.Item,{name:"name",label:"Form Name",rules:[{required:!0,message:"Please enter form name"}],children:e.jsx(p,{placeholder:"Enter form name"})}),e.jsx(s.Item,{name:"description",label:"Description",children:e.jsx(R,{rows:3,placeholder:"Enter form description"})}),e.jsx(s.Item,{name:"services",label:"Associated Services",children:e.jsx(T,{mode:"multiple",placeholder:"Select services",options:O.map(t=>({label:t.name,value:t.id}))})}),e.jsx(s.Item,{name:"sort_order",label:"Sort Order",children:e.jsx(E,{min:0,placeholder:"Enter sort order",style:{width:"100%"}})}),e.jsx(s.Item,{name:"is_active",label:"Active",valuePropName:"checked",children:e.jsx(_,{})})]})}),e.jsx(w,{title:y?"Edit Field":"Add Field",open:z,onOk:U,onCancel:Y,width:600,okText:y?"Update":"Create",cancelText:"Cancel",children:e.jsxs(s,{form:d,layout:"vertical",children:[e.jsx(s.Item,{name:"form_id",hidden:!0,children:e.jsx(p,{})}),e.jsx(s.Item,{name:"label",label:"Field Label",rules:[{required:!0,message:"Please enter field label"}],children:e.jsx(p,{placeholder:"Enter field label"})}),e.jsx(s.Item,{name:"name",label:"Field Name",rules:[{required:!0,message:"Please enter field name"}],children:e.jsx(p,{placeholder:"Enter field name (e.g., phone_number)"})}),e.jsx(s.Item,{name:"type",label:"Field Type",rules:[{required:!0,message:"Please select field type"}],children:e.jsx(T,{placeholder:"Select field type",options:Object.entries(v).map(([t,i])=>({label:i,value:t}))})}),e.jsx(s.Item,{name:"placeholder",label:"Placeholder",children:e.jsx(p,{placeholder:"Enter placeholder text"})}),e.jsx(s.Item,{name:"help_text",label:"Help Text",children:e.jsx(R,{rows:2,placeholder:"Enter help text"})}),e.jsx(s.Item,{name:"is_required",label:"Required",valuePropName:"checked",children:e.jsx(_,{})}),e.jsx(s.Item,{name:"is_primary",label:"Primary Field (Phone, Name, Email)",valuePropName:"checked",children:e.jsx(_,{})}),e.jsx(s.Item,{name:"sort_order",label:"Sort Order",children:e.jsx(E,{min:0,placeholder:"Enter sort order",style:{width:"100%"}})})]})})]})]})}export{He as default};
