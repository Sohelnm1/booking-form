import{r as l,j as e,H as O,a as p}from"./app-CjLSFTvF.js";import{A as z,R as V}from"./AdminLayout-CaACskhm.js";import{F as n}from"./index-BhQBVMnT.js";import{C as N,T as H,B as x}from"./Logo-DLy9Pi-u.js";import{F as L}from"./Table-7REDeCqW.js";import{M as D}from"./index-BFDovZzk.js";import{R as g,C as c}from"./row-CQ454HWN.js";import{I as v}from"./index-D0ij-sgg.js";import{T as b}from"./index-D1-7wZL6.js";import{S as P}from"./index-ErLwKW1B.js";import{T}from"./index-YgNiGMGF.js";import{S as q}from"./index-Cz--6uym.js";import{R as B}from"./EyeOutlined-C1FdwiFg.js";import{R as J}from"./EditOutlined-B1M0cp84.js";import{R as K}from"./DeleteOutlined-CW1zqXNb.js";/* empty css            */import"./index-CgCFGhN9.js";import"./index-DczFaLwX.js";import"./PurePanel-Ctdvl-zP.js";import"./move-BHpooOi0.js";import"./LogoutOutlined-Di16fjZE.js";import"./CalendarOutlined-C51-_ebW.js";import"./DollarOutlined-CnvFJIap.js";import"./UserOutlined-BTlIJHQK.js";import"./ClockCircleOutlined-B5klXXHM.js";import"./FileTextOutlined-CosqdZ2W.js";import"./GiftOutlined-CqMUofQ6.js";import"./SettingOutlined-CjjuPnIM.js";import"./useForm-DYbDyyqO.js";import"./CheckCircleFilled-Dt1Auu-O.js";import"./InfoCircleFilled-D_PNQDwx.js";import"./pickAttrs-D4RZEvRE.js";import"./addEventListener-Dkb8_L8w.js";import"./index-Dc7Stc7a.js";import"./index-_UDQvjMi.js";import"./Input-DRyzWO36.js";import"./index-KNdCQ6Gc.js";import"./index-CdVV1a5r.js";import"./index-BV1LEswr.js";import"./useClosable-C1CguS7l.js";import"./EyeOutlined-FpwRxIr8.js";import"./EyeOutlined-Bmd706kk.js";const{Title:Q,Text:U}=H;function ze({auth:S,durations:w,errors:d}){const[h,a]=l.useState(!1),[i,f]=l.useState(null),[r]=n.useForm(),[F,m]=l.useState(!1),[I,j]=l.useState(null),_=w||[];l.useEffect(()=>{d&&Object.keys(d).length>0&&(Object.keys(d).forEach(t=>{r.setFields([{name:t,errors:[d[t]]}])}),a(!0))},[d,r]),l.useEffect(()=>{if(h)if(i){const t={name:i.name,hours:i.hours||0,minutes:i.minutes||0,label:i.label,is_active:i.is_active,sort_order:i.sort_order||0};setTimeout(()=>{r.setFieldsValue(t)},100)}else setTimeout(()=>{r.setFieldsValue({hours:0,minutes:0,is_active:!0,sort_order:0})},100)},[h,i,r]);const k=[{title:"Name",dataIndex:"name",key:"name",render:(t,s)=>e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:t}),e.jsx("div",{style:{fontSize:"12px",color:"#666"},children:s.label})]})})},{title:"Duration",dataIndex:"minutes",key:"duration",render:(t,s)=>{const o=s.hours||0,y=s.minutes||0;let u="";return o>0&&y>0?u=`${o}h ${y}m`:o>0?u=`${o}h`:u=`${y}m`,e.jsx(T,{color:"blue",children:u})}},{title:"Status",dataIndex:"is_active",key:"is_active",render:t=>e.jsx(T,{color:t?"green":"red",children:t?"Active":"Inactive"})},{title:"Sort Order",dataIndex:"sort_order",key:"sort_order",render:t=>t||0},{title:"Actions",key:"actions",render:(t,s)=>e.jsxs(q,{children:[e.jsx(x,{type:"text",icon:e.jsx(B,{}),size:"small",onClick:()=>R(s)}),e.jsx(x,{type:"text",icon:e.jsx(J,{}),size:"small",onClick:()=>E(s)}),e.jsx(x,{type:"text",icon:e.jsx(K,{}),size:"small",danger:!0,loading:I===s.id,disabled:I===s.id,onClick:()=>$(s)})]})}],C=()=>{f(null),r.resetFields(),r.setFields([]),a(!0)},E=t=>{f(t),r.setFields([]),r.resetFields(),a(!0)},R=t=>{p.visit(route("admin.durations.show",t.id))},$=t=>{D.confirm({title:"Delete Duration",content:`Are you sure you want to delete "${t.name}"?`,okText:"Yes",okType:"danger",cancelText:"No",onOk:()=>{j(t.id),p.post(route("admin.durations.delete",t.id),{},{onSuccess:()=>{j(null)},onError:()=>{j(null)}})}})},A=()=>{r.validateFields().then(t=>{m(!0);const s=new FormData;Object.keys(t).forEach(o=>{t[o]!==void 0&&t[o]!==null&&(o==="is_active"?s.append(o,t[o]?"1":"0"):s.append(o,t[o]))}),i?p.put(route("admin.durations.update",i.id),s,{onSuccess:()=>{a(!1),m(!1)},onError:()=>{m(!1)}}):p.post(route("admin.durations.store"),s,{onSuccess:()=>{a(!1),m(!1)},onError:()=>{m(!1)}})})},M=()=>{a(!1),f(null),r.resetFields()};return e.jsxs(z,{auth:S,children:[e.jsx(O,{title:"Durations - Admin Dashboard"}),e.jsxs("div",{style:{padding:"24px"},children:[e.jsxs(N,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsxs("div",{children:[e.jsx(Q,{level:2,style:{margin:0},children:"Durations"}),e.jsx(U,{type:"secondary",children:"Manage service durations for your booking system"})]}),e.jsx(x,{type:"primary",icon:e.jsx(V,{}),onClick:C,children:"Add Duration"})]}),e.jsx(L,{columns:k,dataSource:_,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(t,s)=>`${s[0]}-${s[1]} of ${t} durations`}})]}),e.jsx(D,{title:i?"Edit Duration":"Add Duration",open:h,onOk:A,onCancel:M,confirmLoading:F,width:600,okText:i?"Update":"Add",cancelText:"Cancel",children:e.jsxs(n,{form:r,layout:"vertical",style:{marginTop:"16px"},children:[e.jsxs(g,{gutter:16,children:[e.jsx(c,{span:12,children:e.jsx(n.Item,{name:"name",label:"Name*",rules:[{required:!0,message:"Please enter duration name"}],children:e.jsx(v,{placeholder:"e.g., 1 hour"})})}),e.jsx(c,{span:12,children:e.jsx(n.Item,{name:"hours",label:"Hours",rules:[{type:"number",min:0,message:"Hours must be at least 0"}],children:e.jsx(b,{style:{width:"100%"},placeholder:"1",min:0})})})]}),e.jsxs(g,{gutter:16,children:[e.jsx(c,{span:12,children:e.jsx(n.Item,{name:"minutes",label:"Minutes*",rules:[{required:!0,message:"Please enter minutes"},{type:"number",min:0,max:59,message:"Minutes must be between 0 and 59"}],children:e.jsx(b,{style:{width:"100%"},placeholder:"30",min:0,max:59})})}),e.jsx(c,{span:12,children:e.jsx(n.Item,{name:"sort_order",label:"Sort Order",children:e.jsx(b,{style:{width:"100%"},placeholder:"0",min:0})})})]}),e.jsx(n.Item,{name:"label",label:"Display Label*",rules:[{required:!0,message:"Please enter display label"}],children:e.jsx(v,{placeholder:"e.g., 1 hour"})}),e.jsx(g,{gutter:16,children:e.jsx(c,{span:12,children:e.jsx(n.Item,{name:"is_active",label:"Active",valuePropName:"checked",children:e.jsx(P,{})})})})]})})]})]})}export{ze as default};
