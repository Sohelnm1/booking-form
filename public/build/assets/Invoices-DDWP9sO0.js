import{r as _,j as e,H as T,a as k}from"./app-BfHxJLev.js";import{ab as $,B as a,S as u,T as P,C as c}from"./Logo-ByTCWbzv.js";import{d as S}from"./dayjs.min-BQDfuNaG.js";import{R as A}from"./ArrowLeftOutlined-BOZDv_6S.js";import{R as F,C as p}from"./row-BVcjgeHh.js";import{S as h}from"./index-BWjH-lyH.js";import{a as Y,R as U}from"./FileTextOutlined-DFpKpjsP.js";import{R as H}from"./CheckCircleOutlined-D6CuJjIH.js";import{F as V}from"./Table-CUCRf1fx.js";import{M as W}from"./index-mKmnfojf.js";import{D as n}from"./index-CnrJ35vO.js";import{B as d}from"./index-DfJT6Uh4.js";import{D as m}from"./index-COU8RSOa.js";import{a as w,R as E}from"./PrinterOutlined-Dd9RfBb0.js";import{R as L}from"./EyeOutlined-57BJYlwC.js";/* empty css            */import"./addEventListener-Dg6mIlGd.js";import"./index-BzJdcdlu.js";import"./index-C6DhEKqu.js";import"./move-C9wE6fPM.js";import"./DownOutlined-BgtJ373Q.js";import"./Input-4PZJEFT1.js";import"./index-DrcAB4-k.js";import"./index-nlKG8ON7.js";import"./Pagination-BTHP_1Iz.js";import"./useForm-Cw6609pY.js";import"./index-CP67wOtm.js";import"./extendsObject-78o_rR5W.js";import"./CheckCircleFilled-CtydH8RA.js";import"./InfoCircleFilled-DoiC5mY5.js";import"./useClosable-Dqsl-isX.js";import"./DownloadOutlined-DTidZHln.js";import"./EyeOutlined-Bmd706kk.js";const{Title:N,Text:o}=P;function Se({auth:C,invoices:j,stats:x}){const[t,f]=_.useState(null),[D,y]=_.useState(!1),z=s=>{f(s),y(!0)},v=()=>{y(!1),f(null)},g=s=>{window.open(`/customer/invoices/${s}/download`,"_blank")},b=s=>{switch(s){case"paid":return"success";case"pending":return"warning";case"cancelled":return"error";case"draft":return"default";default:return"default"}},I=s=>{switch(s){case"paid":return"success";case"pending":return"warning";case"failed":return"error";case"refunded":return"default";default:return"default"}},l=s=>S(s).format("MMM DD, YYYY h:mm A"),R=s=>S(s).format("MMM DD, YYYY"),r=s=>`₹${parseFloat(s).toFixed(2)}`,B=[{title:"Invoice #",key:"invoice_number",render:(s,i)=>e.jsxs("div",{children:[e.jsx(o,{strong:!0,children:i.invoice_number}),e.jsx("br",{}),e.jsx(o,{type:"secondary",style:{fontSize:"12px"},children:R(i.issued_date)})]})},{title:"Service",key:"service",render:(s,i)=>e.jsxs("div",{children:[e.jsx(o,{children:i.booking?.service?.name}),e.jsx("br",{}),e.jsxs(o,{type:"secondary",style:{fontSize:"12px"},children:["Booking #",i.booking?.id]})]})},{title:"Amount",key:"total_amount",render:(s,i)=>e.jsxs("div",{children:[e.jsx(o,{strong:!0,style:{fontSize:"16px",color:"#1890ff"},children:r(i.total_amount)}),i.discount_amount>0&&e.jsx("div",{children:e.jsxs(o,{type:"secondary",style:{fontSize:"12px"},children:["Discount: ",r(i.discount_amount)]})}),i.reschedule_fee>0&&e.jsx("div",{children:e.jsxs(o,{type:"secondary",style:{fontSize:"12px"},children:["Reschedule Fee:"," ",r(i.reschedule_fee)]})})]})},{title:"Status",key:"status",render:(s,i)=>e.jsxs(u,{direction:"vertical",size:"small",children:[e.jsx(d,{status:b(i.status),text:i.status.charAt(0).toUpperCase()+i.status.slice(1)}),e.jsx(d,{status:I(i.payment_status),text:i.payment_status.charAt(0).toUpperCase()+i.payment_status.slice(1)})]})},{title:"Actions",key:"actions",render:(s,i)=>e.jsxs(u,{direction:"vertical",size:"small",children:[e.jsx(a,{type:"primary",icon:e.jsx(L,{}),size:"small",onClick:()=>z(i),style:{width:"100%"},children:"View"}),e.jsx(a,{type:"default",icon:e.jsx(w,{}),size:"small",onClick:()=>g(i.id),style:{width:"100%"},children:"Download"})]})}],M=()=>{k.post(route("logout"),{},{onSuccess:()=>{window.location.reload()}})};return e.jsxs("div",{style:{minHeight:"100vh",background:"#f5f5f5"},children:[e.jsx(T,{title:"My Invoices - HospiPal"}),e.jsx("div",{style:{background:"#fff",padding:"16px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",marginBottom:24},children:e.jsxs("div",{style:{maxWidth:1200,margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx($,{variant:"primary",color:"color",background:"white",size:"medium"}),e.jsx(a,{icon:e.jsx(A,{}),onClick:()=>k.visit(route("customer.bookings")),children:"Back to Bookings"})]}),e.jsxs(u,{children:[e.jsxs(o,{children:["Welcome, ",C.user?.name]}),e.jsx(a,{type:"text",onClick:M,size:"small",children:"Logout"})]})]})}),e.jsxs("div",{style:{maxWidth:1200,margin:"0 auto",padding:"0 16px"},children:[e.jsxs(F,{gutter:[16,16],style:{marginBottom:24},children:[e.jsx(p,{xs:24,sm:8,children:e.jsx(c,{children:e.jsx(h,{title:"Total Invoices",value:x.total_invoices,prefix:e.jsx(Y,{}),valueStyle:{color:"#1890ff"}})})}),e.jsx(p,{xs:24,sm:8,children:e.jsx(c,{children:e.jsx(h,{title:"Paid Invoices",value:x.paid_invoices,prefix:e.jsx(H,{}),valueStyle:{color:"#52c41a"}})})}),e.jsx(p,{xs:24,sm:8,children:e.jsx(c,{children:e.jsx(h,{title:"Total Spent",value:x.total_spent,prefix:e.jsx(U,{}),valueStyle:{color:"#52c41a"},formatter:s=>`₹${parseFloat(s).toFixed(2)}`})})})]}),e.jsxs(c,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[e.jsx(N,{level:2,style:{margin:0},children:"My Invoices"}),e.jsxs(o,{type:"secondary",children:["Total: ",j.total," invoices"]})]}),e.jsx(V,{columns:B,dataSource:j.data,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(s,i)=>`${i[0]}-${i[1]} of ${s} invoices`}})]}),e.jsx(W,{title:"Invoice Details",open:D,onCancel:v,footer:[e.jsx(a,{icon:e.jsx(w,{}),onClick:()=>g(t?.id),children:"Download PDF"},"download"),e.jsx(a,{icon:e.jsx(E,{}),onClick:()=>window.print(),children:"Print"},"print"),e.jsx(a,{onClick:v,children:"Close"},"close")],width:800,children:t&&e.jsxs("div",{children:[e.jsxs(n,{title:"Invoice Information",bordered:!0,size:"small",children:[e.jsx(n.Item,{label:"Invoice Number",children:t.invoice_number}),e.jsx(n.Item,{label:"Status",children:e.jsx(d,{status:b(t.status),text:t.status.charAt(0).toUpperCase()+t.status.slice(1)})}),e.jsx(n.Item,{label:"Issued Date",children:l(t.issued_date)}),e.jsx(n.Item,{label:"Due Date",children:l(t.due_date)}),e.jsx(n.Item,{label:"Total Amount",span:2,children:e.jsx(o,{strong:!0,style:{fontSize:"16px"},children:r(t.total_amount)})})]}),e.jsx(m,{}),t.booking&&e.jsxs(e.Fragment,{children:[e.jsxs(n,{title:"Booking Information",bordered:!0,size:"small",children:[e.jsx(n.Item,{label:"Booking ID",children:t.booking.id}),e.jsx(n.Item,{label:"Service",children:t.booking.service?.name}),e.jsx(n.Item,{label:"Appointment",children:l(t.booking.appointment_time)}),e.jsx(n.Item,{label:"Employee",children:t.booking.employee?.name||"Auto-assigned"})]}),e.jsx(m,{})]}),e.jsxs(n,{title:"Payment Information",bordered:!0,size:"small",children:[e.jsx(n.Item,{label:"Payment Status",children:e.jsx(d,{status:I(t.payment_status),text:t.payment_status.charAt(0).toUpperCase()+t.payment_status.slice(1)})}),e.jsx(n.Item,{label:"Payment Method",children:t.payment_method||"Not specified"}),e.jsx(n.Item,{label:"Transaction ID",children:t.transaction_id||"Not available"}),t.payment_date&&e.jsx(n.Item,{label:"Payment Date",children:l(t.payment_date)})]}),t.invoice_items&&e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx(n,{title:"Invoice Items",bordered:!0,size:"small",children:t.invoice_items.map((s,i)=>e.jsx(n.Item,{label:`${s.description} (${s.type})`,children:e.jsxs("div",{children:[e.jsxs(o,{children:["Qty: ",s.quantity]}),e.jsx("br",{}),e.jsxs(o,{children:["Unit Price:"," ",r(s.unit_price)]}),e.jsx("br",{}),e.jsxs(o,{strong:!0,children:["Total:"," ",r(s.total)]})]})},i))})]}),e.jsx(m,{}),e.jsxs("div",{style:{textAlign:"right",padding:"16px",background:"#f9f9f9"},children:[e.jsx("div",{style:{marginBottom:8},children:e.jsxs(o,{children:["Subtotal:"," ",r(t.subtotal)]})}),t.discount_amount>0&&e.jsx("div",{style:{marginBottom:8,color:"#52c41a"},children:e.jsxs(o,{children:["Discount: -",r(t.discount_amount)]})}),t.reschedule_fee>0&&e.jsx("div",{style:{marginBottom:8},children:e.jsxs(o,{children:["Reschedule Fee:"," ",r(t.reschedule_fee)]})}),e.jsx("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#1890ff"},children:e.jsxs(o,{children:["Total:"," ",r(t.total_amount)]})})]})]})})]})]})}export{Se as default};
