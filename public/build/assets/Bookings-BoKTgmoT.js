import{r as h,j as e,a as n,H as z}from"./app-CjLSFTvF.js";import{T as A,B as r,aa as T,ab as R,C as y}from"./Logo-DLy9Pi-u.js";import{C as F}from"./CancelModal-dUSJe_6O.js";import{d as M}from"./dayjs.min-BGN71OSw.js";import{L as g}from"./index-CgCFGhN9.js";import{S as m}from"./index-Cz--6uym.js";import{A as D,R as H}from"./LogoutOutlined-Di16fjZE.js";import{s as f}from"./index-BdNhniXG.js";import{R as Y}from"./ArrowLeftOutlined-BMRj3qJQ.js";import{F as $}from"./Table-7REDeCqW.js";import{T as a}from"./index-YgNiGMGF.js";import{E as N}from"./index-_UDQvjMi.js";import{R as U}from"./BookOutlined-DMP3c20R.js";import{R as W}from"./CalendarOutlined-C51-_ebW.js";/* empty css            */import"./index-BhQBVMnT.js";import"./useForm-DYbDyyqO.js";import"./row-CQ454HWN.js";import"./CheckCircleFilled-Dt1Auu-O.js";import"./InfoCircleFilled-D_PNQDwx.js";import"./index-BFDovZzk.js";import"./pickAttrs-D4RZEvRE.js";import"./useClosable-C1CguS7l.js";import"./PurePanel-Ctdvl-zP.js";import"./index-DVTfiP3p.js";import"./index-Czbv6qhl.js";import"./index-D0ij-sgg.js";import"./Input-DRyzWO36.js";import"./EyeOutlined-FpwRxIr8.js";import"./EyeOutlined-Bmd706kk.js";import"./ExclamationCircleOutlined-B0G8IDio.js";import"./index-BV1LEswr.js";import"./addEventListener-Dkb8_L8w.js";import"./index-Dc7Stc7a.js";import"./move-BHpooOi0.js";import"./index-KNdCQ6Gc.js";import"./index-DczFaLwX.js";import"./index-CdVV1a5r.js";const{Title:j,Text:i}=A,{Header:E,Content:L}=g;function be({auth:l,bookings:o}){const[v,c]=h.useState(!1),[C,d]=h.useState(null);if(!l||!l.user)return e.jsxs("div",{style:{padding:"24px",textAlign:"center"},children:[e.jsx(j,{level:2,children:"Access Denied"}),e.jsx(i,{children:"Please log in to view your bookings."}),e.jsx("br",{}),e.jsx(r,{type:"primary",onClick:()=>n.visit(route("welcome")),style:{marginTop:16},children:"Go to Home"})]});const p=t=>{switch(t){case"confirmed":return"success";case"pending":return"warning";case"completed":return"processing";case"cancelled":return"error";case"no_show":return"default";default:return"default"}},u=t=>{switch(t){case"paid":return"success";case"pending":return"warning";case"failed":return"error";case"refunded":return"default";default:return"default"}},x=t=>M(t).format("MMM DD, YYYY h:mm A"),k=t=>t?t.split(" ").map(s=>s[0]).join("").toUpperCase().slice(0,2):"CU",w=t=>{d(t),c(!0)},S=t=>{c(!1),d(null),f.success("Booking cancelled successfully"),window.location.reload()},_=()=>{c(!1),d(null)},B=()=>{n.post(route("logout"),{},{onSuccess:()=>{window.location.reload()}})},I=[{key:"services",icon:e.jsx(U,{}),label:"Services",onClick:()=>n.visit(route("booking.select-service"))},{key:"bookings",icon:e.jsx(W,{}),label:"Your Bookings"}],b=[{title:"Service",dataIndex:"service",key:"service",render:t=>t?.name||"N/A",responsive:["md"]},{title:"Employee",dataIndex:"employee",key:"employee",render:t=>t?.name||"Auto-assigned",responsive:["lg"]},{title:"Date & Time",dataIndex:"appointment_time",key:"appointment_time",render:t=>x(t)},{title:"Duration",dataIndex:"duration",key:"duration",render:t=>`${t} minutes`,responsive:["md"]},{title:"Status",dataIndex:"status",key:"status",render:t=>e.jsx(a,{color:p(t),children:t.charAt(0).toUpperCase()+t.slice(1)})},{title:"Payment",dataIndex:"payment_status",key:"payment_status",render:t=>e.jsx(a,{color:u(t),children:t.charAt(0).toUpperCase()+t.slice(1)}),responsive:["md"]},{title:"Amount",dataIndex:"total_amount",key:"total_amount",render:t=>`₹${parseFloat(t).toFixed(2)}`,responsive:["sm"]},{title:"Reschedule",key:"reschedule",render:(t,s)=>e.jsx("div",{children:s.reschedule_attempts>0?e.jsxs(m,{direction:"vertical",size:"small",children:[e.jsxs(i,{type:"secondary",style:{fontSize:"12px"},children:[s.reschedule_attempts," time(s)"]}),s.reschedule_payment_amount>0&&e.jsxs(i,{type:"secondary",style:{fontSize:"12px",color:"#52c41a"},children:["Fee: ₹",s.reschedule_payment_amount]})]}):e.jsx(i,{type:"secondary",style:{fontSize:"12px"},children:"Never"})}),responsive:["md"]},{title:"Actions",key:"actions",render:(t,s)=>e.jsxs(m,{children:[e.jsx(r,{size:"small",onClick:()=>n.visit(route("customer.bookings.show",s.id)),children:"View"}),(s.status==="pending"||s.status==="confirmed")&&e.jsx(r,{size:"small",danger:!0,onClick:()=>w(s),children:"Cancel"})]})}];return e.jsxs(g,{style:{minHeight:"100vh"},children:[e.jsx(z,{title:"Your Bookings - HospiPal"}),e.jsxs(E,{style:{background:"#fff",padding:"0 16px",display:"flex",alignItems:"center",justifyContent:"space-between",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",height:"auto",minHeight:64,maxWidth:"100vw",width:"100%",overflow:"hidden"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",flexShrink:0,minWidth:0},children:e.jsx(T,{variant:"primary",color:"color",background:"white",size:"medium"})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flex:1,justifyContent:"flex-end",minWidth:0,overflow:"hidden"},children:[e.jsx(R,{mode:"horizontal",items:I,selectedKeys:["bookings"],style:{border:"none",background:"transparent",fontSize:"14px",minWidth:0,flexShrink:1,maxWidth:"100%"}}),e.jsxs(m,{size:"small",style:{flexShrink:0},children:[e.jsx(D,{style:{backgroundColor:"#1890ff",cursor:"pointer"},onClick:()=>f.info("Profile settings coming soon"),children:k(l.user?.name)}),e.jsx(r,{type:"text",icon:e.jsx(H,{}),onClick:B,size:"small",children:e.jsx("span",{className:"hidden-xs",children:"Logout"})})]})]})]}),e.jsx(L,{style:{padding:"16px"},children:e.jsxs("div",{style:{maxWidth:1200,margin:"0 auto"},children:[e.jsx("div",{className:"mobile-top-spacing"}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsx(r,{icon:e.jsx(Y,{}),onClick:()=>n.visit(route("welcome")),style:{marginBottom:16},children:"Back to Home"}),e.jsx(j,{level:2,style:{marginBottom:8},children:"Your Bookings"}),e.jsx(i,{type:"secondary",children:"View and manage all your appointments"})]}),e.jsx(y,{children:o&&o.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden-xs",children:e.jsx($,{columns:b,dataSource:o,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(t,s)=>`${s[0]}-${s[1]} of ${t} bookings`}})}),e.jsx("div",{className:"visible-xs",children:o.map(t=>e.jsxs(y,{style:{marginBottom:16},styles:{body:{padding:16}},children:[e.jsxs("div",{style:{marginBottom:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:8},children:[e.jsx(i,{strong:!0,style:{fontSize:16},children:t.service?.name}),e.jsx(a,{color:p(t.status),children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]}),e.jsx(i,{type:"secondary",children:x(t.appointment_time)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[e.jsxs("div",{children:[e.jsxs(i,{type:"secondary",children:["Duration:"," "]}),e.jsxs(i,{children:[t.duration," ","minutes"]})]}),e.jsxs("div",{children:[e.jsxs(i,{type:"secondary",children:["Amount:"," "]}),e.jsxs(i,{strong:!0,children:["₹",parseFloat(t.total_amount).toFixed(2)]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(a,{color:u(t.payment_status),children:t.payment_status.charAt(0).toUpperCase()+t.payment_status.slice(1)}),e.jsx(r,{size:"small",type:"primary",onClick:()=>n.visit(route("customer.bookings.show",t.id)),children:"View Details"})]})]},t.id))})]}):e.jsx(N,{description:"No bookings found",style:{padding:"40px 0"},children:e.jsx(r,{type:"primary",onClick:()=>n.visit(route("booking.select-service")),children:"Book Your First Appointment"})})})]})}),e.jsx(F,{visible:v,onCancel:_,onSuccess:S,booking:C})]})}export{be as default};
