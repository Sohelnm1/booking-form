import{r as j,j as e,H as Y,a as M}from"./app-GHJ6SJ9p.js";import{B as V}from"./BookingHeader-DzIAI1N4.js";import{I as J,a9 as U,T as G,C as S,B as h}from"./Logo-CgCrcYaU.js";import{P as K}from"./progress-BOjXP-pI.js";import{R as z,C as u}from"./row-CgwhhCUf.js";import{T as B}from"./index-Di36YMr6.js";import{S as R}from"./index-C4h3PxPQ.js";import{A}from"./index-C9xZ2qKj.js";import{C as X}from"./index-Ckzs-oZH.js";import{R as Z}from"./InfoCircleOutlined-QSYg26sB.js";import{R as P}from"./PlusOutlined-CtpEdgYh.js";import{s as k}from"./index-BceBb3gr.js";import{D as W}from"./index-DshskHDl.js";import{R as ee}from"./ArrowLeftOutlined-DvgnW3XK.js";import{R as te}from"./ArrowRightOutlined-C9w7k2SQ.js";import{M as ie}from"./index-BI7GSswp.js";import{R as ne}from"./ClockCircleOutlined-DL0l6okk.js";/* empty css            */import"./CustomerLoginModal-DyKbhecg.js";import"./PhoneOutlined-X5LTcP1J.js";import"./LockOutlined-C_7BhzfM.js";import"./index-BKi5BDEi.js";import"./Input-Ba6sZIOH.js";import"./pickAttrs-BVXv29NF.js";import"./EyeOutlined-BUY3z7ff.js";import"./EyeOutlined-Bmd706kk.js";import"./index-C_hlbVzA.js";import"./LogoutOutlined-Bdb2DG7j.js";import"./BookOutlined-KgU2wRPd.js";import"./CalendarOutlined-DRjFhB-3.js";import"./CheckCircleFilled-C6274V1h.js";import"./useClosable-C7FjKwvd.js";import"./extendsObject-78o_rR5W.js";import"./InfoCircleFilled-BgQ81YM8.js";import"./PurePanel-oknD4ArD.js";var oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"};function _(){return _=Object.assign?Object.assign.bind():function(r){for(var d=1;d<arguments.length;d++){var f=arguments[d];for(var s in f)Object.prototype.hasOwnProperty.call(f,s)&&(r[s]=f[s])}return r},_.apply(this,arguments)}const se=(r,d)=>j.createElement(J,_({},r,{ref:d,icon:oe})),re=j.forwardRef(se),{Title:y,Text:l}=G;function Ne({service:r,extras:d,bookingSettings:f,selectedPricingTier:s,selectedDuration:le,selectedPrice:ae,auth:F}){const[a,E]=j.useState([]),[g,v]=j.useState({}),[Q,w]=j.useState(!1),[c,I]=j.useState(null),p=f?.max_extras_per_booking||10,T=f?.enable_extra_quantities!==!1;console.log("SelectExtras component - Extras data:",d),console.log("SelectExtras component - Selected extras:",a),console.log("SelectExtras component - Booking settings:",f),d.forEach((t,i)=>{console.log(`Extra ${i+1}:`,{id:t.id,name:t.name,duration_id:t.duration_id,durationRelation:t.durationRelation,hasDurationRelation:!!t.durationRelation,durationLabel:t.durationRelation?.label})});const D=t=>{E(i=>i.find(n=>n.id===t.id)?(v(n=>{const m={...n};return delete m[t.id],m}),i.filter(n=>n.id!==t.id)):i.length>=p?(k.warning(`You can only select up to ${p} different extras.`),i):(v(n=>({...n,[t.id]:1})),[...i,t]))},$=(t,i)=>{if(i<1)E(o=>o.filter(n=>n.id!==t)),v(o=>{const n={...o};return delete n[t],n});else{const n=a.find(m=>m.id===t)?.max_quantity||5;if(i>n){k.warning(`You can only add up to ${n} of this extra.`);return}v(m=>({...m,[t]:i}))}},H=()=>{M.visit(route("booking.select-service"))},O=()=>{const t=a.map(n=>n.id),i=a.map(n=>({id:n.id,quantity:g[n.id]||1})),o=encodeURIComponent(JSON.stringify(i));M.visit(route("booking.select-datetime"),{data:{service_id:r.id,pricing_tier_id:s?.id,selected_duration:s?.duration_minutes||r.duration,selected_price:s?.price||r.price,extras:t,extra_quantities_json:o}})},x=t=>`₹${parseFloat(t).toFixed(2)}`,q=()=>{const t=parseFloat(s?s.price:r.price),i=a.reduce((o,n)=>{const m=g[n.id]||1;return o+parseFloat(n.price)*m},0);return t+i},b=t=>{if(t<60)return`${t} min`;{const i=Math.floor(t/60),o=t%60;return o>0?`${i}h ${o}m`:`${i}h`}},L=(t,i=60)=>{if(!t||t.length<=i)return t;const o=document.createElement("div");o.innerHTML=t;const n=o.textContent||o.innerText||"";return n.length<=i?t:n.substring(0,i).trim()+"..."},N=(t,i)=>{i.stopPropagation(),I(t),w(!0)},C=()=>{w(!1),I(null)};return e.jsxs("div",{children:[e.jsx(Y,{title:"Select Extras - Book Appointment"}),e.jsx(V,{auth:F}),e.jsxs("div",{style:{maxWidth:1200,margin:"0 auto",padding:"24px"},children:[e.jsx("div",{className:"mobile-top-spacing"}),e.jsxs("div",{style:{textAlign:"center",marginBottom:48},children:[e.jsx(U,{variant:"primary",color:"color",background:"white",size:"large"}),e.jsx(y,{level:2,style:{marginTop:24,marginBottom:8},children:"Add Extras (Optional)"}),e.jsx(l,{type:"secondary",style:{fontSize:16},children:"Enhance your experience with additional services"})]}),e.jsxs("div",{style:{marginBottom:32},children:[e.jsx(K,{percent:40,showInfo:!1,strokeColor:"#1890ff",trailColor:"#f0f0f0"}),e.jsx("div",{style:{textAlign:"center",marginTop:8},children:e.jsx(l,{type:"secondary",children:"Step 2 of 5"})})]}),e.jsxs(z,{gutter:[32,32],children:[e.jsxs(u,{xs:24,lg:16,children:[e.jsxs(S,{style:{marginBottom:24},children:[e.jsx(y,{level:4,style:{marginBottom:16},children:"Selected Service"}),e.jsxs(z,{align:"middle",gutter:16,children:[e.jsx(u,{children:e.jsx("div",{style:{width:60,height:60,backgroundColor:r.color||"#f0f0f0",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:24,fontWeight:"bold"},children:r.name.charAt(0)})}),e.jsxs(u,{flex:"1",children:[e.jsxs(y,{level:5,style:{margin:0},children:[r.name,s&&e.jsx(B,{color:"blue",style:{marginLeft:8,fontSize:10},children:s.name})]}),e.jsxs(R,{size:"large",children:[e.jsx(l,{type:"secondary",children:b(s?s.duration_minutes:r.duration)}),e.jsx(l,{strong:!0,children:x(s?s.price:r.price)})]})]})]})]}),e.jsxs(S,{children:[e.jsx(y,{level:4,style:{marginBottom:16},children:"Available Extras"}),d.length===0?e.jsx(A,{message:"No extras available",description:"There are currently no additional services available for this booking.",type:"info",showIcon:!0}):a.length>=p?e.jsx(A,{message:"Maximum extras reached",description:`You have selected the maximum number of extras (${p}). Please remove some extras to add others.`,type:"warning",showIcon:!0}):e.jsx(z,{gutter:[16,16],children:d.map(t=>{const i=a.find(o=>o.id===t.id);return e.jsx(u,{xs:24,sm:12,children:e.jsx(S,{hoverable:!0,style:{cursor:a.length>=p&&!i?"not-allowed":"pointer",border:i?"2px solid #1890ff":"1px solid #f0f0f0",opacity:a.length>=p&&!i?.6:1,transition:"all 0.3s ease"},onClick:()=>{if(a.length>=p&&!i){k.warning(`You can only select up to ${p} different extras.`);return}D(t)},styles:{body:{padding:16}},children:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(X,{checked:i,style:{marginRight:12}}),e.jsxs("div",{style:{flex:1},children:[e.jsx(y,{level:5,style:{margin:0,marginBottom:4},children:t.name}),t.description&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#666"},dangerouslySetInnerHTML:{__html:L(t.description,60)}}),t.description.length>60&&e.jsx(h,{type:"link",size:"small",icon:e.jsx(Z,{}),onClick:o=>N(t,o),style:{padding:0,height:"auto",fontSize:"10px",color:"#1890ff",marginTop:2},children:"Read More"})]}),e.jsx("div",{style:{marginTop:8},children:e.jsxs(R,{size:"small",children:[t.durationRelation&&e.jsx(B,{size:"small",children:t.durationRelation.label}),e.jsx(B,{size:"small",color:"green",children:x(t.price)})]})})]}),i&&T&&e.jsx("div",{style:{marginLeft:12},children:e.jsxs(R,{children:[e.jsx(h,{size:"small",icon:e.jsx(re,{}),onClick:o=>{o.stopPropagation();const n=g[t.id]||1;$(t.id,n-1)}}),e.jsx(l,{strong:!0,style:{minWidth:20,textAlign:"center"},children:g[t.id]||1}),e.jsx(h,{size:"small",icon:e.jsx(P,{}),onClick:o=>{o.stopPropagation();const n=g[t.id]||1;$(t.id,n+1)}})]})})]})})},t.id)})})]})]}),e.jsx(u,{xs:24,lg:8,children:e.jsxs(S,{style:{position:"sticky",top:24},children:[e.jsx(y,{level:4,style:{marginBottom:16},children:"Booking Summary"}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsxs(l,{strong:!0,children:[r.name,s&&e.jsx(B,{color:"blue",style:{marginLeft:8,fontSize:10},children:s.name})]}),e.jsx(l,{children:x(s?s.price:r.price)})]}),e.jsx(l,{type:"secondary",style:{fontSize:12},children:b(s?s.duration_minutes:r.duration)})]}),a.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(W,{style:{margin:"12px 0"}}),a.map(t=>{const i=g[t.id]||1,o=parseFloat(t.price)*i;return e.jsxs("div",{style:{marginBottom:8},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(l,{children:["+ ",t.name,i>1&&e.jsxs(l,{type:"secondary",style:{fontSize:12},children:[" ","× ",i]})]}),e.jsx(l,{children:x(o)})]}),e.jsxs(l,{type:"secondary",style:{fontSize:12},children:[t.duration_relation?t.duration_relation.label:"No additional time",i>1&&e.jsxs(l,{type:"secondary",style:{fontSize:12},children:[" ","× ",i]})]})]},t.id)})]}),e.jsx(W,{style:{margin:"16px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsx(l,{strong:!0,children:"Total Price"}),e.jsx(l,{strong:!0,style:{fontSize:16},children:x(q())})]}),e.jsxs("div",{style:{marginTop:24},children:[e.jsx(h,{block:!0,style:{marginBottom:12},icon:e.jsx(ee,{}),onClick:H,children:"Back to Services"}),e.jsx(h,{type:"primary",block:!0,size:"large",icon:e.jsx(te,{}),onClick:O,children:"Continue to Date & Time"})]})]})})]})]}),e.jsx(ie,{title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{width:40,height:40,borderRadius:"8px",background:"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:18,fontWeight:"bold"},children:c?.name?.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#1f1f1f"},children:c?.name}),e.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:2},children:"Extra Service Details"})]})]}),open:Q,onCancel:C,footer:[e.jsx(h,{onClick:C,children:"Close"},"close"),e.jsx(h,{type:"primary",onClick:()=>{D(c),C()},children:"Add This Extra"},"select")],width:500,centered:!0,children:c&&e.jsxs("div",{style:{padding:"16px 0"},children:[c.description&&e.jsxs("div",{style:{marginBottom:20},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#1f1f1f",marginBottom:8},children:"Description"}),e.jsx("div",{style:{fontSize:"14px",lineHeight:1.5,color:"#666"},dangerouslySetInnerHTML:{__html:c.description}})]}),e.jsxs("div",{style:{marginBottom:20},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#1f1f1f",marginBottom:12},children:"Service Information"}),e.jsxs(z,{gutter:16,children:[e.jsx(u,{span:12,children:e.jsxs("div",{style:{padding:"12px",background:"#f8f9fa",borderRadius:"6px",border:"1px solid #e8e8e8"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[e.jsx(ne,{style:{color:"#1890ff",fontSize:14}}),e.jsx("span",{style:{fontSize:"11px",color:"#999"},children:"Duration"})]}),e.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#1f1f1f"},children:c.duration_relation?c.duration_relation.label:"No additional time"})]})}),e.jsx(u,{span:12,children:e.jsxs("div",{style:{padding:"12px",background:"#f8f9fa",borderRadius:"6px",border:"1px solid #e8e8e8"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[e.jsx("span",{style:{color:"#52c41a",fontSize:14,fontWeight:"bold"},children:"₹"}),e.jsx("span",{style:{fontSize:"11px",color:"#999"},children:"Regular"})]}),e.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#1f1f1f"},children:x(c.price)})]})})]})]}),e.jsxs("div",{style:{padding:"12px",background:"#f0f8ff",borderRadius:"6px",border:"1px solid #bae7ff"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#1890ff",marginBottom:4},children:"Quantity Limit"}),e.jsxs("div",{style:{fontSize:"12px",lineHeight:1.4,color:"#666"},children:["You can add up to"," ",c.max_quantity||5," of this extra service to your booking."]})]})]})})]})}export{Ne as default};
