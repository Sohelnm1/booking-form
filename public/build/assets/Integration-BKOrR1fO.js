import{r as u,j as e,H as F}from"./app-DEDll9AR.js";import{A as M,b as f}from"./AdminLayout-DiEZ2B35.js";import{F as n}from"./index-CNVZPylv.js";import{I as S,T as q,R as B,a as $,C as L,B as v}from"./Logo-B-N0zWbR.js";import{A as N}from"./index-D6bEU2eY.js";import{S as w}from"./index-BmgT4Ulx.js";import{T as V}from"./index-ClulcKCA.js";import{R as H}from"./EditOutlined-BWiQOlm9.js";import{S as b}from"./index-DQPVsnOL.js";import{M as K}from"./index-uM4vXguI.js";import{I as l}from"./index-BDWaNcMD.js";import{S as p}from"./index-CvJdu2Nc.js";import{R as D}from"./CheckCircleOutlined-CWVuh9Md.js";import{s as m}from"./index-DlRe2vqx.js";/* empty css            */import"./index-D0T4vDnu.js";import"./PurePanel-DI_1_OwW.js";import"./move-CESINLyB.js";import"./CalendarOutlined-D-mS0-JV.js";import"./PlusOutlined-g136DRi-.js";import"./ClockCircleOutlined-CXxhKNjU.js";import"./FileTextOutlined-CJliSb57.js";import"./useForm-C6D9L30Q.js";import"./CheckCircleFilled-z0b-rEXZ.js";import"./InfoCircleFilled-DvigaNyv.js";import"./pickAttrs-BiP3ANKa.js";import"./Input-DQrPDwVw.js";import"./EyeOutlined-B78wcFKQ.js";import"./index-bloQYPn8.js";var G={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"},U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};function j(){return j=Object.assign?Object.assign.bind():function(o){for(var t=1;t<arguments.length;t++){var c=arguments[t];for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&(o[i]=c[i])}return o},j.apply(this,arguments)}const J=(o,t)=>u.createElement(S,j({},o,{ref:t,icon:G})),X=u.forwardRef(J);function y(){return y=Object.assign?Object.assign.bind():function(o){for(var t=1;t<arguments.length;t++){var c=arguments[t];for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&(o[i]=c[i])}return o},y.apply(this,arguments)}const Y=(o,t)=>u.createElement(S,y({},o,{ref:t,icon:U})),Q=u.forwardRef(Y),{Title:W,Text:a,Paragraph:Z}=q,{TextArea:Oe}=l;function Te({auth:o,integrations:t=[]}){const[c,i]=u.useState(!1),[g,P]=u.useState(null),[_,x]=u.useState(!1),[h]=n.useForm(),k=s=>{switch(s){case"active":return"green";case"inactive":return"red";case"pending":return"orange";default:return"default"}},C=s=>{switch(s){case"active":return e.jsx(D,{style:{color:"#52c41a"}});case"inactive":return e.jsx(X,{style:{color:"#ff4d4f"}});case"pending":return e.jsx(f,{style:{color:"#faad14"}});default:return e.jsx(f,{})}},O=s=>{P(s);const r={integration_id:s.id,name:s.name,description:s.description,is_enabled:s.is_enabled};s.settings&&Object.keys(s.settings).forEach(d=>{r[d]=s.settings[d]}),h.setFieldsValue(r),i(!0)},T=async()=>{try{x(!0);const s=await h.validateFields(),r={},d=s.integration_id;switch(d){case"razorpay":r.razorpay_key=s.razorpay_key||"",r.razorpay_secret=s.razorpay_secret||"",r.currency=s.currency||"INR";break;case"sms":r.twilio_sid=s.twilio_sid||"",r.twilio_token=s.twilio_token||"",r.twilio_phone=s.twilio_phone||"";break;case"email":r.sendgrid_key=s.sendgrid_key||"",r.sendgrid_from_email=s.sendgrid_from_email||"",r.sendgrid_from_name=s.sendgrid_from_name||"";break}const I=await fetch(route("admin.integration.update"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({integration_id:d,settings:r})}),E=await I.json();I.ok?(m.success("Integration settings updated successfully"),i(!1),h.resetFields(),window.location.reload()):m.error(E.error||"Failed to update integration settings")}catch(s){console.error("Error updating integration:",s),m.error("Failed to update integration settings")}finally{x(!1)}},z=()=>{i(!1),h.resetFields()},A=s=>{m.success(`${s.name} ${s.is_enabled?"disabled":"enabled"} successfully`)},R=async s=>{try{x(!0);const r=await fetch(route("admin.integration.test"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({integration_id:s.id})}),d=await r.json();r.ok?m.success(d.success||"Connection test successful"):m.error(d.error||"Connection test failed")}catch(r){console.error("Error testing connection:",r),m.error("Failed to test connection")}finally{x(!1)}};return e.jsxs(M,{auth:o,children:[e.jsx(F,{title:"Integration Management"}),e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsx(W,{level:2,style:{marginBottom:8},children:"Integration Management"}),e.jsx(a,{type:"secondary",children:"Manage third-party integrations and API connections"})]}),e.jsx(N,{message:"Integration Status",description:"All integrations are working properly. Last health check: 2 minutes ago",type:"success",showIcon:!0,style:{marginBottom:24}}),e.jsx(B,{gutter:[24,24],children:t.map(s=>e.jsx($,{xs:24,md:12,lg:8,children:e.jsxs(L,{title:e.jsxs(w,{children:[C(s.status),s.name]}),extra:e.jsx(b,{checked:s.is_enabled,onChange:()=>A(s),size:"small"}),actions:[e.jsx(v,{type:"text",icon:e.jsx(H,{}),onClick:()=>O(s),children:"Configure"}),e.jsx(v,{type:"text",icon:e.jsx(f,{}),onClick:()=>R(s),loading:_,children:"Test"})],children:[e.jsx("div",{style:{marginBottom:16},children:e.jsx(Z,{type:"secondary",children:s.description})}),e.jsxs(w,{direction:"vertical",style:{width:"100%"},children:[e.jsxs("div",{children:[e.jsx(a,{strong:!0,children:"Status: "}),e.jsx(V,{color:k(s.status),children:s.status.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx(a,{strong:!0,children:"API Key: "}),e.jsx(a,{code:!0,children:s.api_key})]}),s.id==="razorpay"&&s.settings?.currency&&e.jsxs("div",{children:[e.jsx(a,{strong:!0,children:"Currency: "}),e.jsx(a,{code:!0,children:s.settings.currency})]}),s.id==="sms"&&s.settings?.twilio_phone&&e.jsxs("div",{children:[e.jsx(a,{strong:!0,children:"Phone: "}),e.jsx(a,{code:!0,children:s.settings.twilio_phone})]}),s.id==="email"&&s.settings?.sendgrid_from_email&&e.jsxs("div",{children:[e.jsx(a,{strong:!0,children:"From Email: "}),e.jsx(a,{code:!0,style:{fontSize:"12px"},children:s.settings.sendgrid_from_email})]}),s.last_sync&&e.jsxs("div",{children:[e.jsx(a,{strong:!0,children:"Last Sync: "}),e.jsx(a,{type:"secondary",children:s.last_sync})]})]})]})},s.id))}),e.jsx(K,{title:`Configure ${g?.name}`,open:c,onOk:T,onCancel:z,width:600,okText:"Save Changes",okIcon:e.jsx(Q,{}),confirmLoading:_,children:e.jsxs(n,{form:h,layout:"vertical",children:[e.jsx(n.Item,{name:"integration_id",hidden:!0,children:e.jsx(l,{})}),g?.id==="razorpay"&&e.jsxs(e.Fragment,{children:[e.jsx(n.Item,{name:"razorpay_key",label:"Razorpay API Key",rules:[{required:!0,message:"Please enter Razorpay API key"}],children:e.jsx(l.Password,{placeholder:"rzp_test_..."})}),e.jsx(n.Item,{name:"razorpay_secret",label:"Razorpay API Secret",rules:[{required:!0,message:"Please enter Razorpay API secret"}],children:e.jsx(l.Password,{placeholder:"Enter API secret"})}),e.jsx(n.Item,{name:"currency",label:"Currency",rules:[{required:!0,message:"Please select currency"}],children:e.jsxs(p,{placeholder:"Select currency",children:[e.jsx(p.Option,{value:"INR",children:"Indian Rupee (₹)"}),e.jsx(p.Option,{value:"USD",children:"US Dollar ($)"}),e.jsx(p.Option,{value:"EUR",children:"Euro (€)"}),e.jsx(p.Option,{value:"GBP",children:"British Pound (£)"})]})})]}),g?.id==="sms"&&e.jsxs(e.Fragment,{children:[e.jsx(n.Item,{name:"twilio_sid",label:"Twilio Account SID",rules:[{required:!0,message:"Please enter Twilio Account SID"}],children:e.jsx(l,{placeholder:"AC..."})}),e.jsx(n.Item,{name:"twilio_token",label:"Twilio Auth Token",rules:[{required:!0,message:"Please enter Twilio Auth Token"}],children:e.jsx(l.Password,{placeholder:"Enter auth token"})}),e.jsx(n.Item,{name:"twilio_phone",label:"Twilio Phone Number",rules:[{required:!0,message:"Please enter Twilio phone number"}],children:e.jsx(l,{placeholder:"+1234567890"})})]}),g?.id==="email"&&e.jsxs(e.Fragment,{children:[e.jsx(n.Item,{name:"sendgrid_key",label:"SendGrid API Key",rules:[{required:!0,message:"Please enter SendGrid API key"}],children:e.jsx(l.Password,{placeholder:"SG..."})}),e.jsx(n.Item,{name:"sendgrid_from_email",label:"From Email",rules:[{required:!0,message:"Please enter from email"},{type:"email",message:"Please enter a valid email"}],children:e.jsx(l,{placeholder:"noreply@yourdomain.com"})}),e.jsx(n.Item,{name:"sendgrid_from_name",label:"From Name",rules:[{required:!0,message:"Please enter from name"}],children:e.jsx(l,{placeholder:"Your Business Name"})})]}),e.jsx(n.Item,{name:"is_enabled",label:"Enable Integration",valuePropName:"checked",children:e.jsx(b,{})})]})})]})]})}export{Te as default};
