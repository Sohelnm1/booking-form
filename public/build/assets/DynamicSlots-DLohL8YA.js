import{r as x,u as se,j as e,H as re,a as ie}from"./app-CuTyM8qs.js";import{d as _}from"./dayjs.min-B-Fi_qqr.js";import{A as le}from"./AdminLayout-DxZj7TE_.js";import{I as N,T as ae,a as g}from"./AntdIcon-BWI9q6gw.js";import{R as h,C as r}from"./row-CWvsuTqW.js";import{C as y,B as m,S as E}from"./Logo-DB_VWhtc.js";import{S as b}from"./index-DYphRdHg.js";import{a as ce}from"./FileTextOutlined-BRxWPuCR.js";import{R as de}from"./CheckCircleOutlined-P5OQluHl.js";import{a as pe,b as he}from"./GiftOutlined-6S8Hjigb.js";import{R as xe}from"./PlusOutlined-CTPxMA3q.js";import{F as ue}from"./Table-4kFSLiu0.js";import{M as P}from"./index-BmxFTo2U.js";import{F as l}from"./index-CntA_Z3_.js";import{E as me,I as j}from"./index-BJjxZA3h.js";import{S as D}from"./index-Bge_c090.js";import{T as v}from"./index-RHGTR9Hu.js";import{T as I}from"./index-1gUs91BJ.js";import{D as B}from"./index-DjRYgek2.js";import{S as C}from"./index-BctRl2EA.js";import{s as w}from"./index-BPXjo8WD.js";import{B as fe}from"./index-pG_CG-hd.js";import{R as je}from"./StarOutlined-FHCBuKo1.js";import{R as ye}from"./MobileOutlined-dTDOOOvg.js";import{R as L}from"./CalendarOutlined-D8g-vkNY.js";import{R as V}from"./EyeOutlined-ZY0jRne9.js";import{R as ve}from"./EditOutlined-CNXcJxkr.js";import{P as _e}from"./index-BfXZkYTb.js";import{R as ge}from"./DeleteOutlined-CYjp1E0b.js";/* empty css            */import"./index-DPvNFwos.js";import"./index-Dxhw4rI7.js";import"./move-BX-mCe9T.js";import"./index-BlGZQQRe.js";import"./UserOutlined-0tYNQjqZ.js";import"./ClockCircleOutlined-D0KWJ-QF.js";import"./ClockCircleOutlined-CELcQ7Uv.js";import"./addEventListener-AN7s1qs7.js";import"./DownOutlined-AY4XX3Dn.js";import"./index-BaG1LYaN.js";import"./Pagination-OFeQ4t8h.js";import"./useForm-C90a_f_Q.js";import"./index-BpdwzNf1.js";import"./extendsObject-78o_rR5W.js";import"./index-BUZKeI3G.js";import"./Input-q0YWenEe.js";import"./CheckCircleFilled-C3pB09d-.js";import"./InfoCircleFilled-cdlFFNUN.js";import"./index-B0MsyL9Y.js";import"./useClosable-CPKIXEqQ.js";import"./EyeOutlined-DZcnRuE4.js";import"./EyeOutlined-Bmd706kk.js";import"./CalendarOutlined-DKq2sctu.js";var be={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 140H96c-17.7 0-32 14.3-32 32v496c0 17.7 14.3 32 32 32h380v112H304c-8.8 0-16 7.2-16 16v48c0 4.4 3.6 8 8 8h432c4.4 0 8-3.6 8-8v-48c0-8.8-7.2-16-16-16H548V700h380c17.7 0 32-14.3 32-32V172c0-17.7-14.3-32-32-32zm-40 488H136V212h752v416z"}}]},name:"desktop",theme:"outlined"};function R(){return R=Object.assign?Object.assign.bind():function(d){for(var i=1;i<arguments.length;i++){var p=arguments[i];for(var a in p)Object.prototype.hasOwnProperty.call(p,a)&&(d[a]=p[a])}return d},R.apply(this,arguments)}const we=(d,i)=>x.createElement(N,R({},d,{ref:i,icon:be})),Se=x.forwardRef(we);function T(){return T=Object.assign?Object.assign.bind():function(d){for(var i=1;i<arguments.length;i++){var p=arguments[i];for(var a in p)Object.prototype.hasOwnProperty.call(p,a)&&(d[a]=p[a])}return d},T.apply(this,arguments)}const Ie=(d,i)=>x.createElement(N,T({},d,{ref:i,icon:me})),Ce=x.forwardRef(Ie),{Title:F,Paragraph:H,Text:f}=ae,{TextArea:ke}=j,{Option:k}=D;function kt({auth:d,dynamicSlots:i=[]}){const[p,a]=x.useState(!1),[S,O]=x.useState(null),[c,J]=x.useState(null),[K,z]=x.useState(!1),{data:n,setData:s,post:Q,put:$,processing:U,errors:u,reset:W}=se({title:"",content:"",type:"announcement",icon:null,background_color:"",text_color:"",action_url:"",action_text:"",is_active:!0,sort_order:0,start_date:null,end_date:null,show_on_mobile:!0,show_on_desktop:!0,display_duration:null,priority:1}),M=[{value:"offer",label:"Offer",color:"#52c41a"},{value:"promotion",label:"Promotion",color:"#1890ff"},{value:"announcement",label:"Announcement",color:"#faad14"},{value:"festival",label:"Festival",color:"#722ed1"},{value:"news",label:"News",color:"#13c2c2"}],Y=["🎉","🙏","🌍","💝","🎊","🎈","🎁","⭐","🔥","💯","🏆","🎯","💎","🌟","✨","🎪","🎭","🎨","🎵","🎶","🎸","🎹","🎺","🎻","🎤","🎧","🎬","🎭","🎪","🎨","🎯","🎲","🎮","🎰","🎳","🎯"],q=()=>{O(null),W(),a(!0)},G=t=>{O(t),s({title:t.title,content:t.content,type:t.type,icon:t.icon||null,background_color:t.background_color||"",text_color:t.text_color||"",action_url:t.action_url||"",action_text:t.action_text||"",is_active:t.is_active,sort_order:t.sort_order,start_date:t.start_date?_(t.start_date):null,end_date:t.end_date?_(t.end_date):null,show_on_mobile:t.show_on_mobile,show_on_desktop:t.show_on_desktop,display_duration:t.display_duration,priority:t.priority}),a(!0)},X=t=>{J(t),z(!0)},Z=()=>{console.log("Submitting data:",n),console.log("Icon value:",n.icon),S?$(route("admin.dynamic-slots.update",S.id),{onSuccess:()=>{a(!1),w.success("Dynamic slot updated successfully")}}):Q(route("admin.dynamic-slots.store"),{onSuccess:()=>{a(!1),w.success("Dynamic slot created successfully")}})},ee=t=>{ie.post(route("admin.dynamic-slots.delete",t),{},{onSuccess:()=>{w.success("Dynamic slot deleted successfully")}})},te=t=>{$(route("admin.dynamic-slots.update",t.id),{is_active:!t.is_active},{onSuccess:()=>{w.success(`Dynamic slot ${t.is_active?"deactivated":"activated"} successfully`)}})},oe=[{title:"Status",key:"status",width:80,render:(t,o)=>e.jsx(fe,{status:o.is_active?"success":"default",text:o.is_active?"Active":"Inactive"})},{title:"Type",key:"type",width:120,render:(t,o)=>{const A=M.find(ne=>ne.value===o.type);return e.jsx(v,{color:A?.color,children:A?.label||o.type})}},{title:"Icon",key:"icon",width:80,render:(t,o)=>e.jsx("span",{style:{fontSize:"20px"},children:o.icon||"📢"})},{title:"Title",key:"title",render:(t,o)=>e.jsxs("div",{children:[e.jsx(f,{strong:!0,children:o.title}),e.jsx("br",{}),e.jsx(f,{type:"secondary",style:{fontSize:"12px"},children:o.content.length>50?`${o.content.substring(0,50)}...`:o.content})]})},{title:"Priority",key:"priority",width:100,render:(t,o)=>e.jsxs(v,{color:"blue",children:[e.jsx(je,{})," ",o.priority]})},{title:"Display",key:"display",width:120,render:(t,o)=>e.jsxs(E,{direction:"vertical",size:"small",children:[o.show_on_mobile&&e.jsx(v,{icon:e.jsx(ye,{}),color:"green",children:"Mobile"}),o.show_on_desktop&&e.jsx(v,{icon:e.jsx(Se,{}),color:"blue",children:"Desktop"})]})},{title:"Schedule",key:"schedule",width:150,render:(t,o)=>e.jsxs("div",{style:{fontSize:"12px"},children:[o.start_date&&e.jsxs("div",{children:[e.jsx(L,{})," Start:"," ",_(o.start_date).format("MMM DD")]}),o.end_date&&e.jsxs("div",{children:[e.jsx(L,{})," End:"," ",_(o.end_date).format("MMM DD")]}),!o.start_date&&!o.end_date&&e.jsx(f,{type:"secondary",children:"Always active"})]})},{title:"Actions",key:"actions",width:200,render:(t,o)=>e.jsxs(E,{children:[e.jsx(g,{title:"Preview",children:e.jsx(m,{type:"text",icon:e.jsx(V,{}),onClick:()=>X(o),size:"small"})}),e.jsx(g,{title:"Edit",children:e.jsx(m,{type:"text",icon:e.jsx(ve,{}),onClick:()=>G(o),size:"small"})}),e.jsx(g,{title:o.is_active?"Deactivate":"Activate",children:e.jsx(m,{type:"text",icon:o.is_active?e.jsx(Ce,{}):e.jsx(V,{}),onClick:()=>te(o),size:"small"})}),e.jsx(_e,{title:"Are you sure you want to delete this dynamic slot?",onConfirm:()=>ee(o.id),okText:"Yes",cancelText:"No",children:e.jsx(g,{title:"Delete",children:e.jsx(m,{type:"text",icon:e.jsx(ge,{}),danger:!0,size:"small"})})})]})}];return e.jsxs(le,{auth:d,children:[e.jsx(re,{title:"Dynamic Slots - Admin"}),e.jsxs("div",{style:{maxWidth:1200,margin:"0 auto",padding:"24px"},children:[e.jsxs("div",{style:{marginBottom:32},children:[e.jsx(F,{level:2,children:"Dynamic Slots"}),e.jsx(H,{children:"Manage promotional content, offers, and announcements that appear on the customer dashboard."})]}),e.jsxs(h,{gutter:16,style:{marginBottom:32},children:[e.jsx(r,{span:6,children:e.jsx(y,{children:e.jsx(b,{title:"Total Slots",value:i.length,prefix:e.jsx(ce,{})})})}),e.jsx(r,{span:6,children:e.jsx(y,{children:e.jsx(b,{title:"Active Slots",value:i.filter(t=>t.is_active).length,prefix:e.jsx(de,{}),valueStyle:{color:"#52c41a"}})})}),e.jsx(r,{span:6,children:e.jsx(y,{children:e.jsx(b,{title:"Offers",value:i.filter(t=>t.type==="offer").length,prefix:e.jsx(pe,{}),valueStyle:{color:"#1890ff"}})})}),e.jsx(r,{span:6,children:e.jsx(y,{children:e.jsx(b,{title:"Promotions",value:i.filter(t=>t.type==="promotion").length,prefix:e.jsx(he,{}),valueStyle:{color:"#faad14"}})})})]}),e.jsx("div",{style:{marginBottom:16},children:e.jsx(m,{type:"primary",icon:e.jsx(xe,{}),onClick:q,size:"large",children:"Create Dynamic Slot"})}),e.jsx(y,{children:e.jsx(ue,{columns:oe,dataSource:i,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(t,o)=>`${o[0]}-${o[1]} of ${t} items`}})}),e.jsx(P,{title:S?"Edit Dynamic Slot":"Create Dynamic Slot",open:p,onOk:Z,onCancel:()=>a(!1),width:800,confirmLoading:U,children:e.jsxs(l,{layout:"vertical",children:[e.jsxs(h,{gutter:16,children:[e.jsx(r,{span:12,children:e.jsx(l.Item,{label:"Title",validateStatus:u.title?"error":"",help:u.title,children:e.jsx(j,{value:n.title,onChange:t=>s("title",t.target.value),placeholder:"Enter title"})})}),e.jsx(r,{span:12,children:e.jsx(l.Item,{label:"Type",validateStatus:u.type?"error":"",help:u.type,children:e.jsx(D,{value:n.type,onChange:t=>s("type",t),placeholder:"Select type",children:M.map(t=>e.jsx(k,{value:t.value,children:e.jsx(v,{color:t.color,children:t.label})},t.value))})})})]}),e.jsx(l.Item,{label:"Content",validateStatus:u.content?"error":"",help:u.content,children:e.jsx(ke,{value:n.content,onChange:t=>s("content",t.target.value),placeholder:"Enter content",rows:3})}),e.jsxs(h,{gutter:16,children:[e.jsx(r,{span:12,children:e.jsxs(l.Item,{label:"Icon",children:[e.jsxs(D,{value:n.icon,onChange:t=>s("icon",t||null),placeholder:"Select icon (optional)",showSearch:!0,allowClear:!0,filterOption:(t,o)=>o.children.toLowerCase().indexOf(t.toLowerCase())>=0,children:[e.jsx(k,{value:null,children:e.jsx("span",{style:{fontSize:"14px",color:"#999"},children:"No Icon"})}),Y.map(t=>e.jsx(k,{value:t,children:e.jsx("span",{style:{fontSize:"16px"},children:t})},t))]}),e.jsx(f,{type:"secondary",style:{fontSize:"12px"},children:"Leave empty to hide the icon and show content only"})]})}),e.jsx(r,{span:12,children:e.jsx(l.Item,{label:"Priority",children:e.jsx(I,{value:n.priority,onChange:t=>s("priority",t),min:1,max:10,style:{width:"100%"}})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(r,{span:12,children:e.jsxs(l.Item,{label:"Background Color",children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{type:"color",value:n.background_color||"#1890ff",onChange:t=>s("background_color",t.target.value),style:{width:50,height:40,border:"1px solid #d9d9d9",borderRadius:"6px",cursor:"pointer"}}),e.jsx(j,{value:n.background_color,onChange:t=>s("background_color",t.target.value),placeholder:"#1890ff",style:{flex:1}})]}),e.jsx(f,{type:"secondary",style:{fontSize:"12px"},children:"Choose a professional color that matches your brand"})]})}),e.jsx(r,{span:12,children:e.jsxs(l.Item,{label:"Text Color",children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{type:"color",value:n.text_color||"#ffffff",onChange:t=>s("text_color",t.target.value),style:{width:50,height:40,border:"1px solid #d9d9d9",borderRadius:"6px",cursor:"pointer"}}),e.jsx(j,{value:n.text_color,onChange:t=>s("text_color",t.target.value),placeholder:"#ffffff",style:{flex:1}})]}),e.jsx(f,{type:"secondary",style:{fontSize:"12px"},children:"Ensure good contrast with background for readability"})]})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(r,{span:12,children:e.jsx(l.Item,{label:"Action URL",children:e.jsx(j,{value:n.action_url,onChange:t=>s("action_url",t.target.value),placeholder:"https://example.com"})})}),e.jsx(r,{span:12,children:e.jsx(l.Item,{label:"Action Text",children:e.jsx(j,{value:n.action_text,onChange:t=>s("action_text",t.target.value),placeholder:"Learn More"})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(r,{span:12,children:e.jsx(l.Item,{label:"Start Date",children:e.jsx(B,{value:n.start_date,onChange:t=>s("start_date",t),showTime:!0,style:{width:"100%"},placeholder:"Select start date"})})}),e.jsx(r,{span:12,children:e.jsx(l.Item,{label:"End Date",children:e.jsx(B,{value:n.end_date,onChange:t=>s("end_date",t),showTime:!0,style:{width:"100%"},placeholder:"Select end date"})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(r,{span:8,children:e.jsx(l.Item,{label:"Display Duration (seconds)",children:e.jsx(I,{value:n.display_duration,onChange:t=>s("display_duration",t),min:1,style:{width:"100%"},placeholder:"Leave empty for permanent"})})}),e.jsx(r,{span:8,children:e.jsx(l.Item,{label:"Sort Order",children:e.jsx(I,{value:n.sort_order,onChange:t=>s("sort_order",t),min:0,style:{width:"100%"}})})}),e.jsx(r,{span:8,children:e.jsx(l.Item,{label:"Active",children:e.jsx(C,{checked:n.is_active,onChange:t=>s("is_active",t)})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(r,{span:12,children:e.jsx(l.Item,{label:"Show on Mobile",children:e.jsx(C,{checked:n.show_on_mobile,onChange:t=>s("show_on_mobile",t)})})}),e.jsx(r,{span:12,children:e.jsx(l.Item,{label:"Show on Desktop",children:e.jsx(C,{checked:n.show_on_desktop,onChange:t=>s("show_on_desktop",t)})})})]})]})}),e.jsx(P,{title:"Preview Dynamic Slot",open:K,onCancel:()=>z(!1),footer:null,width:600,children:c&&e.jsxs("div",{style:{background:c.background_color||"#1890ff",color:c.text_color||"#ffffff",padding:"24px",borderRadius:"12px",textAlign:"center",marginBottom:"16px"},children:[e.jsx("div",{style:{fontSize:"32px",marginBottom:"12px"},children:c.icon||"📢"}),e.jsx(F,{level:3,style:{color:c.text_color||"#ffffff",marginBottom:"12px"},children:c.title}),e.jsx(H,{style:{color:c.text_color||"#ffffff",fontSize:"16px",marginBottom:"16px"},children:c.content}),c.action_text&&e.jsx(m,{type:"primary",style:{background:c.text_color||"#ffffff",color:c.background_color||"#1890ff",border:"none"},children:c.action_text})]})})]})]})}export{kt as default};
