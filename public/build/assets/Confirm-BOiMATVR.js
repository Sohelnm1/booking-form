import{r as R,j as e,H as Q,a as S}from"./app-DEDll9AR.js";import{d as q}from"./dayjs.min-oV3UgmnJ.js";import{A as X}from"./AppLayout-BW54P4GE.js";import{I as Z,aq as ee,T as re,R as F,a as g,C as B,x as H,B as M}from"./Logo-B-N0zWbR.js";import{F as l}from"./index-CNVZPylv.js";import{P as se}from"./progress-BAMSSaSx.js";import{R as O}from"./CheckCircleOutlined-CWVuh9Md.js";import{D as x}from"./index-Crc7eg74.js";import{R as te}from"./CalendarOutlined-D-mS0-JV.js";import{R as ne}from"./ClockCircleOutlined-CXxhKNjU.js";import{R as ae}from"./DollarOutlined-CKB6Kpk0.js";import{S as v}from"./index-CvJdu2Nc.js";import{I as o}from"./index-BDWaNcMD.js";import{R as L}from"./PhoneOutlined-BfiKldvn.js";import{R as N}from"./MailOutlined-DiHA5sia.js";import{A as V}from"./index-D6bEU2eY.js";import{R as ie}from"./ArrowLeftOutlined-BAMREewH.js";import{D as f}from"./index-DBRdJP7-.js";import{T as oe}from"./index-ClulcKCA.js";import{D as Y,T as le}from"./index-BnfRF0kH.js";import{C as U}from"./index-BXZuxNhI.js";import{R as W}from"./index-D6vFq78i.js";import{T as me}from"./index-CzJqx6VE.js";/* empty css            */import"./useForm-C6D9L30Q.js";import"./CheckCircleFilled-z0b-rEXZ.js";import"./InfoCircleFilled-DvigaNyv.js";import"./pickAttrs-BiP3ANKa.js";import"./PurePanel-DI_1_OwW.js";import"./index-bloQYPn8.js";import"./move-CESINLyB.js";import"./Input-DQrPDwVw.js";import"./EyeOutlined-B78wcFKQ.js";var ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-792 72h752v120H136V232zm752 560H136V440h752v352zm-237-64h165c4.4 0 8-3.6 8-8v-72c0-4.4-3.6-8-8-8H651c-4.4 0-8 3.6-8 8v72c0 4.4 3.6 8 8 8z"}}]},name:"credit-card",theme:"outlined"};function k(){return k=Object.assign?Object.assign.bind():function(a){for(var i=1;i<arguments.length;i++){var c=arguments[i];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},k.apply(this,arguments)}const de=(a,i)=>R.createElement(Z,k({},a,{ref:i,icon:ce})),p=R.forwardRef(de),{Title:b,Text:t,Paragraph:Ge}=re,{Option:m}=v;function Je({service:a,selectedExtras:i,date:c,time:d,consentSettings:I,form:pe,formFields:y,paymentSettings:P,totalPrice:C}){const[E]=l.useForm(),[G,T]=R.useState(!1),[he,xe]=R.useState(0),J=()=>{const r=i.map(n=>n.id),s=I.map(n=>n.id);S.visit(route("booking.consent"),{data:{service_id:a.id,extras:r,date:c,time:d,consents:s}})},K=async r=>{T(!0);try{const s=i.map(w=>w.id),n=I.map(w=>w.id),h={service_id:a.id,extras:s,date:c,time:d,consents:n,customer_name:r.customer_name,customer_email:r.customer_email,customer_phone:r.customer_phone,payment_method:r.payment_method,special_requests:r.special_requests||""};await S.post(route("booking.process"),h)}catch(s){console.error("Booking error:",s)}finally{T(!1)}},u=r=>`â‚¹${parseFloat(r).toFixed(2)}`,j=r=>{if(r<60)return`${r} min`;{const s=Math.floor(r/60),n=r%60;return n>0?`${s}h ${n}m`:`${s}h`}},_=r=>q(r,"HH:mm").format("h:mm A"),z=r=>q(r).format("dddd, MMMM D, YYYY"),D=a.duration+i.reduce((r,s)=>r+(s.duration||0),0),A=r=>{const s=[];switch(r.is_required?s.push({required:!0,message:`Please enter your ${r.label.toLowerCase()}`}):s.push({required:!1}),r.type){case"email":s.push({type:"email",message:"Please enter a valid email address"});break;case"phone":s.push({pattern:/^[0-9+\-\s()]+$/,message:"Please enter a valid phone number"});break;case"number":s.push({type:"number",message:"Please enter a valid number"});break;case"url":s.push({type:"url",message:"Please enter a valid URL"});break}return s},$=r=>{const s={placeholder:r.placeholder,size:"large"};switch(r.type){case"text":return e.jsx(o,{...s});case"email":return e.jsx(o,{...s,prefix:e.jsx(N,{})});case"phone":return e.jsx(o,{...s,prefix:e.jsx(L,{})});case"number":return e.jsx(me,{...s,style:{width:"100%"}});case"textarea":return e.jsx(o.TextArea,{...s,rows:3});case"select":return e.jsx(v,{...s,children:r.options?.map((n,h)=>e.jsx(m,{value:n,children:n},h))});case"radio":return e.jsx(W.Group,{children:r.options?.map((n,h)=>e.jsx(W,{value:n,children:n},h))});case"checkbox":return e.jsx(U.Group,{children:r.options?.map((n,h)=>e.jsx(U,{value:n,children:n},h))});case"date":return e.jsx(Y,{...s,style:{width:"100%"}});case"time":return e.jsx(le,{...s,style:{width:"100%"}});case"datetime":return e.jsx(Y,{...s,showTime:!0,style:{width:"100%"}});case"url":return e.jsx(o,{...s});case"password":return e.jsx(o.Password,{...s});default:return e.jsx(o,{...s})}};return e.jsxs(X,{children:[e.jsx(Q,{title:"Confirm & Pay - Book Appointment"}),e.jsxs("div",{style:{maxWidth:1200,margin:"0 auto",padding:"24px"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:48},children:[e.jsx(ee,{variant:"primary",color:"color",background:"white",size:"large"}),e.jsx(b,{level:2,style:{marginTop:24,marginBottom:8},children:"Confirm & Pay"}),e.jsx(t,{type:"secondary",style:{fontSize:16},children:"Review your booking and complete payment"})]}),e.jsxs("div",{style:{marginBottom:32},children:[e.jsx(se,{percent:100,showInfo:!1,strokeColor:"#1890ff",trailColor:"#f0f0f0"}),e.jsx("div",{style:{textAlign:"center",marginTop:8},children:e.jsx(t,{type:"secondary",children:"Step 5 of 5"})})]}),e.jsxs(F,{gutter:[32,32],children:[e.jsxs(g,{xs:24,lg:16,children:[e.jsxs(B,{style:{marginBottom:24},children:[e.jsxs(b,{level:4,style:{marginBottom:16},children:[e.jsx(O,{style:{marginRight:8,color:"#52c41a"}}),"Booking Summary"]}),e.jsxs(x,{bordered:!0,column:1,size:"small",children:[e.jsx(x.Item,{label:"Service",children:e.jsxs("div",{children:[e.jsx(t,{strong:!0,children:a.name}),e.jsx("br",{}),e.jsx(t,{type:"secondary",children:j(a.duration)})]})}),i.length>0&&e.jsx(x.Item,{label:"Extras",children:i.map(r=>e.jsxs("div",{style:{marginBottom:8},children:[e.jsxs(t,{children:["+ ",r.name]}),e.jsx("br",{}),e.jsx(t,{type:"secondary",children:u(r.price)})]},r.id))}),e.jsxs(x.Item,{label:"Appointment Date",children:[e.jsx(te,{style:{marginRight:8}}),z(c)]}),e.jsxs(x.Item,{label:"Appointment Time",children:[e.jsx(ne,{style:{marginRight:8}}),_(d)]}),e.jsx(x.Item,{label:"Total Duration",children:j(D)}),e.jsx(x.Item,{label:"Total Price",children:e.jsxs(t,{strong:!0,style:{fontSize:18,color:"#52c41a"},children:[e.jsx(ae,{style:{marginRight:8}}),u(C)]})})]})]}),e.jsxs(B,{children:[e.jsxs(b,{level:4,style:{marginBottom:16},children:[e.jsx(H,{style:{marginRight:8}}),"Customer Information"]}),e.jsxs(l,{form:E,layout:"vertical",onFinish:K,initialValues:{payment_method:"card"},children:[y&&y.length>0?e.jsxs(e.Fragment,{children:[y.filter(r=>r.is_primary).map(r=>e.jsx(l.Item,{name:r.name,label:r.label,rules:A(r),help:r.help_text,children:$(r)},r.id)),y.filter(r=>!r.is_primary).map(r=>e.jsx(l.Item,{name:r.name,label:r.label,rules:A(r),help:r.help_text,children:$(r)},r.id)),e.jsx(l.Item,{name:"payment_method",label:"Payment Method",rules:[{required:!0,message:"Please select a payment method"}],children:e.jsxs(v,{size:"large",placeholder:"Select payment method",children:[e.jsxs(m,{value:"card",children:[e.jsx(p,{style:{marginRight:8}}),"Credit/Debit Card"]}),e.jsxs(m,{value:"upi",children:[e.jsx(p,{style:{marginRight:8}}),"UPI Payment"]}),e.jsxs(m,{value:"netbanking",children:[e.jsx(p,{style:{marginRight:8}}),"Net Banking"]}),e.jsxs(m,{value:"wallet",children:[e.jsx(p,{style:{marginRight:8}}),"Digital Wallet"]})]})})]}):e.jsxs(e.Fragment,{children:[e.jsxs(F,{gutter:16,children:[e.jsx(g,{xs:24,sm:12,children:e.jsx(l.Item,{name:"customer_name",label:"Full Name",rules:[{required:!0,message:"Please enter your full name"}],children:e.jsx(o,{prefix:e.jsx(H,{}),placeholder:"Enter your full name",size:"large"})})}),e.jsx(g,{xs:24,sm:12,children:e.jsx(l.Item,{name:"customer_phone",label:"Phone Number",rules:[{required:!0,message:"Please enter your phone number"},{pattern:/^[0-9+\-\s()]+$/,message:"Please enter a valid phone number"}],children:e.jsx(o,{prefix:e.jsx(L,{}),placeholder:"Enter your phone number",size:"large"})})})]}),e.jsx(l.Item,{name:"customer_email",label:"Email Address",rules:[{required:!0,message:"Please enter your email address"},{type:"email",message:"Please enter a valid email address"}],children:e.jsx(o,{prefix:e.jsx(N,{}),placeholder:"Enter your email address",size:"large"})}),e.jsx(l.Item,{name:"payment_method",label:"Payment Method",rules:[{required:!0,message:"Please select a payment method"}],children:e.jsxs(v,{size:"large",placeholder:"Select payment method",children:[e.jsxs(m,{value:"card",children:[e.jsx(p,{style:{marginRight:8}}),"Credit/Debit Card"]}),e.jsxs(m,{value:"upi",children:[e.jsx(p,{style:{marginRight:8}}),"UPI Payment"]}),e.jsxs(m,{value:"netbanking",children:[e.jsx(p,{style:{marginRight:8}}),"Net Banking"]}),e.jsxs(m,{value:"wallet",children:[e.jsx(p,{style:{marginRight:8}}),"Digital Wallet"]})]})}),e.jsx(l.Item,{name:"special_requests",label:"Special Requests (Optional)",children:e.jsx(o.TextArea,{rows:3,placeholder:"Any special requests or notes for your appointment..."})})]}),e.jsx(V,{message:"Booking Confirmation",description:"By clicking 'Confirm & Pay', you agree to our terms and conditions and confirm your appointment booking.",type:"info",showIcon:!0,style:{marginBottom:24}}),e.jsxs("div",{style:{display:"flex",gap:16},children:[e.jsx(M,{size:"large",icon:e.jsx(ie,{}),onClick:J,style:{flex:1},children:"Back to Terms"}),e.jsxs(M,{type:"primary",size:"large",htmlType:"submit",loading:G,icon:e.jsx(O,{}),style:{flex:2},children:["Confirm & Pay ",u(C)]})]})]})]})]}),e.jsx(g,{xs:24,lg:8,children:e.jsxs(B,{style:{position:"sticky",top:24},children:[e.jsx(b,{level:4,style:{marginBottom:16},children:"Final Summary"}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsx(t,{strong:!0,children:a.name}),e.jsx(t,{children:u(a.price)})]}),e.jsx(t,{type:"secondary",style:{fontSize:12},children:j(a.duration)})]}),i.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(f,{style:{margin:"12px 0"}}),i.map(r=>e.jsx("div",{style:{marginBottom:8},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(t,{children:["+ ",r.name]}),e.jsx(t,{children:u(r.price)})]})},r.id))]}),e.jsx(f,{style:{margin:"16px 0"}}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(t,{type:"secondary",children:"Appointment Date"}),e.jsx("div",{children:e.jsx(t,{strong:!0,children:z(c)})})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(t,{type:"secondary",children:"Appointment Time"}),e.jsx("div",{children:e.jsx(t,{strong:!0,children:_(d)})})]}),e.jsx(f,{style:{margin:"16px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsx(t,{strong:!0,children:"Total Price"}),e.jsx(t,{strong:!0,style:{fontSize:18,color:"#52c41a"},children:u(C)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(t,{type:"secondary",children:"Total Duration"}),e.jsx(t,{type:"secondary",children:j(D)})]}),e.jsx(f,{style:{margin:"16px 0"}}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(t,{type:"secondary",children:"Accepted Agreements"}),e.jsx("div",{children:I.map(r=>e.jsx(oe,{color:"green",style:{marginTop:4},children:r.title},r.id))})]}),e.jsx(V,{message:"Secure Payment",description:`Your payment information is encrypted and secure. ${P?.razorpay_key?"Powered by Razorpay.":""}`,type:"success",showIcon:!0,style:{marginTop:16}}),P?.currency&&e.jsxs(t,{type:"secondary",style:{fontSize:12,display:"block",marginTop:8},children:["Currency: ",P.currency]})]})})]})]})]})}export{Je as default};
