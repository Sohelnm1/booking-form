import{r as j,j as e,H as Y,a as M}from"./app-Dc3E6YUy.js";import{B as V}from"./BookingHeader-BqIDCal3.js";import{I as J,a9 as U,T as G,C as S,B as h}from"./Logo-DIQwnbFb.js";import{P as K}from"./progress-BOPoHGsB.js";import{R as z,C as u}from"./row-BqfE-STe.js";import{T as _}from"./index-jtJX4whC.js";import{S as C}from"./index-Dbb0M_WJ.js";import{A as T}from"./index-Bjn7WmCu.js";import{C as X}from"./index-Ca0nCYzu.js";import{R as Z}from"./InfoCircleOutlined-B00QmKoc.js";import{R as P}from"./PlusOutlined-B0f7asff.js";import{s as R}from"./index-DplzFmUW.js";import{D as W}from"./index-Cx2EURi-.js";import{R as ee}from"./ArrowLeftOutlined-CR3CBH9q.js";import{R as te}from"./ArrowRightOutlined-DOZVrzE4.js";import{M as ie}from"./index-BCUHYXpE.js";import{R as ne}from"./ClockCircleOutlined-D4kMoH8T.js";/* empty css            */import"./CustomerLoginModal-Dll-LgKP.js";import"./PhoneOutlined-B490vTzM.js";import"./LockOutlined-D4OQDBRM.js";import"./index-CjnswWD_.js";import"./Input-BfvUZntP.js";import"./pickAttrs-Do-YelpT.js";import"./EyeOutlined-pclkUY3n.js";import"./EyeOutlined-Bmd706kk.js";import"./index-BBcNZ_eN.js";import"./LogoutOutlined-t541zWvm.js";import"./BookOutlined-BbL6ZE9L.js";import"./CalendarOutlined-Bj7enq6S.js";import"./CheckCircleFilled-D7RMkPYG.js";import"./useClosable-DFJx6fP2.js";import"./extendsObject-78o_rR5W.js";import"./InfoCircleFilled-y1gPlI4k.js";import"./PurePanel-XOMY9fLy.js";var oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"};function k(){return k=Object.assign?Object.assign.bind():function(r){for(var c=1;c<arguments.length;c++){var f=arguments[c];for(var s in f)Object.prototype.hasOwnProperty.call(f,s)&&(r[s]=f[s])}return r},k.apply(this,arguments)}const se=(r,c)=>j.createElement(J,k({},r,{ref:c,icon:oe})),re=j.forwardRef(se),{Title:y,Text:l}=G;function Ne({service:r,extras:c,bookingSettings:f,selectedPricingTier:s,selectedDuration:le,selectedPrice:ae,auth:A}){const[d,E]=j.useState([]),[g,v]=j.useState({}),[H,w]=j.useState(!1),[a,I]=j.useState(null),p=f?.max_extras_per_booking||10,F=f?.enable_extra_quantities!==!1;console.log("SelectExtras component - Extras data:",c),console.log("SelectExtras component - Selected extras:",d),console.log("SelectExtras component - Booking settings:",f),c.forEach((t,i)=>{console.log(`Extra ${i+1}:`,{id:t.id,name:t.name,duration_id:t.duration_id,durationRelation:t.durationRelation,hasDurationRelation:!!t.durationRelation,durationLabel:t.durationRelation?.label})});const D=t=>{E(i=>i.find(n=>n.id===t.id)?(v(n=>{const m={...n};return delete m[t.id],m}),i.filter(n=>n.id!==t.id)):i.length>=p?(R.warning(`You can only select up to ${p} different extras.`),i):(v(n=>({...n,[t.id]:1})),[...i,t]))},$=(t,i)=>{if(i<1)E(o=>o.filter(n=>n.id!==t)),v(o=>{const n={...o};return delete n[t],n});else{const n=d.find(m=>m.id===t)?.max_quantity||5;if(i>n){R.warning(`You can only add up to ${n} of this extra.`);return}v(m=>({...m,[t]:i}))}},Q=()=>{M.visit(route("booking.select-service"))},q=()=>{const t=d.map(n=>n.id),i=d.map(n=>({id:n.id,quantity:g[n.id]||1})),o=encodeURIComponent(JSON.stringify(i));M.visit(route("booking.select-datetime"),{data:{service_id:r.id,pricing_tier_id:s?.id,selected_duration:s?.duration_minutes||r.duration,selected_price:s?.price||r.price,extras:t,extra_quantities_json:o}})},x=t=>`₹${parseFloat(t).toFixed(2)}`,L=()=>{const t=parseFloat(s?s.price:r.price),i=d.reduce((o,n)=>{const m=g[n.id]||1;return o+parseFloat(n.price)*m},0);return t+i},b=t=>{if(t<60)return`${t} min`;{const i=Math.floor(t/60),o=t%60;return o>0?`${i}h ${o}m`:`${i}h`}},O=(t,i=60)=>{if(!t||t.length<=i)return t;const o=document.createElement("div");o.innerHTML=t;const n=o.textContent||o.innerText||"";return n.length<=i?t:n.substring(0,i).trim()+"..."},N=(t,i)=>{i.stopPropagation(),I(t),w(!0)},B=()=>{w(!1),I(null)};return e.jsxs("div",{children:[e.jsx(Y,{title:"Select Extras - Book Appointment"}),e.jsx(V,{auth:A}),e.jsxs("div",{style:{maxWidth:1200,margin:"0 auto",padding:"24px"},children:[e.jsx("div",{className:"mobile-top-spacing"}),e.jsxs("div",{style:{textAlign:"center",marginBottom:48},children:[e.jsx(U,{variant:"primary",color:"color",background:"white",size:"large"}),e.jsx(y,{level:2,style:{marginTop:24,marginBottom:8},children:"Add Extras (Optional)"}),e.jsx(l,{type:"secondary",style:{fontSize:16},children:"Enhance your experience with additional services"})]}),e.jsxs("div",{style:{marginBottom:32},children:[e.jsx(K,{percent:40,showInfo:!1,strokeColor:"#1890ff",trailColor:"#f0f0f0"}),e.jsx("div",{style:{textAlign:"center",marginTop:8},children:e.jsx(l,{type:"secondary",children:"Step 2 of 5"})})]}),e.jsxs(z,{gutter:[32,32],children:[e.jsxs(u,{xs:24,lg:16,children:[e.jsxs(S,{style:{marginBottom:24},children:[e.jsx(y,{level:4,style:{marginBottom:16},children:"Selected Service"}),e.jsxs(z,{align:"middle",gutter:16,children:[e.jsx(u,{children:e.jsx("div",{style:{width:60,height:60,backgroundColor:r.color||"#f0f0f0",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:24,fontWeight:"bold"},children:r.name.charAt(0)})}),e.jsxs(u,{flex:"1",children:[e.jsxs(y,{level:5,style:{margin:0},children:[r.name,s&&e.jsx(_,{color:"blue",style:{marginLeft:8,fontSize:10},children:s.name})]}),e.jsxs(C,{size:"large",children:[e.jsx(l,{type:"secondary",children:s?b(s.duration_minutes):r.duration_label||b(r.duration)}),e.jsx(l,{strong:!0,children:x(s?s.price:r.price)})]})]})]})]}),e.jsxs(S,{children:[e.jsx(y,{level:4,style:{marginBottom:16},children:"Available Extras"}),c.length===0?e.jsx(T,{message:"No extras available",description:"There are currently no additional services available for this booking.",type:"info",showIcon:!0}):d.length>=p?e.jsx(T,{message:"Maximum extras reached",description:`You have selected the maximum number of extras (${p}). Please remove some extras to add others.`,type:"warning",showIcon:!0}):e.jsx(z,{gutter:[16,16],children:c.map(t=>{const i=d.find(o=>o.id===t.id);return e.jsx(u,{xs:24,sm:12,children:e.jsx(S,{hoverable:!0,style:{cursor:d.length>=p&&!i?"not-allowed":"pointer",border:i?"2px solid #1890ff":"1px solid #f0f0f0",opacity:d.length>=p&&!i?.6:1,transition:"all 0.3s ease"},onClick:()=>{if(d.length>=p&&!i){R.warning(`You can only select up to ${p} different extras.`);return}D(t)},styles:{body:{padding:16}},children:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(X,{checked:i,style:{marginRight:12}}),e.jsxs("div",{style:{flex:1},children:[e.jsx(y,{level:5,style:{margin:0,marginBottom:4},children:t.name}),t.description&&e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},dangerouslySetInnerHTML:{__html:O(t.description,60)}}),e.jsx(h,{type:"link",size:"small",icon:e.jsx(Z,{}),onClick:o=>N(t,o),style:{padding:0,height:"auto",fontSize:"10px",color:"#1890ff",marginTop:2},children:"View Details"}),e.jsx("div",{style:{marginTop:8},children:e.jsxs(C,{size:"small",children:[t.durationRelation&&e.jsx(_,{size:"small",children:t.durationRelation.label}),e.jsx(_,{size:"small",color:"green",children:x(t.price)})]})})]}),i&&F&&e.jsx("div",{style:{marginLeft:12},children:e.jsxs(C,{children:[e.jsx(h,{size:"small",icon:e.jsx(re,{}),onClick:o=>{o.stopPropagation();const n=g[t.id]||1;$(t.id,n-1)}}),e.jsx(l,{strong:!0,style:{minWidth:20,textAlign:"center"},children:g[t.id]||1}),e.jsx(h,{size:"small",icon:e.jsx(P,{}),onClick:o=>{o.stopPropagation();const n=g[t.id]||1;$(t.id,n+1)}})]})})]})})},t.id)})})]})]}),e.jsx(u,{xs:24,lg:8,children:e.jsxs(S,{style:{position:"sticky",top:24},children:[e.jsx(y,{level:4,style:{marginBottom:16},children:"Booking Summary"}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsxs(l,{strong:!0,children:[r.name,s&&e.jsx(_,{color:"blue",style:{marginLeft:8,fontSize:10},children:s.name})]}),e.jsx(l,{children:x(s?s.price:r.price)})]}),e.jsx(l,{type:"secondary",style:{fontSize:12},children:s?b(s.duration_minutes):r.duration_label||b(r.duration)})]}),d.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(W,{style:{margin:"12px 0"}}),d.map(t=>{const i=g[t.id]||1,o=parseFloat(t.price)*i;return e.jsxs("div",{style:{marginBottom:8},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(l,{children:["+ ",t.name,i>1&&e.jsxs(l,{type:"secondary",style:{fontSize:12},children:[" ","× ",i]})]}),e.jsx(l,{children:x(o)})]}),e.jsxs(l,{type:"secondary",style:{fontSize:12},children:[t.duration_relation?t.duration_relation.label:"No additional time",i>1&&e.jsxs(l,{type:"secondary",style:{fontSize:12},children:[" ","× ",i]})]})]},t.id)})]}),e.jsx(W,{style:{margin:"16px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsx(l,{strong:!0,children:"Total Price"}),e.jsx(l,{strong:!0,style:{fontSize:16},children:x(L())})]}),e.jsxs("div",{style:{marginTop:24},children:[e.jsx(h,{block:!0,style:{marginBottom:12},icon:e.jsx(ee,{}),onClick:Q,children:"Back to Services"}),e.jsx(h,{type:"primary",block:!0,size:"large",icon:e.jsx(te,{}),onClick:q,children:"Continue to Date & Time"})]})]})})]})]}),e.jsx(ie,{title:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{width:40,height:40,borderRadius:"8px",background:"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:18,fontWeight:"bold"},children:a?.name?.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#1f1f1f"},children:a?.name}),e.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:2},children:"Extra Service Details"})]})]}),open:H,onCancel:B,footer:[e.jsx(h,{onClick:B,children:"Close"},"close"),e.jsx(h,{type:"primary",onClick:()=>{D(a),B()},children:"Add This Extra"},"select")],width:500,centered:!0,children:a&&e.jsxs("div",{style:{padding:"16px 0"},children:[a.description&&e.jsxs("div",{style:{marginBottom:20},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#1f1f1f",marginBottom:8},children:"Description"}),e.jsx("div",{style:{fontSize:"14px",lineHeight:1.5,color:"#666"},dangerouslySetInnerHTML:{__html:a.description}})]}),e.jsxs("div",{style:{marginBottom:20},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#1f1f1f",marginBottom:12},children:"Service Information"}),e.jsxs(z,{gutter:16,children:[e.jsx(u,{span:12,children:e.jsxs("div",{style:{padding:"12px",background:"#f8f9fa",borderRadius:"6px",border:"1px solid #e8e8e8"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[e.jsx(ne,{style:{color:"#1890ff",fontSize:14}}),e.jsx("span",{style:{fontSize:"11px",color:"#999"},children:"Duration"})]}),e.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#1f1f1f"},children:a.duration_relation?a.duration_relation.label:"No additional time"})]})}),e.jsx(u,{span:12,children:e.jsxs("div",{style:{padding:"12px",background:"#f8f9fa",borderRadius:"6px",border:"1px solid #e8e8e8"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[e.jsx("span",{style:{color:"#52c41a",fontSize:14,fontWeight:"bold"},children:"₹"}),e.jsx("span",{style:{fontSize:"11px",color:"#999"},children:"Regular"})]}),e.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#1f1f1f"},children:x(a.price)})]})})]})]}),e.jsxs("div",{style:{padding:"12px",background:"#f0f8ff",borderRadius:"6px",border:"1px solid #bae7ff"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#1890ff",marginBottom:4},children:"Quantity Limit"}),e.jsxs("div",{style:{fontSize:"12px",lineHeight:1.4,color:"#666"},children:["You can add up to"," ",a.max_quantity||5," of this extra service to your booking."]})]}),(a?.disclaimer_title||a?.disclaimer_content)&&e.jsxs("div",{style:{padding:"16px",background:"#f0f8ff",borderRadius:"8px",border:"1px solid #bae7ff",marginTop:16},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#1890ff",marginBottom:8},children:a?.disclaimer_title||"What's Included"}),e.jsx("div",{style:{fontSize:"14px",lineHeight:1.5,color:"#666"},dangerouslySetInnerHTML:{__html:a?.disclaimer_content||"This extra service includes professional care and quality products to enhance your experience."}})]})]})})]})}export{Ne as default};
