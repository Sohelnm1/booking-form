import{r as o,j as e,H,a as g}from"./app-C-_7uao2.js";import{ac as B,ad as N,ae as V,B as l,T as U,C as v}from"./Logo-B1o7Ze6Y.js";import{S as O,R as S}from"./CalendarOutlined-DsF39C_E.js";import{A as Y,R as _}from"./LogoutOutlined-CcOqAjwU.js";import{s as r}from"./index-D87hQRyl.js";import{R as q,C as k}from"./row-rnKDuNpk.js";import{R as D,a as J}from"./SafetyCertificateOutlined-Dy3NgQBt.js";import{M as K}from"./index-CDz4i8fA.js";import{A as X}from"./index-BPhEJg7g.js";import{I as T}from"./index-CCvGSMQk.js";import{R as G}from"./PhoneOutlined-DPXHLBve.js";import{R as Q}from"./SendOutlined-DxgYfan2.js";import{R as Z}from"./BookOutlined-83y4ltn8.js";/* empty css            */import"./CheckCircleFilled-b2Lbp7ff.js";import"./InfoCircleFilled-BXOvrJG9.js";import"./pickAttrs-CYwhknCO.js";import"./useClosable-DAJgbKkF.js";import"./PurePanel-CyGAA7Fx.js";import"./Input-1CS9RFTb.js";import"./EyeOutlined-4E9-30tx.js";const{Title:u,Paragraph:h,Text:C}=U,{Header:ee,Content:te}=B;function ke({auth:a}){const[P,m]=o.useState(!1),[s,x]=o.useState(""),[i,y]=o.useState(""),[j,b]=o.useState(!1),[d,c]=o.useState(!1),[w,A]=o.useState(""),[p,I]=o.useState(!1),[f,R]=o.useState(null);o.useEffect(()=>{a&&a.user&&(I(!0),R(a.user))},[a]);const L=()=>{g.visit(route("booking.select-service"))},z=()=>{m(!0)},E=async()=>{if(!s||s.length<10){r.error("Please enter a valid phone number");return}try{c(!0);const t=await fetch(route("booking.send-otp"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({phone_number:s})}),n=await t.json();t.ok?(r.success("OTP sent successfully to your phone number"),b(!0),n.otp&&A(n.otp)):r.error(n.error||"Failed to send OTP")}catch(t){console.error("Error sending OTP:",t),r.error("Failed to send OTP")}finally{c(!1)}},M=async()=>{if(!i||i.length!==6){r.error("Please enter a valid 6-digit OTP");return}try{c(!0);const t=await fetch(route("customer.login"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({phone_number:s,otp:i})}),n=await t.json();t.ok?(r.success("Login successful!"),I(!0),R(n.user),m(!1),b(!1),y(""),x(""),window.location.reload()):r.error(n.error||"Invalid OTP")}catch(t){console.error("Error verifying OTP:",t),r.error("Failed to verify OTP")}finally{c(!1)}},W=()=>{g.post(route("logout"),{},{onSuccess:()=>{window.location.reload()}})},F=t=>t?t.split(" ").map(n=>n[0]).join("").toUpperCase().slice(0,2):"CU",$=[{key:"services",icon:e.jsx(Z,{}),label:"Services",onClick:()=>g.visit(route("welcome"))},...p&&f?[{key:"bookings",icon:e.jsx(S,{}),label:"Your Bookings",onClick:()=>g.visit(route("customer.bookings"))}]:[]];return e.jsxs(B,{style:{minHeight:"100vh"},children:[e.jsx(H,{title:"HospiPal - Customer Dashboard"}),e.jsxs(ee,{style:{background:"#fff",padding:"0 24px",display:"flex",alignItems:"center",justifyContent:"space-between",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx(N,{variant:"primary",color:"color",background:"white",size:"medium"})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx(V,{mode:"horizontal",items:$,style:{border:"none",background:"transparent"}}),p&&f?e.jsxs(O,{children:[e.jsx(Y,{style:{backgroundColor:"#1890ff",cursor:"pointer"},onClick:()=>r.info("Profile settings coming soon"),children:F(f?.name)}),e.jsx(l,{type:"text",icon:e.jsx(_,{}),onClick:W,children:"Logout"})]}):e.jsx(l,{type:"primary",onClick:z,children:"Sign In"})]})]}),e.jsx(te,{style:{padding:"64px 24px"},children:e.jsxs("div",{style:{maxWidth:1200,margin:"0 auto"},children:[e.jsxs("div",{style:{background:"linear-gradient(135deg, #f0f8ff 0%, #e6f7ff 100%)",padding:"64px 24px",borderRadius:"16px",textAlign:"center",marginBottom:64},children:[e.jsx(u,{level:1,style:{marginBottom:24,color:"#1f1f1f"},children:"Welcome to HospiPal"}),e.jsx(h,{style:{fontSize:18,color:"#666",maxWidth:600,margin:"0 auto 32px auto"},children:"Experience seamless booking with our modern, user-friendly platform. Find and reserve your perfect spot with just a few clicks."}),e.jsxs(O,{size:"large",children:[e.jsx(l,{type:"primary",size:"large",icon:e.jsx(S,{}),onClick:L,style:{background:"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)",border:"none",height:48,padding:"0 32px",fontSize:16,fontWeight:600},children:p&&f?"Book Appointment Now":"Book Appointment"}),!p&&e.jsx(l,{size:"large",onClick:z,style:{height:48,padding:"0 32px",fontSize:16},children:"Log In"})]})]}),e.jsxs(q,{gutter:[24,24],children:[e.jsx(k,{xs:24,md:8,children:e.jsx(v,{children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(S,{style:{fontSize:48,color:"#1890ff",marginBottom:16}}),e.jsx(u,{level:4,children:"Easy Booking"}),e.jsx(h,{children:"Book your appointments in just a few clicks with our streamlined booking process."})]})})}),e.jsx(k,{xs:24,md:8,children:e.jsx(v,{children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(D,{style:{fontSize:48,color:"#52c41a",marginBottom:16}}),e.jsx(u,{level:4,children:"Secure & Safe"}),e.jsx(h,{children:"Your data is protected with industry-standard security measures."})]})})}),e.jsx(k,{xs:24,md:8,children:e.jsx(v,{children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(J,{style:{fontSize:48,color:"#722ed1",marginBottom:16}}),e.jsx(u,{level:4,children:"Mobile Friendly"}),e.jsx(h,{children:"Access our platform from any device with our responsive design."})]})})})]})]})}),e.jsx(K,{title:"Customer Login",open:P,onCancel:()=>{m(!1),b(!1),y(""),x("")},footer:null,width:480,centered:!0,children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("div",{style:{marginBottom:32},children:[e.jsx(C,{type:"secondary",style:{fontSize:16,lineHeight:1.6,color:"#595959"},children:j?`We've sent a 6-digit code to ${s}`:"Enter your phone number to receive a verification code"}),j&&w&&e.jsx(X,{message:"Testing Mode - OTP Code",description:`Your verification code is: ${w}`,type:"info",showIcon:!0,style:{marginTop:16}})]}),j?e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:32},children:[e.jsxs("div",{style:{position:"relative",display:"flex",justifyContent:"center",gap:8,marginBottom:16},children:[e.jsx(T,{size:"large",placeholder:"Enter 6-digit code",value:i,onChange:t=>y(t.target.value),maxLength:6,style:{position:"absolute",opacity:0,zIndex:10,width:"100%",height:"100%"},autoFocus:!0}),[0,1,2,3,4,5].map(t=>e.jsx("div",{style:{width:48,height:48,border:"2px solid #d9d9d9",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,fontWeight:"bold",background:"#fff",color:i[t]?"#1890ff":"#d9d9d9",borderColor:i[t]?"#1890ff":"#d9d9d9"},children:i[t]||""},t))]}),e.jsx(C,{type:"secondary",style:{fontSize:12},children:"Enter the 6-digit code sent to your phone"})]}),e.jsx(l,{type:"primary",size:"large",onClick:M,loading:d,disabled:i.length!==6,style:{height:48,fontSize:16,fontWeight:500,borderRadius:8,width:"100%",background:"linear-gradient(135deg, #52c41a 0%, #389e0d 100%)",border:"none",boxShadow:"0 4px 12px rgba(82, 196, 26, 0.3)"},children:d?"Verifying...":"Verify & Login"})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsx("div",{style:{position:"relative",marginBottom:8},children:e.jsx(T,{size:"large",placeholder:"+91 98765 43210",prefix:e.jsx(G,{style:{color:"#bfbfbf"}}),value:s,onChange:t=>x(t.target.value),style:{height:48,fontSize:16,borderRadius:8,border:"1px solid #d9d9d9"}})}),e.jsx(C,{type:"secondary",style:{fontSize:12},children:"We'll send you a verification code via SMS"})]}),e.jsx(l,{type:"primary",size:"large",icon:e.jsx(Q,{}),onClick:E,loading:d,disabled:!s||s.length<10,style:{height:48,fontSize:16,fontWeight:500,borderRadius:8,width:"100%",background:"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)",border:"none",boxShadow:"0 4px 12px rgba(24, 144, 255, 0.3)"},children:d?"Sending...":"Send Verification Code"})]})]})})]})}export{ke as default};
